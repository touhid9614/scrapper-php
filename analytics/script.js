var sMedia;void 0!==sMedia&&sMedia.Context||(!function(t){t.SECONDS_IN_A_DAY=86400,t.GA4_EVENTS=[{listen:"engaged_prospect",ga4:"engaged_prospect"},{listen:"smart_offer.shown",ga4:"smart_offer_shown"},{listen:"smart_offer.submit",ga4:"smart_offer_lead"},{listen:"aiform.complete",ga4:"ai_button_submit"},{listen:"aibutton.click",ga4:"ai_button_click"}],t.ANALYTICS_EVENTS={pageview:{category:null,action:null,label:null,nonInteraction:!0},vdp:{category:"vdp",action:"view",label:null,nonInteraction:!0},profitable_engagement_1:{category:"Profitable Engagement",action:"Time on page more than 30 seconds",label:null,nonInteraction:!1},profitable_engagement_2:{category:"Profitable Engagement",action:"Time on page more than a minute",label:null,nonInteraction:!1},profitable_engagement_3:{category:"Profitable Engagement",action:"Time on page more than 1 minute 30 seconds",label:null,nonInteraction:!1},smart_offer_lead:{category:"smart_offer",action:"lead",label:null,nonInteraction:!1},smart_offer_shown:{category:"smart_offer",action:"shown",label:null,nonInteraction:!0},ai_button_clicked:{category:"Button Clicked",action:"AI Button",label:"{button_name}",nonInteraction:!1},ai_button_input:{category:"Input Tracking",action:"{status}",label:"{field}",nonInteraction:!1},ai_button_fillup:{category:"Form Fillup",action:"AI Form",label:null,nonInteraction:!1},lead_from_submit:{category:"Lead Form",action:"submit",label:null,nonInteraction:!1},picture_engagement:{category:"Picture engagement",action:"{ith} Picture engagement",label:null,nonInteraction:!1},picture_viewd:{category:"Picture Viewed",action:"{ith} Picture Viewed",label:null,nonInteraction:!1}}}(sMedia||(sMedia={})),function(t){function e(t){return void 0!==t}function n(t){const e={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,J:1,K:2,L:3,M:4,N:5,P:7,R:9,S:2,T:3,U:4,V:5,W:6,X:7,Y:8,Z:9};return u(Object.keys(e),Object.values(e),t)}function i(t){const e=o(t),n=[],i={0:8,1:7,2:6,3:5,4:4,5:3,6:2,7:10,8:0,9:9,10:8,11:7,12:6,13:5,14:4,15:3,16:2};return Object.entries(e).forEach((([t,e])=>{n[t]=e*i[t]})),n}function o(t,e=1){if(null===e&&(e=1),null===t||e<1)return!1;const n=[];let i=0;const o=(t+="").length;for(;i<o;)n.push(t.slice(i,i+=e));return n}function s(t){if("number"==typeof t)return!0}function a(t){if(s(t))return t;if(!t)return 0;return""==t.replace(/[0-9.,$]+/,"")?Number(t.replace(/[^0-9.]+/gi,"")):0}function r(t,e,n){return t>=e&&t<=n}function c(t){return new RegExp("^[0-9]+(.[0-9]{0,2})?$","gi").test(t)}function l(t){return new RegExp(t.slice(1,-1),"i")}function d(t=null){let e=m();return!e&&t&&(t.stock_type&&(e=t.stock_type),!e&&t.title&&(e=p(t.title)),!e&&t.kilometres&&(e=h(t.kilometres)),!e&&t.year&&(e=g(parseInt(t.year)))),e||"new"}function m(){const t=window.location.href.split("#")[0].toLowerCase();return t.includes("used")||t.includes("preowned")||t.includes("pre-owned")||t.includes("certified")?"used":t.includes("new")?"new":null}function p(t){return(t=t.toLowerCase()).includes("used")||t.includes("preowned")||t.includes("pre-owned")||t.includes("certified")?"USED":t.includes("new")?"NEW":null}function h(t){const e=parseInt(t.replace(/[^0-9.]/g,""));return e>1e3?"used":e<100?"new":null}function g(t){return t++>=(new Date).getFullYear()?"new":"used"}function u(t,e,n){let i,o;return"string"==typeof t?(t=t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\"),i=new RegExp(`(${t})`,"g")):(t=t.map((function(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\")})),i=new RegExp(`(${t.join("|")})`,"g")),o="string"==typeof e?e:"string"==typeof t?e[0]:function(n){return e[t.indexOf(n)]},n.replace(i,o)}t.isEmptyString=function(t){return!Boolean(t)},t.isEmptyArray=function(t){return!(Array.isArray(t)&&t.length>0)},t.isEmptyObject=function(t){return 0===Object.values(t).length},t.isProperPrice=function(t,e=1e3,n=1e6){return s(t)||(t=a(t)),!!t&&(r(t,e,n)&&c(t))},t.isDefined=e,t.assignIfExists=function(t,n=null){return e(t)?t:n},t.isValidVin=function(t){if(17!==(t=t.toUpperCase()).length)return!1;if(t.includes("I")||t.includes("O")||t.includes("Q"))return!1;const e=t.substr(8,1);if(!"0123456789X".includes(e))return!1;let o=i(n(t)).reduce(((t,e)=>t+e))%11;return 10==o&&(o="X"),o==e},t.transliterateVIN=n,t.getWeightedVIN=i,t.strSplit=o,t.isNumber=s,t.priceToNumber=a,t.checkPriceRange=r,t.validatePrice=c,t.sleep=function(t){const e=(new Date).getTime();let n=!0;for(;n;){(new Date).getTime()-e>t&&(n=!1)}},t.executeIfFileExist=function(t,e){const n=new XMLHttpRequest;n.onreadystatechange=function(){this.readyState===this.DONE&&e()},n.open("HEAD",t)},t.getIndexed=function(t){switch(t){case 1:return`${t}st`;case 2:return`${t}nd`;case 3:return`${t}rd`;default:return`${t}th`}},t.regexP2J=l,t.assumeStockType=d,t.assumeStockTypeFromUrl=m,t.assumeStockTypeFromTitle=p,t.assumeStockTypeFromKilometres=h,t.assumeStockTypeFromYear=g,t.generateCarData=function(t,e){const n={url:window.location.href.split("#")[0]};if(!t)return n;if(t.new||t.used){const e=d();t=t[e],n.stock_type=e}for(const i in t){const o=l(t[i]).exec(e);o&&o.groups&&(n[i]=o.groups[i].trim())}return n.stock_type||(n.stock_type=d()),n},t.smediaUrlEncrypt=function(t){const e={"%2F":"SMEDIA_FORWARD_SLASH","%5C":"SMEDIA_BACKWARD_SLASH","%3F":"SMEDIA_WHAT","%26":"SMEDIA_AMPERSENT","%40":"SMEDIA_AT_THE_RATE_OF","%2A":"SMEDIA_STAR"};return u(Object.keys(e),Object.values(e),t)},t.smediaUrlDecrypt=function(t){const e={"%2F":"SMEDIA_FORWARD_SLASH","%5C":"SMEDIA_BACKWARD_SLASH","%3F":"SMEDIA_WHAT","%26":"SMEDIA_AMPERSENT","%40":"SMEDIA_AT_THE_RATE_OF","%2A":"SMEDIA_STAR"};return u(Object.values(e),Object.keys(e),t)},t.strReplace=u,t.awaitResolution=function(t,e,n){const i=+new Date;return void 0===e&&(e=1500),void 0===n&&(n=100),new Promise((function(o,s){!function o(s,a){if(+new Date-i>e)return a(`Timeout of ${e} milliseconds has been reached.`);const r=t();if(null!==r)return s(r);setTimeout(o,n)}(o,s)}))},t.escapeString=function(t){return t.replaceArray(["/"],["/"])},t.string_to_regex=function(t){const e=t.replace(/\\\//g,"--slash--").split("/");if(3==e.length){return new RegExp(e[1].replace(/--slash--/g,"/"),e[2])}return null},t.stringToInt=function(t){return parseInt((t||"").replace(/[^0-9.]/,"").split(".")[0])},t.OrAllMembers=function(t){let e=!1;for(const n in t)e=e||t[n];return e},t.getValueById=function(t){return document.querySelector(`#${t}`)?document.getElementById(t).value:""},t.debugLog=function(e){t.Context.LogService.Debug(e)},t.arrayLower=function(t){return t.map((t=>t.toLowerCase().trim()))},t.removeInvalids=function(t){let e=-1,n=-1;const i=t?t.length:0,o=[];for(;++e<i;){const i=t[e];i&&(o[++n]=i)}return o}}(sMedia||(sMedia={})),function(t){function e(e,n,i){let o=!!(e.customVDP.stockType.length||e.customVDP.year.length||e.customVDP.make.length||e.customVDP.model.length||e.customVDP.regex.length);const s=t.removeInvalids(t.arrayLower(e.customVDP.stockType));s.length&&(o=o&&i&&s.includes((n.stock_type||"new").toLowerCase().trim())),e.customVDP.year.length&&n&&n.year&&(o=o&&i&&e.customVDP.year.includes(n.year));const a=t.removeInvalids(t.arrayLower(e.customVDP.make));a.length&&n&&n.make&&(o=o&&i&&a.includes((n.make||"").toLowerCase().trim()));const r=t.removeInvalids(t.arrayLower(e.customVDP.model));return r.length&&n&&n.model&&(o=o&&i&&r.includes((n.model||"").toLowerCase().trim())),t.isEmptyArray(e.customVDP.regex)||e.customVDP.regex.forEach((e=>{if(!t.isEmptyString(e)){const t=new RegExp(e,"i");o=o&&t.test(window.location.href.split("#")[0])}})),o}function n(e){let n=!1;return e.length&&e.forEach((e=>{if(!t.isEmptyString(e)){const t=new RegExp(e,"i");n=n||t.test(window.location.href.split("#")[0])}})),n}function i(e){return t.LocalStorage.get(`smart_profiler_answers_${e}`)||[]}function o(){document.getElementById("smart-profiler-lead-form").classList.remove("sp-hidden");const t=window.innerWidth,e=document.getElementById("smart-profiler-container");t<=900?e.className.includes("smart-profiler-container-lead-page")||e.classList.add("smart-profiler-container-lead-page"):e.className.includes("smart-profiler-container-lead-page")&&e.classList.remove("smart-profiler-container-lead-page")}function s(t){const e=t.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth;return!(0==e.width||0==e.height)&&e.top>=0&&e.left>=0&&e.bottom<=n&&e.right<=i}function a(){return[...document.querySelectorAll("input, select, textarea")].filter((t=>s(t)))}t.showForCustomPage=e,t.showForOtherPageAsRegex=n,t.isEnabledForThisPage=function(i){const o=t.Context.PageType,s=`${window.location.origin}${window.location.pathname}`.split("#")[0],a=t.Context.PageData.car_data||{},r=(a.stock_type||"").toLowerCase().trim(),c="vdp"===o;return!!(i.pages.all||"/"===window.location.pathname&&i.pages.home||c&&i.pages[r]||c&&i.pages.certified&&a.certified||i.pages.customVDP&&e(i,a,c)||i.pages.otherPage&&i.otherPage.includes(s)||i.pages.otherPage&&n(i.otherPage))},t.getTimeLimit=function(e){let n=e.display.display_after;const i=e.custom_timing||[];if(i.length)for(const e of i)if(!t.isEmptyString(e.label)){if(new RegExp(`utm_campaign=${e.label}`,"i").test(window.location.href)){n=e.value;break}}return n},t.metFacebookCampaignCap=function(e,n,i,o){if(e.campaign_cap_fb.active&&/utm_medium=facebook/.test(window.location.href)&&/utm_source=smedia_/.test(window.location.href)){const s=Date.now();let a=t.LocalStorage.get(`${o}_campaign_cap_fb_start_date_${n}`)||s,r=t.LocalStorage.get(`${o}_campaign_cap_fb_show_count_${n}`)||0;const c=e.campaign_cap_fb.days*t.SECONDS_IN_A_DAY;if(s-a>c&&(t.LocalStorage.set(`${o}_campaign_cap_fb_start_date_${n}`,s,c),t.LocalStorage.set(`${o}_campaign_cap_fb_show_count_${n}`,0,c),a=s,r=0),a==s&&t.LocalStorage.set(`${o}_campaign_cap_fb_start_date_${n}`,s,c),r||t.LocalStorage.set(`${o}_campaign_cap_fb_show_count_${n}`,0,c),s-a<=c&&r>e.campaign_cap_fb.count)return console.log(`sMedia: Campaign FB cap count is ${e.campaign_cap_fb.count} in config '${e.name}' current fb show count is ${r} and hence '${i}' is ignored.`),!0}return!1},t.metGoogleCampaignCap=function(e,n,i,o){if(e.campaign_cap_google.active&&/utm_medium=google/.test(window.location.href)&&/utm_source=smedia_/.test(window.location.href)){const s=Date.now();let a=t.LocalStorage.get(`${o}_campaign_cap_google_start_date_${n}`)||s,r=t.LocalStorage.get(`${o}_campaign_cap_google_show_count_${n}`)||0;const c=e.campaign_cap_fb.days*t.SECONDS_IN_A_DAY;if(s-a>c&&(t.LocalStorage.set(`${o}_campaign_cap_google_start_date_${n}`,s,c),t.LocalStorage.set(`${o}_campaign_cap_google_show_count_${n}`,0,c),a=s,r=0),a==s&&t.LocalStorage.set(`${o}_campaign_cap_google_start_date_${n}`,s,c),r||t.LocalStorage.set(`${o}_campaign_cap_google_show_count_${n}`,0,c),s-a<=c&&r>e.campaign_cap_google.count)return console.log(`sMedia: Campaign GOOGLE cap count is ${e.campaign_cap_google.count} in config '${e.name}' current fb show count is ${r} and hence '${i}' is ignored.`),!0}return!1},t.dailyShownCapMet=function(e,n,i){const o=t.LocalStorage.get(`${i}_show_count_${n}`)||0;return t.Context.LogService.Debug(`sMedia: Daily shown count ==> ${o}`),e.shown_cap.active&&o>=e.shown_cap.value},t.sessionShownCapMet=function(e,n,i){const o=t.LocalStorage.get(`${i}_show_count_${n}`)||0;return t.Context.LogService.Debug(`sMedia: Session shown count ==> ${o}`),e.session_close.active&&o>=e.session_close.value},t.setAndIncrementSessionDepth=function(e,n){const i=(t.LocalStorage.get(`${n}_page_visited_${e}`)||0)+1;return t.LocalStorage.set(`${n}_page_visited_${e}`,i,t.SECONDS_IN_A_DAY),i},t.storeSmartOfferSubmit=function(e,n,i){const o=t.LocalStorage.get(`${i}_submitted_at_${n}`)||[];o.push(t.Time.Now()),t.LocalStorage.set(`${i}_submitted_at_${n}`,o,30*t.SECONDS_IN_A_DAY)},t.metFillUpCap=function(e,n,i){const o=(t.LocalStorage.get(`${i}_shown_at_${n}`)||[]).length>0,s=t.LocalStorage.get(`${i}_submitted_at_${n}`)||[],a=s.length?t.Time.Now()-Math.max.apply(null,s):null;return e.fillup_cap.active&&o&&s.length&&a>0&&a<=e.fillup_cap.value*t.SECONDS_IN_A_DAY},t.showBasedOnDeviceType=function(e){return e.device_type[t.Context.Browser.getDeviceType()]},t.sessionDepthCheck=function(t,e){return t.session_depth.active&&e<t.session_depth.value},t.priceRangeMet=function(e){const n=t.Context.PageData.car_data||{},i=t.stringToInt(n.price);return!e.check_price.active||!i||i>e.check_price.min&&i<e.check_price.max},t.storeOfferShown=function(e,n){const i=t.LocalStorage.get(`${this.storagePrefix}_shown_at_${e}`)||[];i.push(t.Time.Now()),t.LocalStorage.set(`${n}_shown_at_${e}`,i.slice(-4),30*t.SECONDS_IN_A_DAY)},t.increaseShowCount=function(e,n,i){const o=t.LocalStorage.get(`${i}_show_count_${e}`)||0;t.LocalStorage.set(`${i}_show_count_${e}`,o+1,t.SECONDS_IN_A_DAY);const s=t.LocalStorage.get(`${i}_show_count_${n}`)||0;t.LocalStorage.set(`${i}_show_count_${n}`,s+1,t.SECONDS_IN_A_DAY)},t.fetchProfilerAnswers=i,t.storeSmartProfilerAnswers=function(e,n){const o=i(e);o.push(n),t.LocalStorage.set(`smart_profiler_answers_${e}`,o,7*t.SECONDS_IN_A_DAY)},t.clearProfilerAnswers=function(e){t.LocalStorage.clear(`smart_profiler_answers_${e}`)},t.showProfilerNextView=function(t,e,n){if(document.getElementById(`sp-qa-ui-${t}`).classList.add("sp-hidden"),"-1"==e&&(e=n),"0"==e)if("0"!=n){const t=document.getElementById(`sp-qa-ui-${n}`);t.classList.remove("sp-hidden"),t.dataset.shownAt=Date.now().toString()}else o();else{const t=document.getElementById(`sp-qa-ui-${e}`);t.classList.remove("sp-hidden"),t.dataset.shownAt=Date.now().toString()}},t.showProfilerLeadForm=o,t.isNonZeroElementInViewPort=s,t.getInputsInViewPort=a,t.multipleInputsInViewPort=function(){const e=t.Context.DomainConfig.smart_offer_control;if(e&&e.form_open&&e.form_open[t.Context.PageType]){return a().length>2}return!1},t.sendSoShownGA=function(){"function"==typeof ga&&ga("smedia_analytics_tracker.send",{hitType:"event",eventCategory:"smart_offer",eventAction:"shown",nonInteraction:!0});const e=t.Context.DomainConfig.single_tag_config.analytics?t.Context.DomainConfig.single_tag_config.analytics.length:0;if(e>1){const t="smedia_analytics_tracker";for(let n=1;n<e;n++){const e=`${t}_${n}`;"function"==typeof ga&&ga(`${e}.send`,{hitType:"event",eventCategory:"smart_offer",eventAction:"shown",nonInteraction:!0})}}const n=new CustomEvent("smart_offer.shown",{detail:{pageType:t.Context.PageType,carData:t.Context.PageData.car_data}});document.dispatchEvent(n)},t.sendSoSubmitGA=function(){"function"==typeof ga&&ga("smedia_analytics_tracker.send",{hitType:"event",eventCategory:"smart_offer",eventAction:"lead",nonInteraction:!0});const e=t.Context.DomainConfig.single_tag_config.analytics?t.Context.DomainConfig.single_tag_config.analytics.length:0;if(e>1){const t="smedia_analytics_tracker";for(let n=1;n<e;n++){const e=`${t}_${n}`;"function"==typeof ga&&ga(`${e}.send`,{hitType:"event",eventCategory:"smart_offer",eventAction:"lead",nonInteraction:!0})}}const n=new CustomEvent("smart_offer.submit",{detail:{formName:"smart_offer_submit",pageType:t.Context.PageType,carData:t.Context.PageData.car_data}});document.dispatchEvent(n)}}(sMedia||(sMedia={})),function(t){let e;!function(t){t[t.Info=0]="Info",t[t.Warning=1]="Warning",t[t.Error=2]="Error",t[t.Debug=3]="Debug"}(e=t.LogType||(t.LogType={}));t.LogService=class{constructor(t,e){this.scope=t,this.debug=e}Debug(t){this.Log(e.Debug,t)}Log(t,n){if(t==e.Debug&&!this.debug)return;let i="#00f",o="Info",s=console.log;switch(t){case e.Debug:i="#880",o="Debug",s=console.info;break;case e.Error:i="#f00",o="Error",s=console.error;break;case e.Warning:i="#f30",o="Warning",s=console.warn;break;case e.Info:i="#00f",o="Info",s=console.info}console.group(`%c ${this.scope} ${o}`,`background: #fff; color: ${i}`),s(n),console.groupEnd()}}}(sMedia||(sMedia={})),function(t){t.LocalStorage=class{static Supported(){return"undefined"!=typeof Storage}static set(t,e,n=0){const i={value:e,canExpire:n>=0,expireAt:(new Date).getTime()/1e3+n};localStorage.setItem(t,JSON.stringify(i))}static get(t){const e=localStorage.getItem(t);if(!e)return null;const n=JSON.parse(e);return n.canExpire&&(new Date).getTime()/1e3>n.expireAt?(localStorage.removeItem(t),null):n.value}static clearAll(){localStorage.clear(),console.log("sMedia: Localstorage has been cleared")}static clear(t){localStorage.removeItem(t),console.log(`sMedia: ${t} has been removed from localstorage`)}}}(sMedia||(sMedia={})),function(t){t.Ajax=class{constructor(){this.Busy=!1}Get(e,n,i){if(!this.Busy){this.Busy=!0;try{this.Request=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0"),this.Request.open("GET",e,!0),this.Request.onreadystatechange=()=>{if(this.Request.readyState>3){if(200===this.Request.status&&n)try{n(JSON.parse(this.Request.response))}catch(e){t.Context.LogService.Debug(e)}else if(i)try{i(JSON.parse(this.Request.response))}catch(e){t.Context.LogService.Debug(e)}this.Busy=!1}};try{this.Request.send()}catch(e){if(t.Context.LogService.Debug(e),i)try{i(e)}catch(e){t.Context.LogService.Debug(e)}}}catch(e){if(i)try{i(e)}catch(e){t.Context.LogService.Debug(e)}this.Busy=!1,t.Context.LogService.Debug(e)}}}Post(e,n,i,o,s,a){if(!this.Busy){s=s||"application/json",this.Busy=!0;try{if(this.Request=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0"),this.Request.open("POST",e,!0),"multipart/form-data"!==s&&this.Request.setRequestHeader("Content-type",s),a&&!t.isEmptyObject(a))for(const[t,e]of Object.entries(a))this.Request.setRequestHeader(t,e);this.Request.onreadystatechange=()=>{if(this.Request.readyState==XMLHttpRequest.DONE||this.Request.readyState>3){if(200===this.Request.status&&i)try{i(JSON.parse(this.Request.response))}catch(e){t.Context.LogService.Debug(e)}else if(o)try{o(JSON.parse(this.Request.response))}catch(e){t.Context.LogService.Debug(e)}this.Busy=!1}};try{let t=null;switch(s){case"application/json":t=JSON.stringify(n);break;case"application/x-www-form-urlencoded":t=Object.keys(n).map((t=>`${t}=${n[t]}`)).join("&");break;case"multipart/form-data":t=n}this.Request.send(t)}catch(e){if(o)try{o(e)}catch(e){t.Context.LogService.Debug(e)}t.Context.LogService.Debug(e)}}catch(e){if(this.Busy=!1,o)try{o(e)}catch(e){t.Context.LogService.Debug(e)}t.Context.LogService.Debug(e)}}}IsBusy(){return this.Busy}}}(sMedia||(sMedia={})),function(t){t.HttpCom=class{constructor(t,e){this.Endpoint=t,this.ajax=e}Submit(t,e){this.ajax.Post(this.Endpoint,t,e)}IsBusy(){return this.ajax.IsBusy()}}}(sMedia||(sMedia={})),function(t){t.DomInstaller=class{static InstallScript(t,e="head",n,i=!0){"body"!==e&&(e="head");const o=document.createElement("script");let s;o.setAttribute("type","text/javascript"),o.setAttribute("src",t),!0===i&&o.setAttribute("async",""),n&&o.addEventListener("load",n),s="string"==typeof e?document.querySelector(e):e,s.appendChild(o),console.log(`sMedia: Included Script '${t}'`)}static InstallStyle(t,e="head",n){const i=document.createElement("link");let o;i.rel="stylesheet",i.href=t,n&&i.addEventListener("load",n),o="string"==typeof e?document.querySelector(e):e,o.appendChild(i),console.log(`sMedia: Included Style '${t}'`)}static InstallIframe(t){const e=document.createElement("iframe");e.setAttribute("width","1"),e.setAttribute("height","1"),e.setAttribute("frameborder","0"),e.setAttribute("src",t),document.getElementsByTagName("body")[0].appendChild(e),console.log(`sMedia: Included Iframe '${t}'`)}}}(sMedia||(sMedia={})),function(t){t.Dictionary=class{constructor(){this.items={},this.count=0}ContainsKey(t){return this.items.hasOwnProperty(t)}Count(){return this.count}Add(t,e){this.items.hasOwnProperty(t)||this.count++,this.items[t]=e}Remove(t){const e=this.items[t];return delete this.items[t],this.count--,e}Item(t){return this.items[t]}Keys(){const t=[];for(const e in this.items)this.items.hasOwnProperty(e)&&t.push(e);return t}Values(){const t=[];for(const e in this.items)this.items.hasOwnProperty(e)&&t.push(this.items[e]);return t}}}(sMedia||(sMedia={})),function(t){t.Time=class{static Now(){return Math.round((new Date).getTime()/1e3)}static MillisecondsNow(){return(new Date).getTime()}};t.Timer=class{constructor(t,e=1e3){this.Callback=t,this.Interval=e}Start(t=0){this.Run=!0,this._Tick=0,this.TickFor=t,this.Timeout()}Stop(){this.Run=!1}Tick(){return this._Tick}Timeout(){setTimeout((()=>{this.Run&&(this._Tick++,this.Callback&&this.Callback(this._Tick),this.TickFor>0&&this._Tick===this.TickFor?this.Stop():this.Timeout())}),this.Interval)}}}(sMedia||(sMedia={})),function(t){t.SHA256=class{constructor(){this.chrsz=8,this.hexcase=0}Hash(t){return t=this.Utf8Encode(t),this.binb2hex(this.core_sha256(this.str2binb(t),t.length*this.chrsz))}safe_add(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}S(t,e){return t>>>e|t<<32-e}R(t,e){return t>>>e}Ch(t,e,n){return t&e^~t&n}Maj(t,e,n){return t&e^t&n^e&n}Sigma0256(t){return this.S(t,2)^this.S(t,13)^this.S(t,22)}Sigma1256(t){return this.S(t,6)^this.S(t,11)^this.S(t,25)}Gamma0256(t){return this.S(t,7)^this.S(t,18)^this.R(t,3)}Gamma1256(t){return this.S(t,17)^this.S(t,19)^this.R(t,10)}core_sha256(t,e){const n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],o=[64];let s,a,r,c,l,d,m,p,h,g;t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(let e=0;e<t.length;e+=16){s=i[0],a=i[1],r=i[2],c=i[3],l=i[4],d=i[5],m=i[6],p=i[7];for(let i=0;i<64;i++)i<16?o[i]=t[i+e]:(o[i]=this.safe_add(this.safe_add(this.safe_add(this.Gamma1256(o[i-2]),o[i-7]),this.Gamma0256(o[i-15])),o[i-16]),h=this.safe_add(this.safe_add(this.safe_add(this.safe_add(p,this.Sigma1256(l)),this.Ch(l,d,m)),n[i]),o[i]),g=this.safe_add(this.Sigma0256(s),this.Maj(s,a,r)),p=m,m=d,d=l,l=this.safe_add(c,h),c=r,r=a,a=s,s=this.safe_add(h,g));i[0]=this.safe_add(s,i[0]),i[1]=this.safe_add(a,i[1]),i[2]=this.safe_add(r,i[2]),i[3]=this.safe_add(c,i[3]),i[4]=this.safe_add(l,i[4]),i[5]=this.safe_add(d,i[5]),i[6]=this.safe_add(m,i[6]),i[7]=this.safe_add(p,i[7])}return i}str2binb(t){const e=[],n=(1<<this.chrsz)-1;for(let i=0;i<t.length*this.chrsz;i+=this.chrsz)e[i>>5]|=(t.charCodeAt(i/this.chrsz)&n)<<24-i%32;return e}Utf8Encode(t){t=t.replace(/\r\n/g,"\n");let e="";for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e}binb2hex(t){const e=this.hexcase?"0123456789ABCDEF":"0123456789abcdef";let n="";for(let i=0;i<4*t.length;i++)n+=e.charAt(t[i>>2]>>8*(3-i%4)+4&15)+e.charAt(t[i>>2]>>8*(3-i%4)&15);return n}}}(sMedia||(sMedia={})),function(t){class e{constructor(t){this._url=t}getQueryByName(t,e){e||(e=window.location.href.split("#")[0]),t=t.replace(/[\[\]]/g,"\\$&");const n=new RegExp(`[?&]${t}(=([^&#]*)|&|#|$)`).exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}query(t,e=""){const n=this.getQueryByName(t,this.get());return null!==n?n:e}get(){return this._url}static current(){return new e(document.location.href.split("#")[0])}}t.URLParser=e}(sMedia||(sMedia={})),function(t){t.Cookie=class{static get(t){const e=new RegExp(`(?:^|; )${encodeURIComponent(t)}=([^;]*)`).exec(document.cookie);return e?e[1]:null}static set(e,n,i){let o="";if(i>0){const e=new Date;e.setTime(e.getTime()+i*t.SECONDS_IN_A_DAY*1e3),o=`; expires=${e.toUTCString()}`}document.cookie=`${e}=${n}${o}; path=/`}static remove(t){this.set(t,"",-1)}}}(sMedia||(sMedia={})),function(t){class e{static init(e,n,i=5e3){this.Callbacks=new t.Dictionary,this.StorageCallbacks=new t.Dictionary,window.addEventListener("message",(t=>{this.receiveMessage(t)}),!1),this.cookieContainer=document.createElement("iframe"),this.cookieContainer.src=`${e}/xcookie.html`,this.cookieContainer.style.display="none",document.body.appendChild(this.cookieContainer);const o=new t.Timer((t=>{this.ready&&(o.Stop(),n())}),100);o.Start(Math.ceil(i/100))}static isReady(){return this.ready}static get(t,e){if(!this.ready)return;this.counter++;const n=String(this.counter),i={name:t,requestId:n};this.Callbacks.Add(n,e),this.callContainerFunction("get_cookie",i)}static set(t,e,n){if(!this.ready)return;const i={name:t,value:e,days:n};this.callContainerFunction("set_cookie",i)}static remove(t){if(!this.ready)return;const e={name:t};this.callContainerFunction("remove_cookie",e)}static storageSupported(){return"undefined"!=typeof Storage}static setStorageData(t,e,n){if(n<=0&&(n=0),!this.ready)return;const i={key:t,value:JSON.stringify(e),ttl:n};this.callContainerFunction("set_data",i)}static getStorageData(t,e){this.storageCounter++;const n=String(this.storageCounter),i={key:t,requestId:n};this.StorageCallbacks.Add(n,e),this.callContainerFunction("get_data",i)}static receiveMessage(t){if(t.data&&"xdomaincookie"==t.data.sender)switch(t.data.action){case"cookie_ready":this.ready=!0;break;case"cookie_callback":{const e=t.data.requestId;if(this.Callbacks.ContainsKey(e)){this.Callbacks.Remove(e)(t.data.value)}break}case"storage_get_callback":{const e=t.data.requestId;if(this.StorageCallbacks.ContainsKey(e)){this.StorageCallbacks.Remove(e)(JSON.parse(t.data.value))}break}}}static callContainerFunction(t,e){e.sender="xdomaincookie",e.action=t,this.sendMessage(e)}static sendMessage(t){this.cookieContainer.contentWindow.postMessage(t,"*")}}e.ready=!1,e.counter=0,e.storageCounter=0,t.XDomainCookie=e}(sMedia||(sMedia={})),function(t){t.Browser=class{constructor(e){this.HashFunction=e,this.screenSize=[window.screen.width,window.screen.height].join("x"),this.userAgent=navigator.userAgent,this.urlReferrer=document.referrer,this.url=document.location.href.split("#")[0],this.domain=document.location.hostname,this.timestamp=t.Time.MillisecondsNow(),this.now=t.Time.MillisecondsNow()}prepareBrowserIds(e){let n=t.Cookie.get("smedia_uuid");if(!n||"string"!=typeof n){const t=[this.userAgent,this.screenSize,this.urlReferrer,this.url,this.timestamp];n=this.HashFunction.Hash(t.join("|"))}t.Cookie.set("smedia_uuid",n,365),this.uniqueUserId=n,this.sessionId=this.getSessionId(),this.pageViewId=this.getPageViewId(),this.browserReady=!0,e()}isReady(){return this.browserReady}getSessionId(){let e=t.Cookie.get("smedia_session_id");if(!e){const n=[this.url,this.uniqueUserId,this.timestamp];e=this.HashFunction.Hash(n.join("|")),t.Cookie.set("smedia_session_id",e)}return e}getPageViewId(){return this.HashFunction.Hash([this.url,this.uniqueUserId,this.sessionId,this.timestamp].join("|"))}scriptDomain(){const t=document.getElementsByTagName("SCRIPT");if(t&&t.length>0)for(const e in t){const n=t[e];if(n.src&&n.src.match(/\/common\.js$/)){const[,t=""]=n.src.match(/(?:https?\:\/\/)((?:[a-zA-Z0-9-\.]+))/)||[];return t}}return""}getDeviceType(){const t=navigator.userAgent,e=new RegExp("(tablet|ipad|playbook|silk)|(android(?!.*mobi))","i"),n=new RegExp("Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)");return e.test(t)?"tablet":n.test(t)?"mobile":"desktop"}onUrlChange(e){new t.Timer((n=>{this.url!==document.location.href.split("#")[0]&&(this.url=document.location.href.split("#")[0],this.timestamp=t.Time.MillisecondsNow(),this.now=t.Time.MillisecondsNow(),e())}),200).Start(0)}}}(sMedia||(sMedia={})),function(t){t.UniquePathGenerator=class{childIndex(t){if(t&&t.parentNode&&t.parentNode.children){const e=t.parentNode.children;for(let n=0;n<e.length;n++)if(e.item(n)==t)return n}return null}GetPath(t,e=!1){const n=[];let i,o,s,a;for(i=t;i;i=i.parentNode)if(o=this.childIndex(i)+1,a=i.tagName,a){if(s=a.toLowerCase(),"html"===s)break;if(i.id&&"function"==typeof i.id.includes&&!e&&!i.id.includes("/")){s+=`#${i.id}:nth-child(${o})`,n.push(s);break}if(i.className&&i.className.replace){const t=i.className.replace(/^\s+|\s+$/gm,"").replace(/\s\s+/g," ").replace(/\s/g,".");t&&(s+=`.${t}`)}s+=`:nth-child(${o})`,n.push(s)}return n.reverse(),n.join(" ")}}}(sMedia||(sMedia={})),function(t){class e{constructor(e,n,i,o,s,a){this.Category=e,this.Action=n,this.Value=i,this.Data=o,this.Callback=s,this.Timestamp=t.Time.MillisecondsNow(),this.Id=a||this.generateId()}generateId(){const e=[t.Context.Browser.uniqueUserId,t.Context.Browser.url,this.Category,this.Action,this.Value,this.Data,this.Timestamp];return t.Context.HashFunction.Hash(e.join("|"))}}t.EventRequest=e;class n{constructor(t,e,n,i){this.RequestId=t,this.Success=e,this.Data=n,this.Message=i}}t.EventResponse=n;t.EventTracker=class{constructor(e,n=10,i=1e3){this.EventQueue=new Array,this.WaitQueue=new t.Dictionary,this.RecordCallbacks=new Array,this.Com=e,this.BufferSize=n,this.BufferTimeout=i}OnRecord(t){this.RecordCallbacks.push(t)}RemoveRecordCallback(t){const e=this.RecordCallbacks.indexOf(t);e>=0&&delete this.RecordCallbacks[e]}Record(n,i,o,s,a,r,c){let l=null;if(c&&!this.Processing&&this.EventQueue.every(((t,e,n)=>t.Id!=c||(n[e].Value=o,n[e].Data=s,l=n[e],!1))),!l){const d={pageType:t.Context.PageType,ip:t.Context.DomainConfig.ip},m={...s,...d}||d;l=new e(n,i,o,m,a,c),this.EventQueue.push(l),r&&r(l.Id)}this.RecordCallbacks.forEach((t=>{t(l)})),this.EventQueue.length>=this.BufferSize&&this.Process()}Flush(){this.Process()}Process(){if(this.Processing||this.Com.IsBusy()||0==this.EventQueue.length)return;this.Processing=!0,t.Context.Browser.now=t.Time.MillisecondsNow();const e={browser:t.Context.Browser,events:[]};for(;this.EventQueue.length>0;){const t=this.EventQueue.shift();this.WaitQueue.Add(t.Id,t),e.events.push(t)}const i=t.Context.DomainConfig.dealer_info.tag_controls;(!!t.isEmptyObject(i)||i.event_tracker)&&this.Com.Submit(e,(t=>{if(this.Processing=!1,t.success)for(let e=0;e<t.result.length;e++){const i=this.WaitQueue.Remove(t.result[e].Id);i&&i.Callback&&i.Callback(new n(i.Id,t.result[e].success,t.result[e],t.message))}}))}Start(){this.Timer=new t.Timer((t=>{this.Process()}),this.BufferTimeout),this.Timer.Start()}Stop(){this.Timer.Stop()}}}(sMedia||(sMedia={})),function(t){t.Application=class{constructor(e,n,i,o,s){this.TagStatus=new t.TagStatus,this.AppStates={smart_profiler_enabled:!1},this.PreReadyCallbacks=new Array,this.ReadyCallbacks=new Array,this.CloseCallbacks=new Array,this.HashFunction=e,this.Browser=n,this.PathGenerator=i,this.EventTracker=o,this.Ready=!1,this.Closed=!1,this.LogService=s,this.BrowserName=this.browserDetect(),this.InitGlobalCallbacks()}InitGlobalCallbacks(){var t,e,n,i,o;const s={};void 0!==window.smediaCallbacks&&Object.keys(window.smediaCallbacks).forEach((t=>{const e=t.split(".");1==e.length?s[e[0]]=window.smediaCallbacks[t]:2==e.length&&(s[e[0]]=s[e[0]]||{},s[e[0]][e[1]]=window.smediaCallbacks[t])})),this.GlobalCallbacks={epm:(null==s?void 0:s.epm)||[],aiButton:{onTextChange:(null===(t=null==s?void 0:s.aiButton)||void 0===t?void 0:t.onTextChange)||[],onClick:(null===(e=null==s?void 0:s.aiButton)||void 0===e?void 0:e.onClick)||[]},aiForm:{onClose:(null===(n=null==s?void 0:s.aiForm)||void 0===n?void 0:n.onClose)||[],onLoad:(null===(i=null==s?void 0:s.aiForm)||void 0===i?void 0:i.onLoad)||[],onFillUp:(null===(o=null==s?void 0:s.aiForm)||void 0===o?void 0:o.onFillUp)||[]}}}IsReady(){return this.Ready}PreReady(t){this.PreReadyCallbacks.push(t),this.Ready&&t()}OnReady(t){this.ReadyCallbacks.push(t),this.Ready&&t()}OnClose(t){this.CloseCallbacks.push(t),this.Closed&&t()}ApplicationReady(t,e,n,i,o){this.Dealership=t,this.DomainConfig=e,this.PageType=n,this.PageData=i,this.DebugFlags=o,this.EventTracker.Start(),this.TagStatus.setDomainConfig(this.DomainConfig),this.TagStatus.setPageData(this.PageData);for(const t of this.PreReadyCallbacks)t();for(const t of this.ReadyCallbacks)t();this.Ready=!0}Close(){var t;null===(t=this.EventTracker)||void 0===t||t.Stop(),this.InitGlobalCallbacks();for(let t=0;t<this.CloseCallbacks.length;t++)this.CloseCallbacks[t]();this.Closed=!0}browserDetect(){const t=navigator.userAgent;return t.match(/chrome|chromium|crios/i)?"chrome":t.match(/firefox|fxios/i)?"firefox":t.match(/safari/i)?"safari":t.match(/opr\//i)?"opera":t.match(/edg/i)?"edge":"unknown browser"}}}(sMedia||(sMedia={})),function(t){t.RegExpProcessor=class{p2j(t){return"/"===t[0]&&(t=t.substr(1)),-1!==t.lastIndexOf("/")&&(t=t.substr(0,t.lastIndexOf("/"))),t}make(t,e){let n=null;return n=""!==e?new RegExp(t,e):new RegExp(t),n}pmake(t){return this.make(this.p2j(t),"i")}}}(sMedia||(sMedia={})),function(t){class e{constructor(t=null,e=document){if(this.length=0,t){if("string"==typeof t)try{t=t.trim();const n=e.querySelectorAll(t);n.forEach(((t,e)=>{this[e]=t})),this.length=n.length}catch(t){console.error("sMedia error: ",t)}else if(t instanceof HTMLCollection||t instanceof Array)for(const e in t)this[e]=t[e];else this[0]=t,this.length=1;void 0===window.domEvents&&(window.domEvents=new Map)}}find(t,n=document){return new e(t,n)}el(t,n=document){return new e(t,n)}create(t){const e=document.createElement("template");return e.innerHTML=t,this.el(e.content.children)}first(){return new e(this[0])}get(t){return this[t]||null}each(t){for(let e=0,n=this.length;e<n&&!1!==t.call(this,this[e],e++););return this}toArray(){const t=[];for(let e=0,n=this.length;e<n;e++)t[e]=this[e];return t}index(t){return this.toArray().indexOf(t)}cssObj(t){return this.each((e=>{Object.keys(t).forEach((n=>e.style.setProperty(n,t[n])))})),this}css(t,e){if("string"==typeof t)return void 0===e?window.getComputedStyle(this[0]).getPropertyValue(t):void this.each((n=>n.style.setProperty(t,e)));this.cssObj(t)}hide(){this.each((t=>{const e=window.getComputedStyle(t).getPropertyValue("display");t.setAttribute("smedia-dom-restore-display",e)}))}show(){this.each((t=>{const e=t.getAttribute("smedia-dom-restore-display");t.style.setProperty("display",e)}))}heightWidth(t,e){const n=this.first().css("box-sizing");if(void 0===e){const e=this.first();let i=0;return i="width"===t?parseFloat(e.css("padding-left"))+parseFloat(e.css("padding-right")):parseFloat(e.css("padding-top"))+parseFloat(e.css("padding-bottom")),"content-box"===n?parseFloat(e.css(t)):this.innerHeightWidth(t)-i}"border-box"===n&&(e+=this.outerHeightWidth(t)-this.heightWidth(t)),this.css(t,`${e}px`)}width(t){return this.heightWidth("width",t)}height(t){return this.heightWidth("height",t)}innerHeightWidth(t){const e=this.first();let n=0;return"content-box"===this.first().css("box-sizing")?(n="width"===t?parseFloat(e.css("padding-left"))+parseFloat(e.css("padding-right")):parseFloat(e.css("padding-top"))+parseFloat(e.css("padding-bottom")),this.heightWidth(t)+0):(n="width"===t?parseFloat(e.css("border-left-width"))+parseFloat(e.css("border-right-width")):parseFloat(e.css("border-top-width"))+parseFloat(e.css("border-bottom-width")),this.outerHeightWidth(t)-n)}innerWidth(){return this.innerHeightWidth("width")}innerHeight(){return this.innerHeightWidth("height")}outerHeightWidth(t,e=!1){const n=this.first();let i=0,o=0;const s=this.first().css("box-sizing");return e&&(i="width"===t?parseFloat(n.css("margin-left"))+parseFloat(n.css("margin-right")):parseFloat(n.css("margin-top"))+parseFloat(n.css("margin-bottom"))),"content-box"===s?(o="width"===t?parseFloat(n.css("border-left-width"))+parseFloat(n.css("border-right-width")):parseFloat(n.css("border-top-width"))+parseFloat(n.css("border-bottom-width")),this.innerHeightWidth(t)+o+i):parseFloat(n.css(t))+i}outerWidth(t=!1){return this.outerHeightWidth("width",t)}outerHeight(t=!1){return this.outerHeightWidth("height",t)}attrObj(t){Object.keys(t).forEach((e=>{this.each((n=>n.setAttribute(e,t[e])))}))}attr(t,e){if("string"!=typeof t)this.attrObj(t);else{if(void 0===e){return this[0].getAttribute(t)}this.each((n=>n.setAttribute(t,e)))}}removeAttr(t){this.each((e=>{e.removeAttribute(t)}))}val(t){const e=this.get(0);return void 0===e.value?null:void 0===t?e.value:(e.value=t,t)}html(t){const e=this.get(0);return e?void 0===t?e.innerHTML:(this.each((e=>{e.innerHTML=t})),t):null}text(t){const e=this.get(0);return e?void 0===t?e.innerText:(this.each((e=>{e.innerText=t})),t):null}remove(){this.each((t=>{t.parentNode.removeChild(t)}))}insertAdjacent(t,e){return this.each((n=>{if("string"==typeof e)return n.insertAdjacentHTML(t,e);n.insertAdjacentElement(t,e)})),this}parent(){return this.el(this.get(0).parentElement)}parentWalker(t){let e;return e=0==t.length?this.parent().get(0):t[t.length-1].parentElement,null==e||"HTML"==e.nodeName?t:(t.push(e),this.parentWalker(t))}parents(t=""){let n=this.parentWalker([]);if(""!=t){const e=Array.from(document.querySelectorAll(t));n=n.filter((t=>e.includes(t)))}return new e(n)}before(t){this.insertAdjacent("beforebegin",t)}after(t){this.insertAdjacent("afterend",t)}append(t){return this.each((e=>{if("string"==typeof t)return e.insertAdjacentHTML("beforeend",t);e.appendChild(t)})),this}prepend(t){return this.each((e=>{if("string"==typeof t)return e.insertAdjacentHTML("afterbegin",t);e.insertBefore(t,e.firstChild)})),this}hasClass(t){let e=!1;return this.each((n=>{e=i(n,t)})),e}addClass(t){return this.each((e=>{i(e,t)||(e.className+=` ${t}`)})),this}removeClass(t){return this.each((e=>{if(i(e,t)){const n=new RegExp(`(\\s|^)${t}(\\s|$)`),i=e.className.replace(n," ").trim();e.className=i.replace(/\s{2,}/g," ")}})),this}toggleClass(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t),this}unbind(t){return this.each((e=>{if(void 0!==window.domEvents){const n=window.domEvents.get(e);n&&(n.find(t).forEach((n=>{e.removeEventListener(t,n.handler,!0)})),n.remove(t))}})),this}on(t,e,i){const o="function"==typeof e&&void 0===i,s="string"==typeof e&&"function"==typeof i;return this.each((a=>{let r;const c=window.domEvents.get(a)||new n;if(o&&(r=this.directEvent(e)),s&&(r=this.delegateEvent(a,e,i)),!r)throw new Error("DOM.on: Invalid Arguments");a.addEventListener(t,r,!0),c.add({type:t,handler:r}),window.domEvents.set(a,c)})),this}click(t){this.on("click",t)}submit(t){this.on("submit",t)}trigger(t){const e=document.createEvent("Event");e.initEvent(t),this.each((t=>t.dispatchEvent(e)))}serializeArray(){const t=this.find("[name]",this.get(0)),e=[];return t.each((t=>{const n=this.el(t);e.push({name:n.attr("name"),value:n.val()})})),e}serializeObj(){return this.serializeArray().reduce(((t,e)=>(t[e.name]=e.value,t)),{})}serialize(){return this.serializeArray().map((t=>`${t.name}=${t.value}`)).join("&")}directEvent(t){return e=>{const n=e.currentTarget;t.apply(n,[e])}}delegateEvent(t,n,i){return o=>{const s=new e(n,t);let a=null,r=!1;s.each((e=>{let n=o.target;if(n===e)return r=!0,void(a=n);for(;n&&n!==t;)n=n.parentNode,n===e&&(r=!0,a=n)})),r&&i.apply(a,[o])}}}t.DOM=e;class n{constructor(){this.list=[]}find(t){const{list:e}=this;return e.filter((e=>e.type===t))}add(t){this.list.push(t)}remove(t){const{list:e}=this;this.list=e.filter((e=>e.type!==t))}}t.IEvents=n;const i=function(t,e){let n=!1;const i=` ${e} `;return` ${t.className} `.replace(/[\n\t]/g," ").indexOf(i)>-1&&(n=!0),n};t.dom=new e}(sMedia||(sMedia={})),function(t){t.Trackers=class{constructor(t=null,e=null,n=null){this.analytics_init_list=[],this.fbq_init_list=[],this.analytics_tracker_name="smedia_analytics_tracker",this.analytics_tracking_id=t,this.fb_pixel_id=e,this.user_unique_id=n,this.listenEventAndSendGa4()}ga_init(){if(!this.analytics_tracking_id)return!1;if(this.analytics_init_list.includes(this.analytics_tracking_id))return!0;var t,e,n,i,o,s;"function"!=typeof ga&&(t=window,e=document,n="script",i="ga",t.GoogleAnalyticsObject=i,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=Date.now(),o=e.createElement(n),s=e.getElementsByTagName(n)[0],o.async=1,o.src="//www.google-analytics.com/analytics.js",s.parentNode.insertBefore(o,s));const a=this.analytics_init_list.length;return a&&(this.analytics_tracker_name=`smedia_analytics_tracker_${a}`),ga("create",this.analytics_tracking_id,"auto",this.analytics_tracker_name),ga(`${this.analytics_tracker_name}.set`,"dimension2",this.user_unique_id),this.analytics_inited=!0,this.analytics_init_list.push(this.analytics_tracking_id),this.analytics_inited}fb_init(){return!!this.fb_pixel_id&&(!!this.fbq_init_list.includes(this.fb_pixel_id)||(t=window,e=document,n="script",t.fbq||(i=t.fbq=function(){i.callMethod?i.callMethod.apply(i,arguments):i.queue.push(arguments)},t._fbq||(t._fbq=i),i.push=i,i.loaded=!0,i.version="2.0",i.queue=[],(o=e.createElement(n)).async=!0,o.src="//connect.facebook.net/en_US/fbevents.js",(s=e.getElementsByTagName(n)[0]).parentNode.insertBefore(o,s)),window.fbq("init",this.fb_pixel_id),this.fbq_inited=!0,this.fbq_init_list.push(this.fb_pixel_id),this.fbq_inited));var t,e,n,i,o,s}sendGa4(t){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:t})}listenEventAndSendGa4(){t.GA4_EVENTS.forEach((t=>{console.log("adding ga4 event listener",t),document.addEventListener(t.listen,(()=>{this.sendGa4(t.ga4),console.log("pushing ga4 event",t)}))}))}sendGa(t=!0,e="event",n,i=0){let o;o=t?()=>this.ga_sm(e,n.category,n.action,n.label,n.nonInteraction):"function"==typeof ga?()=>ga("send","event",n.category,n.action,n.label,{nonInteraction:n.nonInteraction}):()=>console.log("No analytics installed"),setTimeout(o,i)}ga_sm(e,n="",i="",o="",s=!1,a=0){if(this.ga_init()){const r=1e3*a,c="smedia_analytics_tracker",l=t.Context.DomainConfig.single_tag_config.analytics?t.Context.DomainConfig.single_tag_config.analytics.length:0;setTimeout((()=>{if(ga(`${this.analytics_tracker_name}.send`,e,n,i,o,{nonInteraction:s}),l>1)for(let t=1;t<l;t++){ga(`${`${c}_${t}`}.send`,e,n,i,o,{nonInteraction:s})}}),r)}}fbq_sm(t,e="track",n,i=null,o=0){if(this.fb_init()){setTimeout((()=>{console.log(`sMedia: Tracking fbq('${e}', '${t}')`),i?window.fbq(e,n,t,i):window.fbq(e,n,t)}),1e3*o)}}}}(sMedia||(sMedia={})),function(t){t.TagStatus=class{constructor(){this.errors=[];const t=this;window.smedia_tag_status=()=>t.smediaTagStatus()}smediaTagStatus(){return t.Context?{errors:this.errors,dealership:this.dealership,service:this.service,trackers:this.trackers,pageType:this.pageType,carData:this.carData}:{err:"sMedia: Tag not found"}}setError(t){this.errors.push(t)}setDomainConfig(e){const n=e.dealer_info||{},i=e.cron_config||{},o=e.scrapper_config||{},s=t.Context.PageType,a=e.single_tag_config;this.dealership={status:n.status,name:n.company_name,cron_name:e.cron,domain:e.domain,scrapperType:n.scrapper_type},this.trackers={analytic:{id:a.analytics?this.getAccountIds(a.analytics):[]},pixel:{id:a.facebook?this.getAccountIds(a.facebook):[]},bing:{id:a.bing?this.getAccountIds(a.bing):[]},google:{id:n.google_account_id},fbPage:{id:n.fb_page_id},snapchatPixel:{id:a.snapchat?this.getAccountIds(a.snapchat):[]}},this.service={smartOffer:{live:(i.lead||{}).live,bgFileUrl:((this.service||{}).smartOffer||{}).bgFileUrl||null},aiButton:{live:"1"==n.buttons_live},aiForm:{live:"1"==n.form_live},tradesmart:{status:n.tradesmart,dealerId:n.tradesmart_dealer_id},smarBanner:{status:(i.smart_banner||{}).live||!1},jscrawler:{status:!("vdp"!=s||!o.vdp_url_regex||!o.client_scrapping)},vinnauto:{status:"vdp"==s&&i.vinnauto.button_status},directmail:{status:i.mail_retargeting&&i.mail_retargeting.enabled}}}setPageData(t){this.pageType=t.page_type;const e=t.car_data||{};this.carData={stockType:e.stock_type||"",stockNumber:e.stock_number||"",vin:e.vin||"",svin:e.svin||"",year:e.year||"",make:e.make||"",model:e.model||"",trim:e.trim||"",price:e.price||"",msrp:e.msrp||"",kilometers:e.kilometers||e.kilometres||"",bodyStyle:e.body_style||"",engine:e.engine||"",transmission:e.transmission||"",vdpUrl:e.url||window.location.href.split("#")[0]},this.service.smartOffer.bgFileUrl=t.smart_offer_image_url}getAccountIds(t){const e=[];return t.forEach((t=>{t.account_id.length>0&&e.push(t.account_id)})),e}}}(sMedia||(sMedia={})),function(t){const e=window.location.href,n=window.location.hash;let i=window.location.search;""==i&&""!=n&&n.includes("?")&&(i=n.substring(n.indexOf("?")));const o=new URLSearchParams(i),s={tagDebug:"true"===o.get("tag_debug"),smediaDebug:"true"===o.get("smedia_debug"),softDebug:"true"===o.get("smedia_debug_partial"),smartOffer:"true"===o.get("smart_offer_debug"),smartProfiler:"true"===o.get("smart_profiler_debug"),aiButtonDebug:"true"===o.get("button_debug"),aiFormDebug:"true"===o.get("form_debug"),poweredbyDebug:"true"===o.get("poweredby_debug"),smartBannerDdebug:"true"===o.get("smartbanner_debug"),mailRetargeting:"true"===o.get("directmail_debug")},a=new t.SHA256,r=new t.Browser(a),c=new t.HttpCom("https://events.smedia.ca/events",new t.Ajax),l=new t.EventTracker(c,10,500),d=new t.LogService("sMedia",s.smediaDebug||s.softDebug),m="domain_config",p=`page_data_${a.Hash(r.url)}`,h=t.Context||new t.Application(a,r,new t.UniquePathGenerator,l,d);t.apiHost="https://tm.smedia.ca",t.Context=h;const g=()=>{r.prepareBrowserIds((()=>{s.smediaDebug&&(t.LocalStorage.clearAll(),d.Debug("sMedia : Clearing local storage.")),s.softDebug&&(t.LocalStorage.clear(m),d.Debug("sMedia : Clearing domain config."),t.LocalStorage.clear(p),d.Debug("sMedia : Clearing page data."));let n=t.LocalStorage.get(m);n&&1==(n.cron_config||{}).tag_debug&&(t.LocalStorage.clear(m),n=null);let i=t.LocalStorage.get(p);const o=t.OrAllMembers(s)?"&smedia_debug=true":"",a=new URL(e).host;if(!n){n={};const e=window.apiServer||"api",i=""==o?`${t.apiHost}/tag_api/dealer_data-${a}.json`:`${t.apiHost}/APIs/v1/dealerDataPartial.php?url=${encodeURIComponent(t.smediaUrlEncrypt(a))}${o}&server=${e}`;d.Debug(`sMedia : Requesting domain configuration from '${i}'`),(new t.Ajax).Get(i,(e=>{if(1==e.success){const i=e.data,o=(i.cron_config||{}).tag_debug;if(o&&1!=s.smediaDebug)t.LocalStorage.clear(m),s.tagDebug=!0;else if(n=i,o||t.LocalStorage.set(m,n,t.SECONDS_IN_A_DAY),n.multi_dealer){const e=`${window.location.origin}${window.location.pathname}`,i=n.scrapper_config.url_resolve;for(const o in i){const s=i[o];if(new RegExp(s.substring(s.indexOf("/")+1,s.lastIndexOf("/"))).test(e)){n.cron=o,n.single_tag_config=n.multi_tag_config[o],t.LocalStorage.set(m,n,t.SECONDS_IN_A_DAY);break}}t.LocalStorage.clear(p)}}else t.Context.TagStatus.setError(e.message||"Unknown error")}))}if(!i){i={};const e=""==o?`${t.apiHost}/tag_api/${a}/page_data-${btoa(window.location.href).replace("/","--SLASH--").replace("+","--PLUS--")}.json`:`${t.apiHost}/APIs/v1/pageDataFull.php?url=${encodeURIComponent(t.smediaUrlEncrypt(window.location.href))}${o}`;d.Debug(`sMedia : Requesting page data from '${e}'`),(new t.Ajax).Get(e,(e=>{1==e.success?(i=e.data,t.LocalStorage.set(p,i,t.SECONDS_IN_A_DAY)):t.Context.TagStatus.setError(e.message||"Unknown error")}))}let r=null;const c=setInterval((()=>{!0===s.tagDebug?(clearInterval(c),console.log("sMedia: tag is in debug mode.")):n&&!t.isEmptyObject(n)&&i&&!t.isEmptyObject(i)&&(clearInterval(c),i.page_type&&(r=i.page_type),"vdp"!=r||i.car_data||(i.car_data=t.generateCarData(n.scrapper_config.data_capture_regx_full,document.documentElement.innerHTML),t.LocalStorage.set(p,i,t.SECONDS_IN_A_DAY)),t.Context.ApplicationReady(n.cron,n,r,i,s))}),100)}))};g(),r.onUrlChange((()=>{t.Context.Close(),setTimeout((()=>g()),2e3)})),window.onbeforeunload=()=>{t.Context.Close()}}(sMedia||(sMedia={})),function(t){t.additionalScripts=new class{Register(){const e=t.Context.DomainConfig.cron,n=t.Context.DomainConfig.single_tag_config,i=t.Context.PageType;if(!n.additional||!n.additional[0].config[i])return void console.log(`sMedia: No additional script found for '${e}' for page type ${i}.`);const o=n.additional[0].config[i].additional_scripts;console.log(`sMedia: Adding ${o.length} additional script(s) for '${e}' for page type ${i}.`),o.forEach((e=>{t.isEmptyString(e)||t.DomInstaller.InstallScript(e)}))}Unregister(){}},t.Context.OnReady((()=>{t.additionalScripts.Register()})),t.Context.OnClose((()=>{t.additionalScripts.Unregister()}))}(sMedia||(sMedia={})),function(t){t.buttonClickTracker=new class{Register(){document.addEventListener("click",this.OnClick,!0)}Unregister(){}OnClick(e){const n=(e.path||[]).length?t.Context.PathGenerator.GetPath(e.path[0]):null,i=e.target.getBoundingClientRect(),o=e.target.tagName,s=e.target.type;let a="";const r=e.pageX,c=e.pageY;if(!["BUTTON","INPUT","A"].some((t=>t==o)))return;const l=["button","submit"].indexOf(s);"INPUT"===o&&-1===l||(a="A"===o?e.target.innerHTML:e.target.value,t.Context.EventTracker.Record("MouseEvent","ButtonClick",1,{X:r,Y:c,Element:n,Area:i,Tag:o,Text:a}))}},t.Context.OnReady((()=>{t.buttonClickTracker.Register()})),t.Context.OnReady((()=>{t.buttonClickTracker.Unregister()}))}(sMedia||(sMedia={})),function(t){!function(e){e.clickTracker=new class{Register(){document.addEventListener("click",this.OnClick)}Unregister(){document.removeEventListener("click",this.OnClick)}OnClick(e){const n=(e.path||[]).length?t.Context.PathGenerator.GetPath(e.path[0]):null,i=e.target.getBoundingClientRect(),o=e.target.tagName,s=e.pageX,a=e.pageY;t.Context.EventTracker.Record("MouseEvent","Click",1,{X:s,Y:a,Element:n,Area:i,Tag:o})}},t.Context.OnReady((()=>{e.clickTracker.Register()})),t.Context.OnClose((()=>{e.clickTracker.Unregister()}))}(t.Tracker||(t.Tracker={}))}(sMedia||(sMedia={})),function(t){!function(e){e.hoverTracker=new class{Register(){document.onmouseover=this.MouseEnter,document.onmouseout=this.MouseLeave}Unregister(){}MouseEnter(e){const n=(e.path||[])[0]||null;n!=this.LastElement&&(this.LastElement=n,this.TimeStamp=t.Time.MillisecondsNow())}MouseLeave(e){const n=(e.path||[])[0]||null,i=t.Context.PathGenerator.GetPath(n),o=t.Time.MillisecondsNow()-this.TimeStamp,s=e.target.getBoundingClientRect(),a=e.target.tagName;o>500&&"HTML"!=a&&t.Context.EventTracker.Record("MouseEvent","Hover",o,{Element:i,Duration:o,Area:s,Tag:a})}},t.Context.OnReady((()=>{e.hoverTracker.Register()})),t.Context.OnReady((()=>{e.hoverTracker.Unregister()}))}(t.Tracker||(t.Tracker={}))}(sMedia||(sMedia={})),function(t){!function(e){e.pageTimeTracker=new class{Register(){this.EventId=null,this.Timer=new t.Timer((e=>{const n=t.Time.MillisecondsNow()-t.Context.Browser.timestamp;t.Context.EventTracker.Record("Page","TimeOnPage",n,{TimeOnPage:n},null,(t=>{this.EventId=t}),this.EventId)}),5e3),this.Timer.Start()}Unregister(){this.Timer.Stop()}},t.Context.OnReady((()=>{e.pageTimeTracker.Register()})),t.Context.OnClose((()=>{e.pageTimeTracker.Unregister()}))}(t.Tracker||(t.Tracker={}))}(sMedia||(sMedia={})),function(t){!function(e){e.pictureViewTracker=new class{Register(){this.firstImageClicked=!1,this.currentImage=1,this.maxImages=0;const e=(t.Context.DomainConfig||{}).scrapper_config;"vdp"==t.Context.PageType&&(e.picture_selectors||[]).length&&(this.smediaPictureTracking(e.picture_selectors),(e.picture_nexts||[]).length&&this.smediaNextPictureTracking(e.picture_nexts),(e.picture_prevs||[]).length&&this.smediaPrevPictureTracking(e.picture_prevs))}smediaPictureTracking(t){Array.isArray(t)||(t=[t]),console.log("sMedia : Picture tracking"),t.forEach((t=>{this.bindForImageTrackingCheck(t,0)}))}smediaNextPictureTracking(t){Array.isArray(t)||(t=[t]),console.log("sMedia : Next Picture tracking"),t.forEach((t=>{this.bindForNextImageTrackingCheck(t,0)}))}smediaPrevPictureTracking(t){Array.isArray(t)||(t=[t]),console.log("sMedia : Prev Picture tracking"),t.forEach((t=>{this.bindForPrevImageTrackingCheck(t,0)}))}bindForImageTrackingCheck(e,n){if(t.dom.find(e).length)this.bindForImageTracking(e);else{if(10==n++)return;const t=this;setTimeout((()=>t.bindForImageTrackingCheck(e,n)),3e3)}}bindForNextImageTrackingCheck(e,n){if(t.dom.find(e).length)this.bindForNextImageTracking(e);else{const t=this;if(10==n++)return;setTimeout((()=>t.bindForNextImageTrackingCheck(e,n)),3e3)}}bindForPrevImageTrackingCheck(e,n){if(t.dom.find(e).length)this.bindForPrevImageTracking(e);else{const t=this;if(10==n++)return;setTimeout((()=>t.bindForPrevImageTrackingCheck(e,n)),3e3)}}bindForImageTracking(e){const n=t.dom.find(e);n.length&&(this.maxImages=n.get(0).parentElement.children.length);const i=this;n.click((function(){console.log("sMedia : Call bindForImageTracking Function");const o=n.index(this);i.currentImage=o+1;const s=t.getIndexed(i.currentImage);if(!i.firstImageClicked){if(t.Context.EventTracker.Record("Picture Engagement",`${s} Picture engagement`,1,{currentImage:i.currentImage,url:this.src?this.src:""}),"function"==typeof ga){ga("smedia_analytics_tracker.send",{hitType:"event",eventCategory:"Picture engagement",eventAction:`${s} Picture engagement`,nonInteraction:!0});const e=t.Context.DomainConfig.single_tag_config.analytics?t.Context.DomainConfig.single_tag_config.analytics.length:0;if(e>1){const t="smedia_analytics_tracker";for(let n=1;n<e;n++){ga(`${`${t}_${n}`}.send`,{hitType:"event",eventCategory:"Picture engagement",eventAction:`${s} Picture engagement`,nonInteraction:!0})}}}console.log(`sMedia : ${s} Picture engagement | Selector | ${e}`),i.firstImageClicked=!0}if("function"==typeof ga){ga("smedia_analytics_tracker.send",{hitType:"event",eventCategory:"Picture Viewed",eventAction:`${s} Picture Viewed`,nonInteraction:!0});const e=t.Context.DomainConfig.single_tag_config.analytics?t.Context.DomainConfig.single_tag_config.analytics.length:0;if(e>1){const t="smedia_analytics_tracker";for(let n=1;n<e;n++){ga(`${`${t}_${n}`}.send`,{hitType:"event",eventCategory:"Picture Viewed",eventAction:`${s} Picture Viewed`,nonInteraction:!0})}}}console.log(`sMedia : ${s} image clicked | Selector | ${e}`)}))}bindForNextImageTracking(e){const n=this;t.dom.find(e).click((function(){console.log("sMedia : Call bindForNextImageTracking Function"),n.currentImage++,n.currentImage>n.maxImages&&(n.currentImage=1);const i=t.getIndexed(n.currentImage);if(!n.firstImageClicked){if("function"==typeof ga){ga("smedia_analytics_tracker.send",{hitType:"event",eventCategory:"Picture engagement",eventAction:`${i} Picture engagement`,nonInteraction:!0});const e=t.Context.DomainConfig.single_tag_config.analytics?t.Context.DomainConfig.single_tag_config.analytics.length:0;if(e>1){const t="smedia_analytics_tracker";for(let n=1;n<e;n++){ga(`${`${t}_${n}`}.send`,{hitType:"event",eventCategory:"Picture engagement",eventAction:`${i} Picture engagement`,nonInteraction:!0})}}}console.log(`${i} Picture engagement | Next | ${e}`),n.firstImageClicked=!0}if("function"==typeof ga){ga("smedia_analytics_tracker.send",{hitType:"event",eventCategory:"Picture Viewed",eventAction:`${i} Picture Viewed`,nonInteraction:!0});const e=t.Context.DomainConfig.single_tag_config.analytics?t.Context.DomainConfig.single_tag_config.analytics.length:0;if(e>1){const t="smedia_analytics_tracker";for(let n=1;n<e;n++){ga(`${`${t}_${n}`}.send`,{hitType:"event",eventCategory:"Picture Viewed",eventAction:`${i} Picture Viewed`,nonInteraction:!0})}}}console.log(`sMedia : ${i} image clicked | next | ${e}`)}))}bindForPrevImageTracking(e){const n=this;t.dom.find(e).click((function(){console.log("sMedia : Call bindForPrevImageTracking Function"),n.currentImage--,n.currentImage<1&&(n.currentImage=n.maxImages);const i=t.getIndexed(n.currentImage);if(!n.firstImageClicked){if("function"==typeof ga){ga("smedia_analytics_tracker.send",{hitType:"event",eventCategory:"Picture engagement",eventAction:`${i} Picture engagement`,nonInteraction:!0});const e=t.Context.DomainConfig.single_tag_config.analytics?t.Context.DomainConfig.single_tag_config.analytics.length:0;if(e>1){const t="smedia_analytics_tracker";for(let n=1;n<e;n++){ga(`${`${t}_${n}`}.send`,{hitType:"event",eventCategory:"Picture engagement",eventAction:`${i} Picture engagement`,nonInteraction:!0})}}}console.log(`sMedia : ${i} Picture engagement | Prev | ${e}`),n.firstImageClicked=!0}if("function"==typeof ga){ga("smedia_analytics_tracker.send",{hitType:"event",eventCategory:"Picture Viewed",eventAction:`${i} Picture Viewed`,nonInteraction:!0});const e=t.Context.DomainConfig.single_tag_config.analytics?t.Context.DomainConfig.single_tag_config.analytics.length:0;if(e>1){const t="smedia_analytics_tracker";for(let n=1;n<e;n++){ga(`${`${t}_${n}`}.send`,{hitType:"event",eventCategory:"Picture Viewed",eventAction:`${i} Picture Viewed`,nonInteraction:!0})}}}console.log(`sMedia : ${i} image clicked | Prev | ${e}`)}))}Unregister(){}},t.Context.OnReady((()=>{e.pictureViewTracker.Register()})),t.Context.OnClose((()=>{e.pictureViewTracker.Unregister()}))}(t.Tracker||(t.Tracker={}))}(sMedia||(sMedia={})),function(t){!function(e){e.rctracker=new class{Register(){const e=t.Context.DomainConfig,n=t.Context.PageData.car_data;let i;if(n&&e){const o=`${t.apiHost}/APIs/v1/conversionTrackerData.php?dealership=${e.cron}&make=${n.make}&model=${n.model}&year=${n.year}`;(new t.Ajax).Get(o,(t=>{i=!0===t.success?t.data:null}),(()=>i=null));const s=setInterval((()=>{if(void 0!==i&&(clearInterval(s),i&&i.conversionId)){const o=`//tm.smedia.ca/tm-tracker-iframe.php?stock_number=${n.stock_number}&id=${i.conversionId}&label=${i.conversionLabel}&pa_id=${e.cron_config.perfect_audience_id}&cron_name=${e.cron}`,s=e.cron_config.retargetting_delay||1;setTimeout((function(){t.DomInstaller.InstallIframe(o)}),s)}}),200)}else e?console.log("sMedia : CAR DATA not found"):console.log("sMedia : DOMAIN CONFIG not found")}Unregister(){}},t.Context.OnReady((()=>{"vdp"===t.Context.PageType&&e.rctracker.Register()})),t.Context.OnReady((()=>{"vdp"===t.Context.PageType&&e.rctracker.Unregister()}))}(t.Tracker||(t.Tracker={}))}(sMedia||(sMedia={})),function(t){t.scrollDepthTracker=new class{constructor(){this.LastScroll=0}Register(){document.addEventListener("scroll",(e=>{const n=document.body,i=document.documentElement,o=Math.max(n.scrollHeight,n.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight)-window.innerHeight,s=o>0?Math.round(window.scrollY/o*100):100;if(s>this.LastScroll){const e={scrollX:window.scrollX,scrollY:window.scrollY,scrollHeight:o,scrollPercentage:s,window:[window.innerWidth,window.innerHeight]};t.Context.EventTracker.Record("Page","ScrollDepth",s,e,null,(t=>{this.EventId=t}),this.EventId),this.LastScroll=s}}))}Unregister(){}},t.Context.OnReady((()=>{t.scrollDepthTracker.Register()})),t.Context.OnReady((()=>{t.scrollDepthTracker.Unregister()}))}(sMedia||(sMedia={})),function(t){class e{constructor(){this.initialized=!1,this.data=null,this.config=null,this.buttonDebug=!1,this.formDebug=!1,this.poweredbyDebug=!1,this.poweredby_conf=null,this.dealership=null,this.disclaimer=null,this.busy=!1,this.pending=[],this.algorithm="default",this.urlParser=t.URLParser.current(),this.regex=new t.RegExpProcessor,this.window=new t.ButtonWindow}Register(){const e=t.Context.DomainConfig;e&&e.ai_button&&(this.init(e.ai_button.data,e.cron_config.buttons,{dealership:e.cron,button_live:!(!e.dealer_info.buttons_live||"1"!==e.dealer_info.buttons_live&&"1"!==e.dealer_info.buttons_live),form_live:!(!e.dealer_info.form_live||"1"!==e.dealer_info.form_live&&"1"!==e.dealer_info.form_live),poweredby_live:!(!e.cron_config.powered_by_live||!0!==e.cron_config.powered_by_live),poweredby_conf:{},combinations:e.ai_button.combinations,algorithm:e.ai_button.algorithm,disclaimer:e.cron_config.form_disclaimer,tracker_url:`${t.apiHost}/services/sm-ai-buttons.php`}),this.show())}Unregister(){}init(e,n,i){const o=Math.floor(Math.random()*i.algorithm.length);this.algorithm=i.algorithm[o],this.data=e[this.algorithm],this.config=n,this.url=this.urlParser.get(),this.buttonDebug=t.Context.DebugFlags.aiButtonDebug,this.formDebug=t.Context.DebugFlags.aiFormDebug,this.poweredbyDebug=t.Context.DebugFlags.poweredbyDebug,this.button_live=i.button_live,this.form_live=i.form_live,this.poweredby_live=i.poweredby_live,this.poweredby_conf=i.poweredby_conf,this.dealership=i.dealership,this.disclaimer=i.disclaimer,void 0!==i.combinations&&(this.combinations=i.combinations[this.algorithm]),this.tracker_url=i.tracker_url,this.initialized=!0}show_baseline(){return(this.buttonDebug?1e4:this.get_random(0,1e4))<1e3}predict(t){const e=this.data[t],n={location:this.predict_group(e.locations),size:this.predict_group(e.sizes),style:this.predict_group(e.styles),texts:{}};for(const t in e.texts)n.texts[t]=this.predict_group(e.texts[t]);return n}predict_ts(e){let n=-1,i=-1,o=null;const s=this.data[e];for(const e in s)i=t.rbeta(s[e].a+1,s[e].b+2),i>n&&(n=i,o=e);return o}predict_sm(t){const e=this.data[t],n=Math.random();let i=0;const o=e.view+1,s=1/Math.log(o+1e-7);let a=null,r=0;for(const t in e.score)r+=Math.exp(e.score[t]/s);for(const t in e.score)if(i+=Math.exp(e.score[t]/s)/r,a=t,i>n)return a;return a}predict_ucb1(t){const e=this.data[t],n={};for(const t in e.view){if(0==e.view[t])return t;n[t]=e.score[t]+Math.sqrt(2*Math.log(e.total_view)/e.view[t])}const i=Object.keys(n).map((t=>n[t])),o=i.reduce((function(t,e){return Math.max(t,e)}));return Object.keys(n)[i.indexOf(o)]}predict_group(t){const e=this.sum_vals(t),n=this.get_random(0,e);let i=null,o=0;for(const e in t)if(null===i&&(i=e),o+=t[e],o>=n){i=e;break}return i}get_random(t,e){return Math.floor(Math.random()*(e-t))+t}get_random_int(t,e){return Math.floor(Math.random()*(e-t+1))+t}sum_vals(t){let e=0;for(const n in t)e+=t[n];return e}show(){const t=this;for(const e in this.config){const n=setInterval((()=>{t.show_button(e)&&clearInterval(n)}),1e3)}}getButtonCookie(t){const e=`${t} = `;let n="";if(document.cookie.length>0){let t=document.cookie.indexOf(e);if(-1!=t){t+=e.length;let i=document.cookie.indexOf(";",t);-1==i&&(i=document.cookie.length),n=unescape(document.cookie.substring(t,i))}}return n}show_button(e){if(0==t.dom.find(this.config[e]["action-target"]).length)return!1;if(this.regex.pmake(this.config[e]["url-match"]).test(this.urlParser.get())){this.bind_events(e);let n="default"==this.algorithm?"baseline":(Object.entries(this.combinations[e]).find((t=>"baseline"==t[1]))||[])[0],i=null;if(this.show_baseline()||!this.button_live&&!this.buttonDebug){const n=t.dom.find(this.config[e]["action-target"]);n&&n.attr({"smedia-text-key":e.substr(e.indexOf(" ")+1),"smedia-text-value":n.text(),"smedia-baseline":"yes"})}else{if("default"==this.algorithm)i=this.predict(e);else{"thompson_sampling"==this.algorithm?n=this.predict_ts(e):"softmax"==this.algorithm?n=this.predict_sm(e):"ucb-1"==this.algorithm&&(n=this.predict_ucb1(e));const t=this.combinations[e][n].slice(1,-1).split("][");i={location:t[0],size:t[1],style:t[2],texts:{[e]:t[3]}}}if(this.set_text(e,i),this.set_style(e,i),this.set_size(e,i),this.set_location(e,i),"default"==this.algorithm){n=`${i.location}-${i.style}-${i.size}`;for(const t in i.texts)n+=`-${i.texts[t]}`}}t.dom.find(this.config[e]["action-target"]).each((t=>{t.setAttribute("smedia-combination",n)})),t.dom.find(this.config[e]["action-target"]).each((t=>{t.setAttribute("smedia-btn-name",e)}));const o={dealership:this.dealership,url:this.url,button_name:e,text_key:"",text_value:"",location:i?i.location:"",style:i?i.style:"",size:i?i.size:"",combination:n,algorithm:this.algorithm,smedia_uuid:this.getButtonCookie("smedia_smart_lead_uuid")||t.Context.Browser.uniqueUserId};if(i)for(const t in i.texts)o.text_key=t,o.text_value=i.texts[t];this.track("button_viewed",o)}return!0}set_text(e,n){var i,o,s;for(const a in n.texts){const r=(((this.config[e]||{}).texts||{})[a.substr(a.indexOf(" ")+1)]||{}).target,c=n.texts[a],l=t.dom.find(r).first();"INPUT"===(l.get(0)||{}).nodeName?l.val(c):l.html(c);t.dom.find(this.config[e]["action-target"]).attr({"smedia-text-key":a,"smedia-text-value":c}),l.attr({"smedia-text-key":a,"smedia-text-value":c});const d=t.Context.PageData,m=new CustomEvent("aibutton.textchange",{detail:{buttonName:e,textKey:a,value:c,pageType:d.page_type,carData:d.car_data}});document.dispatchEvent(m),null===(s=null===(o=null===(i=t.Context.GlobalCallbacks)||void 0===i?void 0:i.aiButton)||void 0===o?void 0:o.onTextChange)||void 0===s||s.forEach((t=>{"function"==typeof t&&t(e,a,c)}))}}set_style(e,n){const i=this.config[e].styles[n.style],o=document.createElement("style");o.type="text/css",o.innerHTML=`${this.config[e]["css-class"]} { `;for(const t in i.normal)o.innerHTML+=`${t}: ${i.normal[t]} !important;`;o.innerHTML+=`}\n ${this.config[e]["css-hover"]} { `;for(const t in i.hover)o.innerHTML+=`${t}: ${i.hover[t]} !important;`;o.innerHTML+="}\n",document.getElementsByTagName("body")[0].appendChild(o),t.dom.find(this.config[e]["action-target"]).attr("smedia-style",n.style);for(const n in i.normal)t.dom.find(this.config[e]["css-class"]).css(n,i.normal[n]);for(const n in i.hover)t.dom.find(this.config[e]["css-class"]).css(n,i.hover[n])}set_size(e,n){const i=this.config[e].sizes[n.size],o=document.createElement("style");o.type="text/css",o.innerHTML=`${this.config[e]["css-class"]} { `;for(const t in i)o.innerHTML+=`${t}: ${i[t]} !important;`;o.innerHTML+="}\n",document.getElementsByTagName("body")[0].appendChild(o),t.dom.find(this.config[e]["action-target"]).attr("smedia-size",n.size)}set_location(e,n){const i=t.dom.find(this.config[e].target),o=t.dom.find(this.config[e].locations[n.location]);i&&o&&i.length&&o.length&&o.after(i.get(0)),t.dom.find(this.config[e]["action-target"]).attr("smedia-location",n.location)}unbindOnclickAttr(e){if((this.formDebug||this.form_live)&&this.config[e].button_action){const n=t.dom.find(this.config[e]["action-target"]),i=this;n.each((function(n){if(n){const o=n.cloneNode();for(;n.firstChild;)o.appendChild(n.firstChild);n.parentNode.replaceChild(o,n);const s=t.dom.find(i.config[e]["action-target"]).attr("onclick");void 0!==s&&s&&(t.dom.find(i.config[e]["action-target"]).attr("smedia-click-was",s),t.dom.find(i.config[e]["action-target"]).removeAttr("onclick"))}})),t.dom.find(this.config[e]["action-target"]).unbind("click")}}bind_events(e){this.unbindOnclickAttr(e);const n=t.dom.find(this.config[e]["action-target"]);if(n.addClass(`smedia-ai-${e.replace(" ","-")}`),n.css("cursor","pointer"),n.length>0)for(let t=0;t<n.length;t++){n[t].addEventListener("mousedown",this.click.bind(this),{capture:!0})}}showForm(e){const n={dealership:this.dealership,url:this.url,button_name:"strade",text_key:"strade",text_value:"Get Market Report",location:"default",style:"default",size:"default",combination:"baseline",algorithm:this.algorithm,smedia_uuid:this.getButtonCookie("smedia_smart_lead_uuid")||t.Context.Browser.uniqueUserId,disclaimer:this.disclaimer,referrer:document.referrer};this.window.set_params(n),this.window.params.form=e,this.window.open(`${t.apiHost}/forms/${e}.php?dealership=${this.dealership}`)}click(e){var n,i,o;if(1==e.button||2==e.button)return;const s=t.dom.el(event.target);let a=s;null===a.attr("smedia-btn-name")&&(a=s.parents("[smedia-btn-name]"));const r=t.dom.el(event.currentTarget),c=s.attr("smedia-btn-name")?s.attr("smedia-btn-name"):r.attr("smedia-btn-name");if(!c)return void console.warn("Ai button name not found",e);const l={dealership:this.dealership,url:this.url,button_name:c,text_key:a.attr("smedia-text-key"),text_value:a.attr("smedia-text-value"),location:a.attr("smedia-location"),style:a.attr("smedia-style"),size:a.attr("smedia-size"),combination:a.attr("smedia-combination"),algorithm:this.algorithm,smedia_uuid:this.getButtonCookie("smedia_smart_lead_uuid")||t.Context.Browser.uniqueUserId,disclaimer:this.disclaimer,referrer:document.referrer},d=t.Context.PageData,m=new CustomEvent("aibutton.click",{detail:{buttonName:c,textKey:l.text_key,value:l.text_value,pageType:d.page_type,carData:d.car_data}});if(document.dispatchEvent(m),null===(o=null===(i=null===(n=t.Context.GlobalCallbacks)||void 0===n?void 0:n.aiButton)||void 0===i?void 0:i.onClick)||void 0===o||o.forEach((t=>{"function"==typeof t&&t(c,l.text_value)})),this.track("clicked",l),"function"==typeof ga){ga("smedia_analytics_tracker.send",{hitType:"event",eventCategory:"Button Clicked",eventAction:"AI Button",eventLabel:l.button_name,nonInteraction:!0});const e=t.Context.DomainConfig.single_tag_config.analytics?t.Context.DomainConfig.single_tag_config.analytics.length:0;if(e>1){const t="smedia_analytics_tracker";for(let n=1;n<e;n++){ga(`${`${t}_${n}`}.send`,{hitType:"event",eventCategory:"Button Clicked",eventAction:"AI Button",eventLabel:l.button_name,nonInteraction:!0})}}}if((this.formDebug||this.form_live)&&this.config[c].button_action){if("form"===this.config[c].button_action[0]){const e=this.config[c].button_action[1];this.window.set_params(l),this.window.params.form=e;const n='<style type="text/css">\n\t\t\t\t\t\tdiv#smedia-window-overlay {\n\t\t\t\t\t\t\tposition  : fixed;\n\t\t\t\t\t\t\twidth     : 100%;\n\t\t\t\t\t\t\theight    : 100%;\n\t\t\t\t\t\t\ttop       : 0px;\n\t\t\t\t\t\t\tleft      : 0px;\n\t\t\t\t\t\t\tdisplay   : none;\n\t\t\t\t\t\t\tz-index   : 999999;\n\t\t\t\t\t\t\tbackground: #000000;\n\t\t\t\t\t\t\tdisplay   : none;\n\t\t\t\t\t\t\topacity   : 0.75;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdiv#smedia-window-container {\n\t\t\t\t\t\t\toverflow             : hidden;\n\t\t\t\t\t\t\tbackground-color     : white;\n\t\t\t\t\t\t\t-webkit-border-radius: 5px;\n\t\t\t\t\t\t\t-moz-border-radius   : 5px;\n\t\t\t\t\t\t\tborder-radius        : 5px;\n\t\t\t\t\t\t\tposition             : fixed;\n\t\t\t\t\t\t\tfont-family          : Arial;\n\t\t\t\t\t\t\tmax-width            : 100%;\n\t\t\t\t\t\t\ttop                  : 50%;\n\t\t\t\t\t\t\tleft                 : 50%;\n\t\t\t\t\t\t\tdisplay              : none;\n\t\t\t\t\t\t\tz-index              : 1000000;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tiframe#smedia-window-frame {\n\t\t\t\t\t\t\toverflow    : hidden;\n\t\t\t\t\t\t\tmargin-left : auto;\n\t\t\t\t\t\t\tmargin-right: auto;\n\t\t\t\t\t\t\tborder      : none;\n\t\t\t\t\t\t}\n\t\t\t\t\t</style>';t.dom.find("body").append(n);const i=`${t.apiHost}/forms/${e}.php?dealership=${this.dealership}`;this.window.open(i)}return this.track("form_viewed",l),e.stopImmediatePropagation(),e.preventDefault(),!1}}track(e,n){this.busy=!0;const i={act:e,button_name:encodeURIComponent(n.button_name),text_key:encodeURIComponent(n.text_key),text_value:encodeURIComponent(n.text_value),location:encodeURIComponent(n.location),style:encodeURIComponent(n.style),size:encodeURIComponent(n.size),combination:encodeURIComponent(n.combination),algorithm:encodeURIComponent(n.algorithm),url:encodeURIComponent(n.url),dealership:encodeURIComponent(n.dealership),smedia_uuid:encodeURIComponent(n.smedia_uuid)};(new t.Ajax).Post(this.tracker_url,i,(t=>{for(this.debug(t),this.busy=!1;this.pending.length>0;)this.execute(this.pending.shift())}),null,"application/x-www-form-urlencoded")}checking_button(e,n){const i=JSON.parse(e);let o="";for(const e in i)t.dom.find(i[e].action_target).length||(o+=`${e}: action-target not found. <br>`),t.dom.find(i[e].css_class).length||(o+=`${e}: css-class not found. <br>`);if(o){const e={act:"save_log",error_message:o,dealership:n};(new t.Ajax).Post(this.tracker_url,e,(t=>this.debug(t)),null,"application/x-www-form-urlencoded")}}execute(t){t&&"function"==typeof this[t.name]&&this[t.name].apply(null,t.args?t.args:[])}debug(e){t.Context.LogService.Debug(e)}}t.AiButton=e,t.Context.OnReady((()=>{(new e).Register()}))}(sMedia||(sMedia={})),function(t){t.ButtonWindow=class{constructor(){this.is_open=!1,this.initialized=!1,this.params=null}init(){const e=`<div id="smedia-window-overlay" style="display:none"></div>\n\t\t\t<div id="smedia-window-container" scrolling="no" style="display:none">\n\t\t\t\t<iframe id="smedia-window-frame" scrolling="no" src="${t.apiHost}/adwords3/templates/balls.svg"></iframe>\n\t\t\t\t<div id="smedia-loading-spinner">\n\t\t\t\t\t<img src="${t.apiHost}/adwords3/templates/balls.svg"/>\n\t\t\t\t</div>\n\t\t\t</div>`,n=document.createElement("div");n.innerHTML=e;const i=n.childNodes;document.getElementsByTagName("body")[0].appendChild(i[0]),document.getElementsByTagName("body")[0].appendChild(i[1]);const o=this;t.dom.find("#smedia-window-overlay").on("click",(function(){o.close()})),this.initialized=!0,"function"==typeof this.onReady&&this.onReady()}set_params(t){this.params=t}loading(){t.dom.find("#smedia-window-frame").hide(),t.dom.find("#smedia-loading-spinner").show(),this.resize_container(36,36)}loaded(e){var n,i;this.resize(e);try{t.dom.el(window).trigger("resize")}catch(t){console.error("sMedia error",t)}t.dom.find("#smedia-loading-spinner").hide(),t.dom.find("#smedia-window-frame").show();t.dom.find("#smedia-window-frame").get(0).contentWindow.postMessage({action:"set_params",data:this.params},"*");const o=t.Context.PageData,s=new CustomEvent("aiform.load",{detail:{formName:this.params.form,pageType:o.page_type,carData:o.car_data}});document.dispatchEvent(s),((null===(i=null===(n=t.Context.GlobalCallbacks)||void 0===n?void 0:n.aiForm)||void 0===i?void 0:i.onLoad)||[]).forEach((t=>{"function"==typeof t&&t(this.params.form)}))}open(e){if(!this.initialized){this.init();const e=this;window.addEventListener("message",(t=>{switch(t.data.action){case"loaded":e.loaded(t.data);break;case"loading":e.loading();break;case"resize":e.resize(t.data);break;case"input_changed":e.input_changed(t.data);break;case"input_start":e.input_start();break;case"fillup":e.fillup(t.data.redirect_url);break;case"close":e.close();break;case"thankyouClose":e.close(!0);break;default:"function"==typeof e[t.data.action]&&this[t.data.action](t.data)}}),!1),window.addEventListener("resize",(()=>{t.dom.find("#smedia-window-frame")[0].contentWindow.postMessage({action:"device",device:t.dom.find("body").width()>=860?"desktop":"mobile"},"*")}))}this.is_open||(t.dom.find("#smedia-window-overlay").css("display","block"),t.dom.find("#smedia-window-container").css("display","inline-block"),this.loading(),t.dom.find("#smedia-window-frame").attr("src",e),this.is_open=!0)}resize_container(e,n){const i=t.dom.find("#smedia-window-container");i.width(e),i.height(n),i.css({"overflow-y":"hidden"}),i.height()>window.innerWidth&&(i.height(window.innerWidth),i.css("overflow-y","auto")),i.css("margin-left",-1*(i.outerWidth()>>1)+"px"),i.css("margin-top",-1*(i.outerHeight()>>1)+"px")}resize(e){t.dom.find("#smedia-window-frame").width(e.width),t.dom.find("#smedia-window-frame").height(e.height),this.resize_container(e.width,e.height)}close(e=!1){var n,i,o;if(t.dom.find("#smedia-window-overlay").css("display","none"),t.dom.find("#smedia-window-container").css("display","none"),this.is_open=!1,!e){const e=t.Context.PageData,s=new CustomEvent("aiform.close",{detail:{detail:{formName:this.params.form,pageType:e.page_type,carData:e.car_data}}});document.dispatchEvent(s),null===(o=null===(i=null===(n=t.Context.GlobalCallbacks)||void 0===n?void 0:n.aiForm)||void 0===i?void 0:i.onClose)||void 0===o||o.forEach((t=>{"function"==typeof t&&t(this.params.form)}))}}fillup(e){var n,i,o;ga("smedia_analytics_tracker.send",{hitType:"event",eventCategory:"Form Fillup",eventAction:"AI Form",nonInteraction:!0});const s=t.Context.DomainConfig.single_tag_config.analytics?t.Context.DomainConfig.single_tag_config.analytics.length:0;if(s>1){const t="smedia_analytics_tracker";for(let e=1;e<s;e++){ga(`${`${t}_${e}`}.send`,{hitType:"event",eventCategory:"Form Fillup",eventAction:"AI Form",nonInteraction:!0})}}const a=t.Context.PageData,r=new CustomEvent("aiform.complete",{detail:{formName:this.params.form,pageType:a.page_type,carData:a.car_data}});document.dispatchEvent(r),null===(o=null===(i=null===(n=t.Context.GlobalCallbacks)||void 0===n?void 0:n.aiForm)||void 0===i?void 0:i.onFillUp)||void 0===o||o.forEach((t=>{"function"==typeof t&&t(this.params.form)})),e&&setTimeout((()=>location.href.split("#")[0]=e),1e3)}input_start(){const e=t.Context.PageData,n=new CustomEvent("aiform.start",{detail:{formName:this.params.form,pageType:e.page_type,carData:e.car_data}});document.dispatchEvent(n)}input_changed(e){ga("smedia_analytics_tracker.send",{hitType:"event",eventCategory:"Input Tracking",eventAction:e.status,eventLabel:e.field,nonInteraction:!0});const n=t.Context.DomainConfig.single_tag_config.analytics?t.Context.DomainConfig.single_tag_config.analytics.length:0;if(n>1){const t="smedia_analytics_tracker";for(let i=1;i<n;i++){ga(`${`${t}_${i}`}.send`,{hitType:"event",eventCategory:"Input Tracking",eventAction:e.status,eventLabel:e.field,nonInteraction:!0})}}const i=new CustomEvent("aiform.input_change",{detail:{formName:this.params.form,field:e.field,status:e.status}});document.dispatchEvent(i)}}}(sMedia||(sMedia={})),function(t){function e(t,e){const n=1+Math.log(4.5),i=Math.log(4);let o,s;if(!(t>1)){if(1==t){let t=Math.random();for(;t<=1e-7;)t=Math.random();return-Math.log(t)*e}{let n=!0;for(;n;){const e=Math.random(),i=(Math.E+t)/Math.E,s=i*e;o=s<=1?Math.pow(s,1/t):-Math.log((i-s)/t);const a=Math.random();s>1?a<=Math.pow(o,t-1)&&(n=!1):a<=Math.exp(-o)&&(n=!1)}return o*e}}{const a=Math.sqrt(2*t-1),r=t-i,c=t+a,l=!0;for(;l;){const i=Math.random();if(!(1e-7<i&&i<.9999999))continue;const l=1-Math.random(),d=Math.log(i/(1-i))/a;o=t*Math.exp(d),s=i*i*l;const m=r+c*d-o;if(m+n-4.5*s>=0||m>=Math.log(s))return o*e}}}t.rbeta=function(t,n){const i=e(t,1);return i/(i+e(n,1))},t.rgamma=e}(sMedia||(sMedia={})),function(t){!function(e){e.directMail=new class{Register(){t.Context.DomainConfig.cron_config.mail_retargeting&&(t.Context.DomainConfig.cron_config.mail_retargeting.enabled||t.Context.DebugFlags.mailRetargeting)&&t.Context.PageData&&"vdp"==t.Context.PageType&&this.Install(t.Context.Dealership,t.Context.PageData.car_data.stock_number)}Install(e,n){const i=`${t.apiHost}/services/direct-mail.php?dealership=${encodeURIComponent(e)}&stock_number=${encodeURIComponent(n)}`;(new t.Ajax).Get(i,(function(t){if(console.log(t),!0===t.success&&t.client_id){const e={aid:t.client_id,logo:t.logo,front_banner:t.front_banner,back_banner:t.back_banner,coupon_offer:t.promotion_text,offer_color:t.promotion_color,promo_bg_color:t.overlay_color,promo_color:t.overlay_text_colour,promo_text:"FEATURED VEHICLE",price_color:t.price_color,coupon_date:(new Date).toLocaleDateString(),coupon_validity:t.coupon_validity,vehicle_1_stock:t.vehicles[0].stock_number,vehicle_1_year:t.vehicles[0].year,vehicle_1_make:t.vehicles[0].make,vehicle_1_model:t.vehicles[0].model,vehicle_1_price:t.vehicles[0].price,vehicle_1_img:t.vehicles[0].image,vehicle_2_stock:t.vehicles[1].stock_number,vehicle_2_year:t.vehicles[1].year,vehicle_2_make:t.vehicles[1].make,vehicle_2_model:t.vehicles[1].model,vehicle_2_price:t.vehicles[1].price,vehicle_2_img:t.vehicles[1].image};let n="https://rdcdn.com/rt?e=1&img=1";for(const[t,i]of Object.entries(e))n+=`&${t}=${encodeURIComponent(i)}`;const i=document.createElement("img");i.setAttribute("width","1"),i.setAttribute("height","1"),i.setAttribute("src",n),document.getElementsByTagName("body")[0].appendChild(i)}}))}Unregister(){}},t.Context.OnReady((()=>{e.directMail.Register()})),t.Context.OnClose((()=>{e.directMail.Unregister()}))}(t.Modules||(t.Modules={}))}(sMedia||(sMedia={})),function(t){const e=new class{constructor(){this.clickScored=!1,this.buttonClickScored=!1,this.timeOnPageScored=!1,this.scrollDepthScored=!1,this.firstScroll=!1,this.executionCount=0,this.timeOnPage=0,this.timeoutId=null}Register(){if(this.clickScored=!1,this.buttonClickScored=!1,this.timeOnPageScored=!1,this.scrollDepthScored=!1,this.firstScroll=!1,this.executionCount=0,this.timeOnPage=0,this.timeoutId=null,"vdp"===t.Context.PageType){const e=this.EventRecorded.bind(this);this.epmData=new t.EpmData,this.epmData.load(),t.Context.EventTracker.OnRecord(e)}this.log=t.Context.LogService,t.Context.GlobalCallbacks.epm.push(((e,n)=>t.Context.EventTracker.Record("EpmEvent",30*n+"_Sec",null,{...this.epmData.activePage,name:void 0,visit:void 0})))}Unregister(){this.timeoutId&&clearTimeout(this.timeoutId);const e=this.EventRecorded.bind(this);t.Context.EventTracker.RemoveRecordCallback(e)}ExecuteEpm(){"vdp"!==t.Context.PageType||!this.epmData.isActivePageEngaged()||this.executionCount>3||(this.executionCount+=1,t.Context.GlobalCallbacks.epm.forEach((e=>{try{e(this.timeOnPage,this.executionCount)}catch(e){this.log.Log(t.LogType.Error,{"sMedia error":e})}})),this.executionCount<3&&this.setExecTimeout())}setExecTimeout(t=3e4){clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.ExecuteEpm()}),t)}EventRecorded(e){if(!this.epmData.firstLoad){const n=()=>setTimeout((()=>{"complete"===document.readyState&&"vdp"===t.Context.PageType&&0===this.executionCount&&this.epmData.isActivePageEngaged()&&this.setExecTimeout(100)}),2e3);switch(e.Action){case"Click":if(this.clickScored)break;this.AddPoint("click",10),this.clickScored=!0,n();break;case"ButtonClick":if(this.buttonClickScored)break;this.AddPoint("buttonClick",70),this.buttonClickScored=!0,n();break;case"TimeOnPage":if(this.timeOnPage=e.Value,(this.timeOnPageScored||e.Value/1e3)<30)break;this.AddPoint("pageTime",70),this.timeOnPageScored=!0,n();break;case"ScrollDepth":if(e.Value>5&&!this.firstScroll&&(this.AddPoint("firstScroll",10),this.firstScroll=!0,n()),e.Value<50||this.scrollDepthScored)break;this.AddPoint("scroll",10),this.scrollDepthScored=!0,n()}}}AddPoint(e,n){this.epmData.load(),setTimeout((()=>{this.epmData.increaseCarPoint({year:t.Context.PageData.car_data.year,make:t.Context.PageData.car_data.make,model:t.Context.PageData.car_data.model},e,n),this.epmData.save()}),500)}debug(t){this.log.Debug(t)}};t.Context.OnReady((()=>{e.Register()})),t.Context.OnClose((()=>{e.Unregister()}))}(sMedia||(sMedia={})),function(t){t.EpmData=class{constructor(){this.make=[],this.model=[],this.year=[],this.activePage={name:"",click:0,buttonClick:0,firstScroll:0,scroll:0,pageTime:0,visit:1},this.firstLoad=!0}load(){(e=>{if(e&&e.make?(this.make=e.make,this.get("make",t.Context.PageData.car_data.make)||this.addCurrent("make")):this.addCurrent("make"),e&&e.model?(this.model=e.model,this.get("model",t.Context.PageData.car_data.model)||this.addCurrent("model")):this.addCurrent("model"),e&&e.year?(this.year=e.year,this.get("year",t.Context.PageData.car_data.year)||this.addCurrent("year")):this.addCurrent("year"),this.save(),this.firstLoad&&"vdp"===t.Context.PageType){const e=t.Context.PageData.car_data;e.year&&e.make&&e.model&&(this.incVisit(this.get("make",e.make)),this.incVisit(this.get("model",e.model)),this.incVisit(this.get("year",e.year)),this.save()),this.firstLoad=!1}})(t.LocalStorage.get("epmdata"))}addCurrent(e){this[e].push({name:"",click:0,buttonClick:0,pageTime:0,firstScroll:0,scroll:0,visit:0,name:t.Context.PageData.car_data[e]})}get(t,e){return this[t].find((t=>t.name===e))}incVisit(t){t.visit=t.visit+1,t.click=this.calcMean(t.click,t.visit,0),t.buttonClick=this.calcMean(t.buttonClick,t.visit,0),t.pageTime=this.calcMean(t.pageTime,t.visit,0),t.firstScroll=this.calcMean(t.firstScroll,t.visit,0),t.scroll=this.calcMean(t.scroll,t.visit,0)}calcMean(t,e,n){return 1==e?n:this.firstLoad?t+n>>1:(t<<1)+n>>1}increase(t,e,n,i){const o=this.get(t,e);o&&void 0!==o[n]&&(o[n]=this.calcMean(o[n],o.visit,i))}increaseCarPoint(t,e,n){this.activePage[e]=n,["make","model","year"].forEach((i=>{this.increase(i,t[i],e,n)}))}getTotal(t){return t.pageTime+t.buttonClick+t.firstScroll+t.scroll+t.click}getAvarageFor(t){const e=this[t];return e.reduce(((t,e)=>t+this.getTotal(e)),0)/e.length}isActivePageEngaged(){return this.getTotal(this.activePage)>=80}getEngagements(t){return["make","model","year"].map((e=>this.getTotal(this.get(e,t[e]))>=this.getAvarageFor(e)))}getTotalEngagements(t){return this.getEngagements(t).reduce(((t,e)=>t+(!0===e?1:0)),0)}getTotalPageView(){return this.make.reduce(((t,e)=>t+e.visit),0)}save(){const e={make:this.make,model:this.model,year:this.year};t.LocalStorage.set("epmdata",e,299500)}}}(sMedia||(sMedia={})),function(t){!function(e){e.jsCrawler=new class{Register(){const e=t.Context.DomainConfig.scrapper_config;"vdp"==t.Context.PageType&&e.vdp_url_regex&&e.client_scrapping&&this.installJsCrawler()}installJsCrawler(){const e=`${t.apiHost}/jscrawler/scrapper.js`;t.DomInstaller.InstallScript(e)}Unregister(){}},t.Context.OnReady((()=>{e.jsCrawler.Register()})),t.Context.OnClose((()=>{e.jsCrawler.Unregister()}))}(t.Modules||(t.Modules={}))}(sMedia||(sMedia={})),function(t){!function(e){e.smartBanner=new class{constructor(){this.apiUrl=`${t.apiHost}/services/smart-banner.php`,this.dataStorageKey="smedia_sb_data"}registerEpmTracker(){const e=this;this.carData.url&&void 0!==t.Context.GlobalCallbacks.epm&&t.Context.GlobalCallbacks.epm.push(((t,n)=>{1==n&&e.saveEngagedCar()}))}Register(){this.carData=t.Context.PageData.car_data||{},this.registerEpmTracker()}Unregister(){}saveEngagedCar(){const e=t.Context;if(!["make","model","year","url"].find((t=>!(t in this.carData)))){const n={act:"save",sb_dealership:e.DomainConfig.cron,sb_uuid:e.Browser.uniqueUserId,sb_make:this.carData.make,sb_model:this.carData.model,sb_year:this.carData.year,sb_vdp:this.carData.url},i=this;(new t.Ajax).Post(this.apiUrl,n,(e=>{const n={vdp:this.carData.url,title:[this.carData.year,this.carData.make,this.carData.model].join(" "),car_image:((e||{}).data||{}).car_image||"",dealership:t.Context.DomainConfig.cron};t.LocalStorage.set(i.dataStorageKey,n,t.SECONDS_IN_A_DAY)}),null,"application/x-www-form-urlencoded")}}},t.Context.OnReady((()=>{e.smartBanner.Register()})),t.Context.OnClose((()=>{e.smartBanner.Unregister()}))}(t.Modules||(t.Modules={}))}(sMedia||(sMedia={})),function(t){!function(e){e.smartOffer=new class{constructor(){this.debug=!1,this.soVideoReady=!1,this.readyToShow=!1,this.smartOfferReady=!0,this.showSmartOffer=!1,this.thisIsMemo=!1,this.thisIsMemoVideo=!1,this.thisIsResume=!1,this.smartOfferShown=!1,this.sessPageVisits=0,this.storagePrefix="so",this.fireSmartOffer=(e,n,i=!1)=>{if((this.debug||this.showSmartOffer)&&e&&(!i||!this.smartOfferShown)){const e=setInterval((()=>{!this.readyToShow||t.multipleInputsInViewPort()||window.preventSO?t.debugLog("sMedia: SO not ready or other form visible"):(clearInterval(e),this.video&&(n.play(),setTimeout((()=>{n.paused()&&(n.muted(!0),n.play())}),500)),this.smartOfferLead.show(),this.smartOfferShown=!0,(this.thisIsMemo||this.thisIsMemoVideo)&&this.bindSmartMemoEvents(),this.so_config.exit_intent.active&&document.addEventListener("visibilitychange",(()=>{window.setTimeout((()=>{this.smartOfferLead.close(!0)}),this.so_config.exit_intent.value)}),{once:!0}),this.so_config.inactivity.active&&window.setTimeout((()=>{this.smartOfferLead.close(!0)}),this.so_config.inactivity.value))}),500)}}}Register(){const n=`${t.apiHost}/sm-scripts/smart-offer/gtm-cookie-replicator.js`;t.DomInstaller.InstallScript(n);(new e.SmartProfiler).Register(),t.Context.AppStates.smart_profiler_enabled||this.init()}Unregister(){}init(){const n=t.Context.Browser,i=t.Context.PageType;this.debug=t.Context.DebugFlags.smartOffer;const o=t.Context.DomainConfig,s=t.Context.DomainConfig.smedia_domains.smedia_api;this.leadFormUrl=`${s}/v1/smart-offer/new/${o.mongo_dealer_info.id}/`;const a=t.Context.PageData.car_data||{},r=(o.services||{}).smart_offer||[],c={pages:{all:!1,home:!1,new:!1,used:!1,certified:!1,customVDP:!1,otherPage:!1},customVDP:{stockType:[],year:[],make:[],model:[],regex:[]},memoSetting:{heading:{show:!1,text:""},body:{show:!1,text:""},button:{show:!1,text:"",redirect_url:""}},basicForm:{first:{label:"Name",type:"text",placeholder:"Enter Your Name",required:!0},second:{label:"Email",type:"email",placeholder:"Enter Email Address",required:!0},third:{label:"Phone",type:"tel",placeholder:"Enter Phone Number",required:!0}},extraForm:{fourth:{value:{current_vdp:!1,placeholder:"Year Make Model"},show:!1,text:"New Car Info",required:!1,show_car_option:!1},fifth:{show:!1,text:"Location",required:!1,type:"dropdown",placeholder:"Preferred Location",option:[]},resume:{show:!0,text:"Resume File",required:!0,type:"file",placeholder:"No file chosen"}},color:{bg_color:"#EFEFEF",text_color:"#404450",heading_text_color:"#ffffff",body_text_color:"#ffffff",disclaimer_color:"#404450",border_color:"#E5E5E5",button_text_color:"#ffffff",button_color:["#000000","#000000"],button_color_hover:["#222222","#222222"],button_color_active:["#222222","#222222"]},imgOrVideo:{video:{url:"https://www.youtube.com/watch?v=wCFi9s3LhBU&ab_channel=sMediaProofs",title:"",description:"",show_form:!0},isVideo:!1,image:"https://cdash-reports.smedia.ca/smart-offer/demo.png",version:"v0"},response_email:{active:!0,email_title:"",subject:'Hello [name],<p>Please print the following coupon and bring it in for the offer</p><img src="[image]"/><p><br/>[dealership]',email:'Hello [name],<p>Please print the following coupon and bring it in for the offer</p><img src="[image]"/><p><br/>[dealership]'},forward_to:{email_list:[],subject:"sMedia Coupon Lead"},special_to:{email_list:[],subject:"sMedia Coupon Lead",provider_name:"sMedia Coupon",source:"sMedia Coupon"},device_type:{mobile:!0,desktop:!0,tablet:!0},display:{display_after:13e3,retarget_after:5e3,fb_retarget_after:5e3,adword_retarget_after:5e3},check_price:{active:!1,max:1e7,min:0},shown_cap:{active:!1,value:3},fillup_cap:{active:!1,value:7},session_close:{active:!1,value:3},session_depth:{active:!1,value:0},inactivity:{active:!1,value:3e5},exit_intent:{active:!1,value:6e5},campaign_cap_google:{active:!1,count:3,days:7},campaign_cap_fb:{active:!1,count:3,days:7},show_cases:{timer:{active:!0},onclick:{active:!1,selectors:[]},static:{active:!1,options:[{url:"https://www.abc.com/test-page",selector:"#someRandomElement > a"}]}},name:"default smart offer",live:!1,priority:5,archive:!1,exit_intent_popup:!1,template:"Smart Offer Lead",otherPage:[],buttonText:"submit",custom_timing:[],_id:"default",createdAt:"",updatedAt:"",disclaimer:"",id:"default"};r.length||t.debugLog("sMedia: No `SMART OFFER` config found for new-smart-offer.");for(const s of r){["Smart Memo Creative","Smart Memo"].includes(s.template)?this.thisIsMemo=!0:this.thisIsMemo=!1,"Smart Memo Video"==s.template?this.thisIsMemoVideo=!0:this.thisIsMemoVideo=!1,"Smart Resume"==s.template?this.thisIsResume=!0:this.thisIsResume=!1,this.bgFileUrl=s.imgOrVideo.image||null,this.sessionStorage=t.Context.HashFunction.Hash(`${t.Context.Dealership}|${n.uniqueUserId}|${n.sessionId}|${s.name}`),this.persistentStorage=t.Context.HashFunction.Hash(`${t.Context.Dealership}|${n.uniqueUserId}|${s.name}`),this.so_config=Object.assign({},c,s||{}),this.smartOfferLead=new e.SmartOfferLead(this.so_config,this.sessionStorage,this.persistentStorage,this.leadFormUrl,this.storagePrefix);const r=this.so_config.live||!1;if(this.debug=t.Context.DebugFlags.smartOffer,this.showSmartOffer=!0,this.smartOfferShown=!1,!r&&!this.debug){t.debugLog(`sMedia: Smart offer is neither live in config ==> '${this.so_config.name}' nor we are in debug mode. Hence smart offer stopped for this config.`);continue}this.video=this.so_config.imgOrVideo.isVideo;const l=t.isEnabledForThisPage(this.so_config);if(t.debugLog(`sMedia: Smart Offer live status ==> ${r} in config ==> '${this.so_config.name}'`),t.debugLog(`sMedia: Smart Offer enable status for this page ('${i}')  ==> '${l}' in config ==> '${this.so_config.name}'`),t.debugLog(`sMedia: Smart Offer Video ==> ${this.video} in config ==> '${this.so_config.name}'`),!l){this.showSmartOffer=!1,t.debugLog(`sMedia: Smart offer is not enabled for this page in config ==> '${this.so_config.name}'. Hence smart offer stopped for this config (even if in debug mode).`);continue}this.sessPageVisits=t.setAndIncrementSessionDepth(this.sessionStorage,this.storagePrefix);t.metFacebookCampaignCap(this.so_config,this.persistentStorage,"smart offer",this.storagePrefix)&&(this.showSmartOffer=!1,t.debugLog("sMedia: Smart offer will not be shown due to facebook campaign cap met"));t.metGoogleCampaignCap(this.so_config,this.persistentStorage,"smart offer",this.storagePrefix)&&(this.showSmartOffer=!1,t.debugLog("sMedia: Smart offer will not be shown due to google campaign cap met"));t.dailyShownCapMet(this.so_config,this.persistentStorage,this.storagePrefix)&&(this.showSmartOffer=!1,t.debugLog("sMedia: Smart offer is not shown due to daily shown cap has been met."));t.sessionShownCapMet(this.so_config,this.sessionStorage,this.storagePrefix)&&(this.showSmartOffer=!1,t.debugLog("sMedia: Smart offer is not shown due to session shown cap has been met."));t.metFillUpCap(this.so_config,this.persistentStorage,this.storagePrefix)&&(this.showSmartOffer=!1,t.debugLog("sMedia: Smart offer is not shown due to fill up cap is met."));t.showBasedOnDeviceType(this.so_config)||(this.showSmartOffer=!1,t.debugLog(`sMedia: Smart offer is not enabled for device type ==> '${t.Context.Browser.getDeviceType()}'.`));t.sessionDepthCheck(this.so_config,this.sessPageVisits)&&(this.showSmartOffer=!1,t.debugLog(`sMedia: Smart offer will not be shown due to current session depth being ${this.sessPageVisits} while ${this.so_config.session_depth.value} is required.`));t.priceRangeMet(this.so_config)||(this.showSmartOffer=!1,t.debugLog("sMedia: Smart offer is not being shown due to price range requirement not matched."));this.bgFileUrl.length>t.apiHost.length+4||!t.isEmptyString(this.so_config.imgOrVideo.video.url)||(this.showSmartOffer=!1,t.debugLog("sMedia: Smart offer is not being shown due URL for 'smart_offer_image' or 'smart_offer_video' is missing."));const d=t.getTimeLimit(this.so_config);console.log({soTimeLimit:d}),this.appendHtml(this.getHtml(o,a,n)),this.appendCss({dynamic:!1});const m=t=>{window.setTimeout((()=>{this.readyToShow=t}),5e3)};document.addEventListener("aiform.load",(()=>{this.readyToShow=!1})),document.addEventListener("aiform.close",(()=>m(!0))),document.addEventListener("aiform.complete",(()=>m(!0)));const p=setInterval((()=>{if(this.smartOfferReady&&(!this.video||this.soVideoReady)){clearInterval(p),this.appendCss({bgFileUrl:this.bgFileUrl,dynamic:!0}),this.readyToShow=!0;let e=null;if(this.video&&(this.readyToShow=!1,e=window.videojs("sm-lead-video",{techOrder:["youtube"],sources:[{type:"video/youtube",src:this.so_config.imgOrVideo.video.url}],youtube:{playsinline:1,modestbranding:1,autoplay:1}},(()=>{this.readyToShow=!0,e.play()})),e.on("firstplay",(()=>{e.muted(!0),e.pause()}))),this.so_config.show_cases.timer.active&&window.setTimeout(this.fireSmartOffer,d,l,e,!0),this.so_config.show_cases.onclick.active){const t=this,n=t.so_config.show_cases.onclick.selectors;n&&n.length&&n.forEach((n=>{this.unbindOnclickAttr(n);document.querySelectorAll(n).forEach((n=>{n.addEventListener("click",(function(n){n.preventDefault(),n.stopPropagation(),t.fireSmartOffer(l,e)}))}))}))}if(this.so_config.exit_intent_popup){const n=(n,i)=>{t.debugLog(`sMedia: Exit intent discovered and SO fired for event ==> '${i}'`),n.preventDefault(),n.stopPropagation(),this.fireSmartOffer(l,e)};[].forEach((t=>{document.addEventListener(t,(e=>{this.smartOfferShown||n(e,t)}),{once:!0})})),document.addEventListener("mousemove",(t=>{!this.smartOfferShown&&t.clientY<=0&&n(t,"mousemove")}),!1)}}}),500);if(l){t.debugLog(`sMedia: Smart offer is enabled for this page in config ==> '${this.so_config.name}' and hence other configs will be ignored in this page.`);break}}}unbindOnclickAttr(e){t.dom.find(e).each((function(n){if(n){const i=n.cloneNode();for(;n.firstChild;)i.appendChild(n.firstChild);n.parentNode.replaceChild(i,n);const o=t.dom.find(e).attr("onclick");void 0!==o&&o&&(t.dom.find(e).attr("smedia-click-was",o),t.dom.find(e).removeAttr("onclick"),console.log("kicked out events"))}})),t.dom.find(e).unbind("click")}getDropDown(t){t.option.sort();let e=`<option class="sm-dropdown-option" value="" disabled selected>${t.placeholder}</option>`;t.option.forEach((t=>{e+=`<option value="${t}" class="sm-dropdown-option">${t}</option>`}));return`<div class="${this.video?"sm-col sm-col-extra-form":"sm-row"}">\n\t\t\t\t${this.video?"":`<label for="sm-fifth">${t.text}</label>`}\n\t\t\t\t<select class="sm-fifth-dropdown placeholder"\n\t\t\t\t${this.video?'style="padding-top: 2px !important; padding-bottom: 2px !important;"':'style="line-height: normal !important"'}\n\t\t\t\tname="fifth" id="sm-fifth"\n\t\t\t\t${t.required?"required":""}>\n\t\t\t\t\t${e}\n\t\t\t\t</select>\n\t\t\t</div>`}getHtml(e,n,i){const o=this.so_config.extraForm.fourth.show||this.so_config.extraForm.fifth.show,s=o||this.thisIsResume&&!o,a=this.so_config.basicForm.first,r=this.so_config.basicForm.second,c=this.so_config.basicForm.third,l=n?`${n.year} ${n.make} ${n.model}`.replaceAll("undefined","").trim().ucwords():"",d=t.Cookie.get("__utmzz"),m=this.so_config.extraForm.fourth,p=m.show?`<div class="${this.video?"sm-col sm-col-extra-form":"sm-row"}">\n\t\t\t\t${this.video?"":`<label for="sm-fourth">${m.text}</label>`}\n\t\t\t\t<input type="text" id="sm-fourth" class="${this.video?"ibm-font":""} sm-text smart-offer-input-field" name="fourth"\n\t\t\t\tvalue="${m.value.current_vdp?l:""}"\n\t\t\t\tplaceholder="${m.value.placeholder}"\n\t\t\t\t${m.required?"required":""}>\n\t\t\t</div>`:"",h=this.so_config.extraForm.fifth,g=h.show?"dropdown"==h.type&&h.option.length?this.getDropDown(h):`<div class="${this.video?"sm-col sm-col-extra-form":"sm-row"}">\n\t\t\t\t${this.video?"":`<label for="sm-fifth">${h.text}</label>`}\n\t\t\t\t<input type="${h.type}" id="sm-fifth" class="${this.video?"ibm-font":""} sm-${h.type} smart-offer-input-field" name="fifth"\n\t\t\t\tvalue="" placeholder="${h.placeholder}" ${h.required?"required":""}>\n\t\t\t</div>`:"",u=this.thisIsResume?`<div class="sm-row">\n\t\t\t\t<label for="sm-resume">${this.so_config.extraForm.resume.text}</label>\n\t\t\t\t<input type="file" id="sm-resume" name="sm-resume" class="sm-resume sm-file smart-offer-input-field" required\n\t\t\t\taccept="image/jpeg image/png image/jpg application/pdf application/msword application/vnd.openxmlformats-officedocument.wordprocessingml.document">\n\t\t\t\t<sub class="resume-declaration">Please upload doc, docx, pdf, jpg or png file only with max size 5 MB<sub>\n\t\t\t</div>`:"",f=`<div class="sm-row">\n\t\t\t\t<label for="sm-first">${a.label}</label>\n\t\t\t\t<input type="${a.type}" id="sm-first" class="sm-${a.type} smart-offer-input-field" name="first" placeholder="${a.placeholder}" value="" ${a.required?"required":""}>\n\t\t\t</div>\n\t\t\t<div class="sm-row">\n\t\t\t\t<label for="sm-second">${r.label}</label>\n\t\t\t\t<input type="${r.type}" id="sm-second" class="sm-${r.type} smart-offer-input-field" name="second" placeholder="${r.placeholder}" value="" ${r.required?"required":""}>\n\t\t\t</div>\n\t\t\t<div class="sm-row">\n\t\t\t\t<label for="sm-third">${c.label}</label>\n\t\t\t\t<input type="${c.type}" id="sm-third" class="sm-${c.type} smart-offer-input-field" name="third" placeholder="${c.placeholder}" value="" ${c.required?"required":""}>\n\t\t\t</div>\n\t\t\t${p}\n\t\t\t${g}\n\t\t\t${u}\n\t\t\t<div class="sm-row">\n\t\t\t\t<button class="sm-lead-submit-btn">${this.so_config.buttonText.toUpperCase()}</button>\n\t\t\t</div>`,_=`<div class="sm-row">\n\t\t\t\t<div class="sm-col">\n\t\t\t\t\t<input type="${a.type}" id="sm-first" class="ibm-font sm-${a.type} smart-offer-input-field" name="first" placeholder="${a.placeholder}" value="" ${a.required?"required":""}>\n\t\t\t\t</div>\n\t\t\t\t<div class="sm-col">\n\t\t\t\t\t<input type="${r.type}" id="sm-second" class="ibm-font sm-${r.type} smart-offer-input-field" name="second" placeholder="${r.placeholder}" value="" ${r.required?"required":""}>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<br class="video-form-break">\n\t\t\t<div class="sm-row">\n\t\t\t\t<div class="sm-col">\n\t\t\t\t\t<input type="${c.type}" id="sm-third" class="ibm-font sm-${c.type} smart-offer-input-field" name="third" placeholder="${c.placeholder}" value="" ${c.required?"required":""}>\n\t\t\t\t</div>\n\t\t\t\t<div class="sm-col">\n\t\t\t\t\t<button class="sm-lead-video-submit-btn sm-lead-submit-btn">${this.so_config.buttonText.toUpperCase()}</button>\n\t\t\t\t</div>\n\t\t\t</div>`,b=`<div class="sm-row">\n\t\t\t\t<div class="sm-col sm-col-extra-form">\n\t\t\t\t\t<input type="${a.type}" id="sm-first" class="ibm-font sm-${a.type} smart-offer-input-field" name="first" placeholder="${a.placeholder}" value="" ${a.required?"required":""}>\n\t\t\t\t</div>\n\t\t\t\t<div class="sm-col sm-col-extra-form">\n\t\t\t\t\t<input type="${r.type}" id="sm-second" class="ibm-font sm-${r.type} smart-offer-input-field" name="second" placeholder="${r.placeholder}" value="" ${r.required?"required":""}>\n\t\t\t\t</div>\n\t\t\t\t<div class="sm-col sm-col-extra-form">\n\t\t\t\t\t<input type="${c.type}" id="sm-third" class="ibm-font sm-${c.type} smart-offer-input-field" name="third" placeholder="${c.placeholder}" value="" ${c.required?"required":""}>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<br class="video-form-break">\n\t\t\t<div class="sm-row">\n\t\t\t\t${p}\n\t\t\t\t${g}\n\t\t\t\t<div class="sm-col sm-col-extra-form">\n\t\t\t\t\t<button class="sm-lead-submit-btn sm-lead-video-submit-btn">${this.so_config.buttonText.toUpperCase()}</button>\n\t\t\t\t</div>\n\t\t\t</div>`,v=this.so_config.disclaimer&&this.so_config.disclaimer.length?`<div class="sm-disclaimer" id= "sm-disclaimer">\n\t\t\t\t<i>*${this.so_config.disclaimer}</i>\n\t\t\t</div>`:"",y=`<div class="so-hidden-inputs" id="so-hidden-inputs">\n\t\t\t\t<input type="hidden" name="dealership" id="dealership" value="${e.cron||""}">\n\t\t\t\t<input type="hidden" name="stock_type" id="stock_type" value="${n.stock_type||""}">\n\t\t\t\t<input type="hidden" name="year" id="year" value="${n.year||""}">\n\t\t\t\t<input type="hidden" name="make" id="make" value="${n.make||""}">\n\t\t\t\t<input type="hidden" name="model" id="model" value="${n.model||""}">\n\t\t\t\t<input type="hidden" name="trim" id="trim" value="${n.trim||""}">\n\t\t\t\t<input type="hidden" name="title" id="title" value="${n.title||l}">\n\t\t\t\t<input type="hidden" name="url" id="url" value="${n.url||window.location}">\n\t\t\t\t<input type="hidden" name="stock_number" id="stock_number" value="${n.stock_number||""}">\n\t\t\t\t<input type="hidden" name="vin" id="vin" value="${n.vin||""}">\n\t\t\t\t<input type="hidden" name="svin" id="svin" value="${n.svin||""}">\n\t\t\t\t<input type="hidden" name="odometer" id="odometer" value="${n.kilometers||""}">\n\t\t\t\t<input type="hidden" name="kilometres" id="kilometres" value="${n.kilometers||""}">\n\t\t\t\t<input type="hidden" name="engine" id="engine" value="${n.engine||""}">\n\t\t\t\t<input type="hidden" name="transmission" id="transmission" value="${n.transmission||""}">\n\t\t\t\t<input type="hidden" name="body_style" id="body_style" value="${n.body_style||""}">\n\t\t\t\t<input type="hidden" name="doors" id="doors" value="${n.doors||""}">\n\t\t\t\t<input type="hidden" name="smedia_smart_lead_uuid" id="smedia_smart_lead_uuid" value="${i.uniqueUserId||""}">\n\t\t\t\t<input type="hidden" name="session_id" id="session_id" value="${i.sessionId||""}">\n\t\t\t\t<input type="hidden" name="referrer" id="referrer" value="${document.referrer||window.location.href}">\n\t\t\t\t<input type="hidden" name="mongo_dealer_id" id="mongo_dealer_id" value="${e.mongo_dealer_info.id||""}">\n\t\t\t\t<input type="hidden" name="template" id="template" value="${this.so_config.template||""}">\n\t\t\t\t<input type="hidden" name="config_id" id="config_id" value="${this.so_config.id||""}">\n\t\t\t\t<input type="hidden" name="config_name" id="config_name" value="${this.so_config.name||""}">\n\t\t\t\t<input type="hidden" name="debug" id="debug" value="${this.debug||""}">\n\t\t\t\t<input type="hidden" name="smart-offer-traffic-source" id="smart-offer-traffic-source" value="${d||""}">\n\t\t\t</div>`,w=`${this.video?s?b:_:f}`,x=`<div id="sm-form-container">\n\t\t\t\t<form id="sm-lead-form" name="sm-lead-form" method="post" ${this.thisIsResume?'enctype="multipart/form-data"':""}>\n\t\t\t\t\t${y}\n\t\t\t\t\t${w}\n\t\t\t\t\t${v}\n\t\t\t\t</form>\n\t\t\t</div>`,k=`<div class="sm-row">\n\t\t\t\t<div id="sm-loading-spinner" class="sm-loading-spinner">\n\t\t\t\t\t<img src="${t.apiHost}/adwords3/templates/balls.svg"/>\n\t\t\t\t</div>\n\t\t\t</div>`,$=this.video&&this.so_config.imgOrVideo.video&&this.so_config.imgOrVideo.video.title?`<div class="sm-lead-collect-form-video-title ibm-font">${this.so_config.imgOrVideo.video.title}</div>`:"",C=this.video&&this.so_config.imgOrVideo.video&&this.so_config.imgOrVideo.video.description?`<div class="sm-lead-collect-form-video-desc ibm-font">${this.so_config.imgOrVideo.video.description}</div>`:"",S=this.video?"":'<div class="sm-lead-collect-form-image"></div>',I=`<div class="sm-lead-collect-form-body">\n\t\t\t\t${x}\n\t\t\t\t${k}\n\t\t\t</div>`,D=`<div id="sm-memo-heading-div" class="">\n\t\t\t\t<h3 class="sm-memo-h3">${this.so_config.memoSetting.heading.text}</h3>\n\t\t\t</div>`,E=`<div id="sm-memo-body-div" class="sm-memo-body-div">\n\t\t\t\t<p class="sm-memo-body-text">${this.so_config.memoSetting.body.text}</p>\n\t\t\t</div>`,P=`<div id="sm-memo-submit-btn-div" class="sm-memo-submit-btn-div">\n\t\t\t\t<button id="sm-memo-submit-btn" class="sm-lead-submit-btn">${this.so_config.memoSetting.button.text}</button>\n\t\t\t</div>`,T=`<div id="sm-form-container">\n\t\t\t\t<form id="sm-lead-form" method="post" action="${this.leadFormUrl}">\n\t\t\t\t\t${y}\n\t\t\t\t</form>\n\t\t\t\t${this.so_config.memoSetting.heading.show?D:""}\n\t\t\t\t${this.so_config.memoSetting.body.show?E:""}\n\t\t\t\t${this.so_config.memoSetting.button.show?P:""}\n\t\t\t</div>\n\t\t\t`,M=`<div id="smedia-overlay" style="display:none"></div>\n\t\t\t<div id="smedia-lead-collect-form" class="sm-lead-collect-form so-invisible">\n\t\t\t\t<button class="sm-close-btn" id="sm-close-btn"></button>\n\t\t\t\t<div class="sm-lead-collect-form-wrap">\n\t\t\t\t\t${S}\n\t\t\t\t\t${this.thisIsMemo?T:I}\n\t\t\t\t</div>\n\t\t\t</div>`,A=document.body.clientWidth>=640?640:document.body.clientWidth-32,L=A*(9/16),O=`<div id="smedia-overlay" style="display:none"></div>\n\t\t\t<div id="smedia-lead-collect-form" class="sm-lead-collect-form so-invisible">\n\t\t\t\t<button class="sm-close-btn" id="sm-close-btn"></button>\n\t\t\t\t<div class="sm-lead-collect-form-wrap">\n\t\t\t\t\t<div class="form-true">\n\t\t\t\t\t\t<div class="sm-lead-collect-form-video">\n\t\t\t\t\t\t\t<video id="sm-lead-video" class="video-js vjs-default-skin" autobuffer="true" autoplay controlslist="nodownload" muted controls width="${A}" height="${L}"></video>\n\t\t\t\t\t\t\t${$}\n\t\t\t\t\t\t\t${C}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="sm-lead-collect-form-body ${this.so_config.imgOrVideo.video.show_form?"":"sm-hidden"}">\n\t\t\t\t\t\t\t${x}\n\t\t\t\t\t\t\t${k}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>`,R=`<div id="smedia-overlay" style="display:none"></div>\n\t\t\t<div id="smedia-lead-collect-form" class="sm-lead-collect-form so-invisible">\n\t\t\t\t<button class="sm-close-btn" id="sm-close-btn"></button>\n\t\t\t\t<div class="sm-lead-collect-form-wrap">\n\t\t\t\t\t<div class="form-true">\n\t\t\t\t\t\t<div class="sm-lead-collect-form-video">\n\t\t\t\t\t\t\t<video id="sm-lead-video" class="video-js vjs-default-skin" autobuffer="true" autoplay controlslist="nodownload" muted controls width="${A}" height="${L}"></video>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="sm-lead-collect-form-body>\n\t\t\t\t\t\t\t<form id="sm-lead-form" method="post" action="${this.leadFormUrl}">\n\t\t\t\t\t\t\t\t${y}\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t${this.so_config.memoSetting.heading.show?D:""}\n\t\t\t\t\t\t\t${this.so_config.memoSetting.body.show?E:""}\n\t\t\t\t\t\t\t${this.so_config.memoSetting.button.show?P:""}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>`;return this.video?this.thisIsMemoVideo?R:O:M}appendHtml(e){if(this.video){const n=document.getElementsByTagName("head")[0],i="https://vjs.zencdn.net/7.8.4/video-js.css",o="https://vjs.zencdn.net/7.8.4/video.js",s="https://cdn.jsdelivr.net/gh/videojs/videojs-youtube/dist/Youtube.min.js";t.DomInstaller.InstallStyle(i,n,(()=>{t.DomInstaller.InstallScript(o,n,(()=>{t.DomInstaller.InstallScript(s,n,(()=>{t.dom.find("body").append(e),this.soVideoReady=!0}),!1)}),!1)}))}else t.dom.find("body").append(e)}appendCss(e){const n=this.so_config.extraForm.fourth.show||this.so_config.extraForm.fifth.show,i=n||this.thisIsResume&&!n,o=(this.so_config.extraForm.fourth.show||this.thisIsResume)&&this.so_config.extraForm.fifth.show;let s="";const a=this.so_config.color.button_color[0],r=this.so_config.color.button_color[1];this.so_config.color.button_color.length>1&&(s=`background-image: -webkit-linear-gradient(top, ${a}, ${r});\n\t\t\t\tbackground-image: -moz-linear-gradient(top, ${a}, ${r});\n\t\t\t\tbackground-image: -ms-linear-gradient(top, ${a}, ${r});\n\t\t\t\tbackground-image: -o-linear-gradient(top, ${a}, ${r});\n\t\t\t\tbackground-image: linear-gradient(to bottom, ${a}, ${r});`);let c="";const l=this.so_config.color.button_color_hover[0],d=this.so_config.color.button_color_hover[1];this.so_config.color.button_color_hover.length>1&&(c=`background-image: -webkit-linear-gradient(top, ${l}, ${d});\n\t\t\t\tbackground-image: -moz-linear-gradient(top, ${l}, ${d});\n\t\t\t\tbackground-image: -ms-linear-gradient(top, ${l}, ${d});\n\t\t\t\tbackground-image: -o-linear-gradient(top, ${l}, ${d});\n\t\t\t\tbackground-image: linear-gradient(to bottom, ${l}, ${d});`);let m="";const p=this.so_config.color.button_color_active[0],h=this.so_config.color.button_color_active[1];this.so_config.color.button_color_active.length>1&&(m=`background-image: -webkit-linear-gradient(top, ${p}, ${h});\n\t\t\t\tbackground-image: -moz-linear-gradient(top, ${p}, ${h});\n\t\t\t\tbackground-image: -ms-linear-gradient(top, ${p}, ${h});\n\t\t\t\tbackground-image: -o-linear-gradient(top, ${p}, ${h});\n\t\t\t\tbackground-image: linear-gradient(to bottom, ${p}, ${h});`);const g="autoparkbarrie"==t.Context.DomainConfig.cron?"40px":"0px";let u=e.dynamic?`.sm-lead-collect-form {\n\t\t\t\t\tbackground-color: ${this.so_config.color.bg_color};\n\t\t\t\t\t${this.video?"max-width: calc( 100vw - 32px );":""}\n\t\t\t\t}\n\t\t\t\t.sm-lead-collect-form-image {\n\t\t\t\t\tbackground-image: url('${e.bgFileUrl}');\n\t\t\t\t}\n\t\t\t\t${this.video?`.sm-row {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: row;\n\t\t\t\t\t\tmargin-left: -8px;\n\t\t\t\t\t\twidth: calc( 100% + 16px );\n\t\t\t\t\t}\n\t\t\t\t\t#sm-lead-form {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\tpadding: 24px 32px;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-video-desc {\n\t\t\t\t\t\tpadding: 16px 32px;\n\t\t\t\t\t\tbackground-color: ${this.so_config.color.bg_color};\n\t\t\t\t\t\tcolor: ${this.so_config.color.text_color};\n\t\t\t\t\t\tfont-size: 11px;\n\t\t\t\t\t\tline-height: 13px;\n\t\t\t\t\t\tfont-style: normal;\n\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-video-title {\n\t\t\t\t\t\tcolor: #162433;\n\t\t\t\t\t\tfont-size: 24px;\n\t\t\t\t\t\tpadding: 24px 32px 0 32px;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\tfont-style: normal;\n\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t\tline-height: 31px;\n\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-row .sm-col {\n\t\t\t\t\t\twidth: 50%;\n\t\t\t\t\t\tpadding: 0 8px\n\t\t\t\t\t}\n\t\t\t\t\t.sm-row .sm-col.sm-col-extra-form {\n\t\t\t\t\t\twidth: 33.33%;\n\t\t\t\t\t\tpadding: 0 8px\n\t\t\t\t\t}\n\t\t\t\t\t.video-js {\n\t\t\t\t\t\twidth: 100% !important;\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\tpadding-bottom: 56.25% !important; /* 16:9 */\n\t\t\t\t\t\theight: 0 !important;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-video .video-js .vjs-big-play-button {\n\t\t\t\t\t\ttop: 50%;\n\t\t\t\t\t\tleft: 50%;\n\t\t\t\t\t\ttransform-origin: 50% 50%;\n\t\t\t\t\t\ttransform: translate(-50%, -50%);\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-body form input,\n\t\t\t\t\t.sm-lead-collect-form-body form select {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\t\tborder: none;\n\t\t\t\t\t\tbackground: #ffffff;\n\t\t\t\t\t\tline-height: 52px;\n\t\t\t\t\t\tpadding: 0 16px;\n\t\t\t\t\t\tcolor: #6A6D79;\n\t\t\t\t\t\tfont-style: normal;\n\t\t\t\t\t\tfont-weight: 400;\n\t\t\t\t\t\tfont-size: 24px;\n\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t}`:`.sm-row {\n\t\t\t\t\t\tmargin: ${this.thisIsMemo?"5px 0px":"15px 0px"};\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-body {\n\t\t\t\t\t\twidth: 401px;\n\t\t\t\t\t\theight: 450px;\n\t\t\t\t\t\tfloat: left;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-body form {\n\t\t\t\t\t\twidth: 87% !important;\n\t\t\t\t\t\tmargin: ${i?o?"11px 0px 0px 27px !important":"20px 27px !important":"27px !important"};\n\t\t\t\t\t}`}\n\t\t\t\t.sm-lead-collect-form-body form label {\n\t\t\t\t\tcolor: ${this.so_config.color.text_color};\n\t\t\t\t}\n\t\t\t\t.sm-lead-collect-form-body form input,\n\t\t\t\t.sm-lead-collect-form-body form select {\n\t\t\t\t\tborder: solid ${this.so_config.color.border_color} 2px;\n\t\t\t\t\tcolor: \t#28282B !important; /* MATTE BLACK */\n\t\t\t\t}\n\t\t\t\t.sm-lead-submit-btn {\n\t\t\t\t\tbackground: ${this.so_config.color.button_color[0]};\n\t\t\t\t\t${s}\n\t\t\t\t\tcolor: ${this.so_config.color.button_text_color};\n\t\t\t\t\tborder: solid ${this.so_config.color.border_color} 2px;\n\t\t\t\t\t${this.thisIsResume?"margin: 0 !important;":""}\n\t\t\t\t\t${i?"font-size: 14px;":""}\n\t\t\t\t}\n\t\t\t\t.sm-lead-submit-btn:hover {\n\t\t\t\t\tbackground: ${this.so_config.color.button_color_hover[0]};\n\t\t\t\t\t${c}\n\t\t\t\t}\n\t\t\t\t.sm-lead-submit-btn:active {\n\t\t\t\t\tbackground: ${this.so_config.color.button_color_active[0]};\n\t\t\t\t\t${m}\n\t\t\t\t}\n\t\t\t\t.sm-lead-submit-btn:disabled {\n\t\t\t\t\tbackground: ${this.so_config.color.button_color_hover[0]};\n\t\t\t\t\t${c}\n\t\t\t\t}\n\t\t\t\t.sm-fifth-dropdown {\n\t\t\t\t\tbackground-image: none;\n\t\t\t\t\tbackground-origin: unset;\n\t\t\t\t\tbackground-position: unset;\n\t\t\t\t\tbackground-repeat: unset;\n\t\t\t\t\tbackground-size: unset;\n\t\t\t\t\tline-height: normal !important;\n\t\t\t\t}\n\t\t\t\t.sm-dropdown-option {\n\t\t\t\t}\n\t\t\t\t.sm-fifth-dropdown-resume {\n\t\t\t\t\t/* padding: 0 10px !important; */\n\t\t\t\t}\n\t\t\t\t.sm-dropdown-option-resume {\n\t\t\t\t}\n\n\n\n\n\t\t\t\t@media (orientation: landscape) and (min-width: 900px) {\n\n\t\t\t\t}\n\n\t\t\t\t@media (orientation: landscape) and (max-width: 900px) {\n\t\t\t\t\t${this.video?".sm-lead-collect-form-wrap > div {\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-video {\n\t\t\t\t\t\tflex-grow: 1;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-video-desc {\n\t\t\t\t\t\tflex-grow: 1;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-body {\n\t\t\t\t\t\twidth: 40%;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-row {\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-row .sm-col {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\tmargin: 10px 0;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-row .sm-col.sm-col-extra-form {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\tmargin: 10px 0;\n\t\t\t\t\t}":""}\n\t\t\t\t}\n\n\t\t\t\t@media screen and (max-width: 667px) {\n\t\t\t\t\t${this.video?`#sm-lead-form,\n\t\t\t\t\t.sm-lead-collect-form-video-desc,\n\t\t\t\t\t.sm-lead-collect-form-video-title {\n\t\t\t\t\t\tpadding: 24px;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-video-title {\n\t\t\t\t\t\tpadding-bottom: 0;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-row {\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-row .sm-col {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\tmargin: 10px 0;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-row .sm-col.sm-col-extra-form {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\tmargin: 10px 0;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-video-desc {\n\t\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-video-title {\n\t\t\t\t\t\tfont-size: 24px;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form {\n\t\t\t\t\t\twidth: calc( 100% - 32px );\n\t\t\t\t\t\theight: auto;\n\t\t\t\t\t\tpadding-bottom: ${g};\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-body form input,\n\t\t\t\t\t.sm-lead-collect-form-body form button,\n\t\t\t\t\t.sm-lead-collect-form-body form select {\n\t\t\t\t\t\tfont-size: ${o?"14px":"18px"};\n\t\t\t\t\t\tline-height: 42px;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-body form button {\n\t\t\t\t\t\tline-height: 38px;\n\t\t\t\t\t}`:""}\n\t\t\t\t}\n\n\t\t\t\t@media (orientation: landscape) and (max-height: 450px) {\n\t\t\t\t\t${this.video?".sm-lead-collect-form-body form input,\n\t\t\t\t\t.sm-lead-collect-form-body form button,\n\t\t\t\t\t.sm-lead-collect-form-body form select {\n\t\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\t\tline-height: 36px;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-body form button{\n\t\t\t\t\t\tline-height: 32px;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-row .sm-col {\n\t\t\t\t\t\tmargin: 6px 0;\n\t\t\t\t\t}":""}\n\t\t\t\t}\n\n\t\t\t\t@media screen and (max-width: 449px) {\n\t\t\t\t\t.sm-lead-collect-form {\n\t\t\t\t\t\tpadding-bottom: ${g};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t@media (orientation: portrait) and (max-width: 400px) {\n\t\t\t\t\t${this.video?".sm-lead-collect-form-body form input,\n\t\t\t\t\t.sm-lead-collect-form-body form button,\n\t\t\t\t\t.sm-lead-collect-form-body form select {\n\t\t\t\t\t\tline-height: 30px;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-row .sm-col {\n\t\t\t\t\t\tmargin: 10px 0;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-video-title {\n\t\t\t\t\t\tline-height: 1.2;\n\t\t\t\t\t}":""}\n\t\t\t\t}`:"";u+=e.dynamic?"":`.so-invisible {\n\t\t\t\t\tleft: -100% !important;\n\t\t\t\t\topacity: 0 !important;\n\t\t\t\t\tz-index: -10000 !important;\n\t\t\t\t}\n\t\t\t\t.so-hidden-inputs {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t\t#smedia-overlay {\n\t\t\t\t\tposition:fixed;\n\t\t\t\t\twidth:100%;\n\t\t\t\t\theight:100%;\n\t\t\t\t\ttop: 0px;\n\t\t\t\t\tleft: 0px;\n\t\t\t\t\tdisplay: none;\n\t\t\t\t\tz-index: 4999999999;\n\t\t\t\t\tbackground: #000000;\n\t\t\t\t\topacity: 0.5;\n\t\t\t\t}\n\t\t\t\t.sm-lead-collect-form {\n\t\t\t\t\tposition:fixed;\n\t\t\t\t\tfont-family: Helvetica !important;\n\t\t\t\t\tfont-size: ${o?"14px":"18px"};\n\t\t\t\t\twidth: 900px;\n\t\t\t\t\theight: auto;\n\t\t\t\t\ttop: 50%;\n\t\t\t\t\tleft: 50%;\n\t\t\t\t\tz-index: 5000000000;\n\t\t\t\t\tmax-height: 100%;\n\t\t\t\t\ttransform-origin: 50% 50%;\n\t\t\t\t\ttransform: translate(-50%, -50%);\n\t\t\t\t\tletter-spacing: normal !important;\n\t\t\t\t}\n\t\t\t\t.sm-lead-collect-form-wrap {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tmax-height: calc( 100vh - 32px );\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t}\n\t\t\t\t.sm-lead-collect-form-image {\n\t\t\t\t\twidth: 499px;\n\t\t\t\t\theight: 450px;\n\t\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\t\tbackground-position: center center;\n\t\t\t\t\tfloat: left;\n\t\t\t\t}\n\t\t\t\t.sm-lead-collect-form-body form input,\n\t\t\t\t.sm-lead-collect-form-body form select,\n\t\t\t\t.sm-lead-collect-form-body form button,\n\t\t\t\t.sm-lead-collect-form-body form label {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\theight: auto !important;\n\t\t\t\t\tborder-radius: 7px;\n\t\t\t\t}\n\t\t\t\t.sm-lead-collect-form-body form label {\n\t\t\t\t\tfont-size: ${o?"14px":"16px"};\n\t\t\t\t\tmargin: 0 !important;\n\t\t\t\t\tpadding: 0 !important;\n\t\t\t\t}\n\t\t\t\t.sm-lead-collect-form-body form input,\n\t\t\t\t.sm-lead-collect-form-body form select {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tpadding: 0px 10px !important;\n\t\t\t\t\tline-height: 36px !important;\n\t\t\t\t\tmargin: 10px 0px;\n\t\t\t\t\tbackground-color: #ffffff;\n\t\t\t\t}\n\t\t\t\t.sm-lead-collect-form-body form select {\n\t\t\t\t\tpadding: 12px;\n\t\t\t\t}\n\t\t\t\t.sm-lead-submit-btn {\n\t\t\t\t\ttext-decoration: none;\n\t\t\t\t\tline-height: 36px !important;\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\tmargin-top: 15px;\n\t\t\t\t}\n\t\t\t\t.sm-lead-submit-btn:hover {\n\t\t\t\t\ttext-decoration: none;\n\t\t\t\t}\n\t\t\t\t.sm-lead-submit-btn:active {\n\t\t\t\t\ttext-decoration: none;\n\t\t\t\t}\n\t\t\t\t.sm-lead-submit-btn:disabled {\n\t\t\t\t\ttext-decoration: none;\n\t\t\t\t}\n\t\t\t\t.sm-close-btn {\n\t\t\t\t\twidth: 39px;\n\t\t\t\t\theight: 39px;\n\t\t\t\t\tline-height: 39px;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\tposition: absolute !important;\n\t\t\t\t\tbackground-color: #000;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tfont-size: 23px;\n\t\t\t\t\tfont-style: normal;\n\t\t\t\t\tcolor: #fff;\n\t\t\t\t\tfont-family: Helvetica;\n\t\t\t\t\ttop: -20px;\n\t\t\t\t\tright: -20px;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tborder-radius: 100%;\n\t\t\t\t\tborder: 1px solid #fff;\n\t\t\t\t\tpadding: 0;\n\t\t\t\t\tz-index: 9999;\n\t\t\t\t}\n\t\t\t\t.sm-close-btn::after {\n\t\t\t\t  content: "X";\n\t\t\t\t  text-transform: uppercase;\n\t\t\t\t}\n\t\t\t\t.sm-close-btn:hover {\n\t\t\t\t  text-decoration: none;\n\t\t\t\t}\n\t\t\t\t.sm-loading-spinner {\n\t\t\t\t\twidth: 36px;\n\t\t\t\t\theight: 36px;\n\t\t\t\t\tmargin: -10px auto;\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t\t.sm-lead-video-submit-btn {\n\t\t\t\t\tmargin-top: 3px !important;\n\t\t\t\t\tline-height: 32px !important;\n\t\t\t\t\tpadding: ${o?"0 !important":"2px 0 !important"};\n\t\t\t\t}\n\t\t\t\t.sm-hidden {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t\t.sm-static-lead-form {\n\t\t\t\t\tz-index: 0 !important;\n\t\t\t\t\tposition: static;\n\t\t\t\t\ttransform: none;\n\t\t\t\t}\n\n\n\n\t\t\t\t/* DISCLAIMER bothExtraForm eitherExtraForm */\n\t\t\t\t.sm-disclaimer {\n\t\t\t\t\tfont-size: 8px;\n\t\t\t\t\tcolor: ${this.so_config.color.disclaimer_color};\n\t\t\t\t\tfont-weight: normal;\n\t\t\t\t\tline-height: 80%;\n\t\t\t\t\tmargin-top: 5px;\n\t\t\t\t\tpadding: 2px;\n\t\t\t\t}\n\n\n\t\t\t\t/* RESUME */\n\t\t\t\t.sm-resume {\n\t\t\t\t}\n\n\t\t\t\t.resume-declaration {\n\t\t\t\t\tpadding: 0;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tcolor: ${this.so_config.color.text_color};\n\t\t\t\t\tbottom: 0;\n\t\t\t\t\ttop: -10px;\n\t\t\t\t\tfont-style: italic;\n\t\t\t\t\tfont-size: 10px;\n\t\t\t\t}\n\n\n\t\t\t\t/* SMART MEMO CSS */\n\t\t\t\t#sm-memo-heading-div {\n\t\t\t\t\ttext-align: center;\n\t\t\t\t}\n\n\t\t\t\t.sm-memo-h3 {\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tpadding: 18px 32px 0 32px;\n\t\t\t\t\tfont-family: Helvetica;\n\t\t\t\t\tfont-size: 22px;\n\t\t\t\t\tcolor: ${this.so_config.color.heading_text_color};\n\t\t\t\t}\n\n\t\t\t\t.sm-memo-body-div {\n\t\t\t\t\ttext-align: justify;\n\t\t\t\t\tfont-size: 11px;\n\t\t\t\t\tline-height: 13px;\n\t\t\t\t\tpadding: 10px 30px;\n\t\t\t\t\tfont-style: normal;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\tline-break: auto;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t}\n\n\t\t\t\t.sm-memo-body-text {\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tletter-spacing: normal;\n\t\t\t\t\tcolor: ${this.so_config.color.body_text_color};\n\t\t\t\t}\n\n\t\t\t\t.sm-memo-submit-btn-div {\n\t\t\t\t\tmargin: 0 !important;\n\t\t\t\t\tborder-bottom-left-radius: 10px;\n\t\t\t\t\tborder-bottom-right-radius: 10px;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\talign-items: center;\n\t\t\t\t}\n\n\t\t\t\t.sm-first {\n\t\t\t\t}\n\t\t\t\t.sm-second {\n\t\t\t\t}\n\t\t\t\t.sm-third {\n\t\t\t\t}\n\t\t\t\t.sm-fourth {\n\t\t\t\t}\n\t\t\t\t.sm-fifth {\n\t\t\t\t}\n\t\t\t\t.smart-offer-input-field {\n\t\t\t\t}\n\n\t\t\t\t#sm-memo-submit-btn {\n\t\t\t\t\tposition: relative;\n\t\t\t\t\theight: 44px;\n\t\t\t\t\tmargin: 8px;\n\t\t\t\t\tpadding: 0 20px;\n\t\t\t\t\tborder-radius: 10px;\n\t\t\t\t\tfont-size: 18px;\n\t\t\t\t\tmin-width: 150px;\n\t\t\t\t}\n\n\n\n\t\t\t\t@media screen and (min-width: 901px) {\n\t\t\t\t\t.sm-lead-collect-form-wrap {\n\t\t\t\t\t\t${this.thisIsMemo||this.video?"display: block;":"display: flex;"}\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-body {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form {\n\t\t\t\t\t\t${this.thisIsMemo?"width: 499px;":""}\n\t\t\t\t\t}\n\n\t\t\t\t\t.sm-lead-collect-form-image {\n\t\t\t\t\t\t${this.thisIsMemo?"float: none;":""}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t@media screen and (min-width: 768px) and (max-width: 900px) {\n\t\t\t\t\t.sm-lead-collect-form-wrap {\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form {\n\t\t\t\t\t\twidth: 499px;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-body {\n\t\t\t\t\t\twidth: 499px !important;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-image {\n\t\t\t\t\t\tfloat: none;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t@media screen and (min-width: 450px) and (max-width: 767px) {\n\t\t\t\t\t.sm-lead-collect-form-wrap {\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form {\n\t\t\t\t\t\twidth: 499px;\n\t\t\t\t\t\theight: auto;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-body {\n\t\t\t\t\t\twidth: 499px !important;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-image {\n\t\t\t\t\t\tfloat: none;\n\t\t\t\t\t}\n\n\t\t\t\t\t${this.video?".sm-row {\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-row .sm-col {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t}\n\t\t\t\t\t.video-form-break {\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t}":""}\n\t\t\t\t}\n\n\t\t\t\t@media screen and (max-width: 449px) {\n\t\t\t\t\t.sm-lead-collect-form-wrap {\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-close-btn {\n\t\t\t\t\t\ttop: 5px;\n\t\t\t\t\t\tright: 5px;\n\t\t\t\t\t}\n\n\t\t\t\t\t#sm-form-container {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\tmax-width: 360px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.sm-lead-collect-form {\n\t\t\t\t\t\twidth: 96%;\n\t\t\t\t\t\tmax-width: 360px;\n\t\t\t\t\t\theight: auto;\n\t\t\t\t\t}\n\n\t\t\t\t\t.sm-lead-collect-form-image {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\tmax-width: 360px;\n\t\t\t\t\t\theight: 325px;\n\t\t\t\t\t\tbackground-size: 360px 325px;\n\t\t\t\t\t\tfloat: none;\n\t\t\t\t\t}\n\n\t\t\t\t\t.sm-lead-collect-form-body form input,\n\t\t\t\t\t.sm-lead-collect-form-body form select {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t}\n\n\n\n\n\t\t\t\t\t${this.video?".sm-row {\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-row .sm-col {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t}\n\t\t\t\t\t.video-form-break {\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t}":""}\n\t\t\t\t}`,i&&(u+=`.sm-row {\n\t\t\t\t\tmargin: 0px !important;\n\t\t\t\t\tpadding: 0px 1px !important;\n\t\t\t\t}\n\t\t\t\t.sm-lead-collect-form-body form input,\n\t\t\t\t.sm-lead-collect-form-body form select {\n\t\t\t\t\t${this.thisIsResume?"margin: 8px 0px !important":""};\n\t\t\t\t}`,u+=o?`.sm-lead-collect-form-body form input,\n\t\t\t\t\t.sm-lead-collect-form-body form select {\n\t\t\t\t\t\tmargin:3px 0px 9px 0px !important;\n\t\t\t\t\t\tline-height: 32px !important;\n\t\t\t\t\t}\n\t\t\t\t\t.sm-lead-collect-form-body form select {\n\t\t\t\t\t\t${this.video?"":"padding: 9px !important"};\n\t\t\t\t\t}`:".sm-lead-collect-form-body form select {\n\t\t\t\t\t\tpadding: 8px !important;\n\t\t\t\t\t}"),u+="input.smart-offer-input-field::-webkit-input-placeholder {\n\t\t\t\tcolor: #8c8c8c;\n\t\t\t\tfont-style: normal;\n\t\t\t\tfont-weight: normal;\n\t\t\t\tfont-size: 12px;\n\t\t\t}\n\t\t\tinput.smart-offer-input-field::-ms-input-placeholder {\n\t\t\t\tcolor: #8c8c8c;\n\t\t\t\tfont-style: normal;\n\t\t\t\tfont-weight: normal;\n\t\t\t\tfont-size: 12px;\n\t\t\t}\n\t\t\tinput.smart-offer-input-field::placeholder {\n\t\t\t\tcolor: #8c8c8c;\n\t\t\t\tfont-style: normal;\n\t\t\t\tfont-weight: normal;\n\t\t\t\tfont-size: 12px;\n\t\t\t}\n\t\t\t/* ::placeholder {\n\t\t\t\tcolor: #8c8c8c;\n\t\t\t\tfont-style: normal;\n\t\t\t\tfont-weight: normal;\n\t\t\t\tfont-size: 12px;\n\t\t\t} */\n\t\t\t.placeholder {\n\t\t\t\tcolor: #8c8c8c !important;\n\t\t\t\tfont-style: normal;\n\t\t\t\tfont-weight: normal !important;\n\t\t\t\t/* font-size: inherit; */\n\t\t\t\tfont-size: 12px;\n\t\t\t\tline-height: normal !important;\n\t\t\t}";const f=`<style id="smedia-smart-offer-style-${e.dynamic?"dynamic":"static"}">${u}</style>`;t.dom.find("body").append(f)}bindSmartMemoEvents(){t.dom.find("#sm-memo-submit-btn").click((()=>{window.open(this.so_config.memoSetting.button.redirect_url,"_blank"),this.smartOfferLead.submitMemoClick()}))}},t.Context.OnReady((()=>{e.smartOffer.Register()})),t.Context.OnClose((()=>{e.smartOffer.Unregister()}))}(t.Modules||(t.Modules={}))}(sMedia||(sMedia={})),function(t){!function(e){e.SmartOfferLead=class{constructor(e,n,i,o,s){this.form=null,this.initialized=!1,this.closeTimeoutID=null,this.initialForm=null,this.uniqueUserId=t.Context.Browser.uniqueUserId,this.cron=t.Context.DomainConfig.cron,this.sessionId=t.Context.Browser.sessionId,this.carDataParam=t.Context.PageData.car_data,this.defaultPayload={mongo_dealer_id:t.Context.DomainConfig.mongo_dealer_info.id||"",service:"smart-offer",uuid:this.uniqueUserId,session:this.sessionId,url:window.location.href,dealership:this.cron,browser:t.Context.BrowserName,template:"",smId:"",config_name:"",svin:this.carDataParam?this.carDataParam.svin:"",carInfo:{stock_type:this.carDataParam?this.carDataParam.stock_type:"",year:this.carDataParam?this.carDataParam.year:"",make:this.carDataParam?this.carDataParam.make:"",model:this.carDataParam?this.carDataParam.model:"",stock_no:this.carDataParam?this.carDataParam.stock_number:"",trim:this.carDataParam?this.carDataParam.trim:"",body_style:this.carDataParam?this.carDataParam.body_style:"",transmission:this.carDataParam?this.carDataParam.transmission:"",odo_status:this.carDataParam&&"new"==this.carDataParam.stock_type?"original":"unknown",odometer:this.carDataParam?this.carDataParam.kilometres:""}},this.so_config=e,this.sessionStorage=n,this.persistentStorage=i,this.leadFromUrl=o,this.storagePrefix=s,this.defaultPayload.template=this.so_config.template,this.defaultPayload.smId=this.so_config.id,this.defaultPayload.config_name=this.so_config.name}init(){const e=this;t.dom.find("#smedia-overlay").click((()=>{e.close(!0)})),t.dom.find("#sm-close-btn").click((()=>{e.close(!0)})),t.dom.find("#sm-lead-form").submit((function(n){n.preventDefault();const i=this;let o=!0;const s=t.getValueById("debug"),a=t.getValueById("referrer"),r=t.getValueById("smart-offer-traffic-source"),c=t.getValueById("sm-first"),l=t.getValueById("sm-second"),d=t.getValueById("sm-third"),m=e.so_config.basicForm,p={[m.first.type]:c,[m.second.type]:l,[m.third.type]:d},h=p.text,g=p.email,u=p.tel,f=t.getValueById("sm-fourth"),_=t.getValueById("sm-fifth");if(t.isEmptyString(h)&&(o=!1,document.getElementById("sm-first").value="",alert("Name is required.")),t.isEmptyString(_)){const t=e.so_config&&e.so_config.extraForm?e.so_config.extraForm.fifth:null;t&&t.show&&t.required&&"dropdown"==t.type&&(o=!1,alert(`'${t.text}' is required.`))}let b,v="application/json";if("Smart Resume"==e.so_config.template){e.leadFromUrl=e.leadFromUrl.replace("/new/","/new-resume/"),v="multipart/form-data";const t=new FormData;t.append("action","submit"),t.append("mongo_dealer_id",e.defaultPayload.mongo_dealer_id),t.append("uuid",e.uniqueUserId),t.append("session",e.sessionId),t.append("url",window.location.href),t.append("dealership",e.cron),t.append("referrer",a),t.append("trafficSource",r),t.append("template",e.defaultPayload.template),t.append("smId",e.defaultPayload.smId),t.append("config_name",e.defaultPayload.config_name),t.append("name",h),t.append("email",g),t.append("phone",u),t.append("fifth",_);const n=document.getElementById("sm-resume").files;if(n&&n[0]){const e=n[0],i=e.name,s=e.type;e.size>5e6&&(document.getElementById("sm-resume").value="",alert("File size larger than 5 mb"),o=!1);["image/jpeg","image/png","image/jpg","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(s)||(document.getElementById("sm-resume").value="",alert("Please upload doc, pdf, jpg or png file only with max size 5 MB"),o=!1),t.append("resume",e,i)}b=t}else{const t={action:"submit",debug:s,referrer:a,name:h,email:g,phone:u,trafficSource:r,fourth:f,fifth:_};b={...e.defaultPayload,...t}}o&&(e.disable(i),(new t.Ajax).Post(e.leadFromUrl,b,(n=>{if(t.storeSmartOfferSubmit(e.so_config,e.persistentStorage,e.storagePrefix),t.sendSoSubmitGA(),n.success){const n=`<h2 style="margin: 100px 25px; text-align: center;">${e.so_config.thank_you}</h2>`;t.dom.find("#sm-form-container").html(n)}else console.error("sMedia: Lead submit failed",n);e.enable(i),setTimeout((()=>{e.close(!1)}),3e3)}),null,v))})),this.initialized=!0}delayClose(){t.dom.find("#sm-lead-form").serialize()===this.initialForm?this.close(!0):this.closeTimeoutID&&clearTimeout(this.closeTimeoutID)}show(){this.initialized||this.init(),t.sendSoShownGA(),t.dom.find("#smedia-overlay").css("display","block"),t.dom.find("#smedia-lead-collect-form").removeClass("so-invisible"),this.initialForm="";const e={action:"view",debug:t.getValueById("debug"),referrer:t.getValueById("referrer")},n={...this.defaultPayload,...e};(new t.Ajax).Post(this.leadFromUrl,n,(e=>{e&&t.storeOfferShown(this.persistentStorage,this.storagePrefix)}),null,"application/json"),t.increaseShowCount(this.sessionStorage,this.persistentStorage,this.storagePrefix),this.bindSmartOfferEvents()}close(e=!0){if(1==e){const e={action:"close",debug:t.getValueById("debug"),referrer:t.getValueById("referrer")};(new t.Ajax).Post(this.leadFromUrl,{...this.defaultPayload,...e},(t=>{t&&t.response&&console.log("sMedia: Smart Offer Closed")}),null,"application/json")}t.dom.find("#smedia-overlay").css("display","none"),t.dom.find("#smedia-lead-collect-form").addClass("so-invisible")}submitMemoClick(){const e={action:"click",debug:t.getValueById("debug"),referrer:t.getValueById("referrer")};(new t.Ajax).Post(this.leadFromUrl,{...this.defaultPayload,...e},(t=>{t&&t.response&&console.log("sMedia: Smart Memo Clicked.")}),null,"application/json"),this.close(!1)}disable(e){t.dom.find(e).find("input").attr("disabled","disabled"),t.dom.find(e).find("button").attr("disabled","disabled"),t.dom.find("#sm-loading-spinner").css("display","block")}enable(e){t.dom.find(e).find("input").removeAttr("disabled"),t.dom.find(e).find("button").removeAttr("disabled"),t.dom.find("#sm-loading-spinner").css("display","none")}bindSmartOfferEvents(){}}}(t.Modules||(t.Modules={}))}(sMedia||(sMedia={})),function(t){!function(e){e.SmartProfiler=class{constructor(){this.debug=!1,this.soVideoReady=!1,this.readyToShow=!1,this.smartProfilerReady=!0,this.showSmartProfiler=!1,this.smartProfilerShown=!1,this.sessPageVisits=0,this.storagePrefix="sp",this.fireSmartProfiler=(e,n,i=!1)=>{if((this.debug||this.showSmartProfiler)&&e&&(!i||!this.smartProfilerShown)){const e=setInterval((()=>{!this.readyToShow||t.multipleInputsInViewPort()||window.preventSO?t.debugLog("sMedia: Smart Profiler is either not ready or other form visible"):(clearInterval(e),this.video&&(n.play(),setTimeout((()=>{n.paused()&&(n.muted(!0),n.play())}),500)),this.smartProfilerLead.show(),this.smartProfilerShown=!0,this.exitIntentClose(),this.setInactivity())}),2e3)}}}Register(){t.Context.DebugFlags.smartOffer||this.init()}Unregister(){}init(){const n=t.Context.Browser,i=t.Context.PageType;this.debug=t.Context.DebugFlags.smartProfiler;const o=t.Context.DomainConfig,s=t.Context.DomainConfig.smedia_domains.smedia_api;this.leadFormUrl=`${s}/v1/sp-lead-public/${o.mongo_dealer_info.id}/`;const a=t.Context.PageData.car_data||{},r=(o.services||{}).smart_profiler||[],c={pages:{all:!1,home:!0,new:!1,used:!1,certified:!1,customVDP:!1,otherPage:!1},customVDP:{stockType:[],year:[],make:[],model:[],regex:[]},basicForm:{first:{label:"Name",type:"text",placeholder:"Enter Your Name",required:!0},second:{label:"Email",type:"email",placeholder:"Enter Email Address",required:!0},third:{label:"Phone",type:"tel",placeholder:"Enter Phone Number",required:!0}},extraForm:{fourth:{value:{current_vdp:!1,placeholder:"Year Make Model"},show:!1,text:"New Car Info",required:!1,show_car_option:!1},fifth:{show:!1,text:"Location",required:!1,type:"dropdown",placeholder:"Preferred Location",option:[]}},color:{bg_color:"#EFEFEF",text_color:"#404450",heading_text_color:"#ffffff",body_text_color:"#ffffff",disclaimer_color:"#404450",border_color:"#E5E5E5",button_text_color:"#ffffff",button_color:["#000000","#000000"],button_color_hover:["#222222","#222222"],button_color_active:["#222222","#222222"]},profiler_design:{bg_color:"#EFEFEF",bg_opacity:"88",text_color:"#404450",border_color:"#E5E5E5",button_text_color:"#ffffff",button_color:["#000000","#000000"],button_color_hover:["#222222","#222222"],button_color_active:["#222222","#222222"]},imgOrVideo:{video:{url:"https://www.youtube.com/watch?v=wCFi9s3LhBU&ab_channel=sMediaProofs",title:"",description:"",show_form:!0},isVideo:!1,image:"https://test.smedia.ca/images/demo.png",background:"https://test.smedia.ca/images/demo.png",version:"v0"},response_email:{active:!0,email_title:"",subject:'Hello [name],<p>Please print the following coupon and bring it with you to claim.</p><img src="[image]"/><p><br/>[dealership]',email:'Hello [name],<p>Please print the following coupon and bring it with you to claim.</p><img src="[image]"/><p><br/>[dealership]'},forward_to:{email_list:[],subject:"sMedia Coupon Lead"},special_to:{email_list:[],subject:"sMedia Coupon Lead",provider_name:"sMedia Coupon",source:"sMedia Coupon"},device_type:{mobile:!0,desktop:!0,tablet:!0},display:{display_after:3e3,retarget_after:5e3,fb_retarget_after:5e3,adword_retarget_after:5e3},check_price:{active:!1,max:1e7,min:0},shown_cap:{active:!1,value:3},fillup_cap:{active:!1,value:7},session_close:{active:!1,value:3},session_depth:{active:!1,value:0},inactivity:{active:!1,value:3e5},exit_intent:{active:!1,value:6e5},campaign_cap_google:{active:!1,count:3,days:7},campaign_cap_fb:{active:!1,count:3,days:7},show_cases:{timer:{active:!0},onclick:{active:!1,selectors:[]},static:{active:!1,options:[{url:"https://www.abc.com/test-page",selector:"#someRandomElement > a"}]}},questions:[{question:"Let us help you find what you are looking for",answers:{yes:2,no:0},id:1,nextId:0},{question:"Do you own a vehicle?",answers:{yes:3,no:5},id:2,nextId:0},{question:"Do you want to sell your vehicle?",answers:{yes:4,no:0},id:3,nextId:0},{question:"Do you want to add 250$ to the vehicle you are selling?",answers:{yes:0,no:0},id:4,nextId:0},{question:"Do you want 250$ off your purchase?",answers:{yes:0,no:0},id:5,nextId:0}],name:"default smart profiler",live:!1,priority:5,archive:!1,exit_intent_popup:!1,template:"Smart profiler Lead",otherPage:[],buttonText:"submit",custom_timing:[],disclaimer:"",_id:"1658415304859",createdAt:"",updatedAt:"",id:"1658415304859"};r.length||t.debugLog("sMedia: No `SMART PROFILER` config found.");for(const s of r){this.bgFileUrl=s.imgOrVideo.image||null,this.sessionStorage=t.Context.HashFunction.Hash(`${t.Context.Dealership}|${n.uniqueUserId}|${n.sessionId}|${s.name}`),this.persistentStorage=t.Context.HashFunction.Hash(`${t.Context.Dealership}|${n.uniqueUserId}|${s.name}`),this.sp_config=Object.assign({},c,s||{}),this.smartProfilerLead=new e.SmartProfilerLead(this.sessionStorage,this.persistentStorage,this.leadFormUrl,this.sp_config,this.storagePrefix);const r=this.sp_config.live||!1;if(this.debug=t.Context.DebugFlags.smartProfiler,this.showSmartProfiler=!0,this.smartProfilerShown=!1,!r&&!this.debug){t.debugLog(`sMedia: Smart profiler is neither live in config ==> '${this.sp_config.name}' nor we are in debug mode. Hence smart profiler stopped for this config.`);continue}this.video=this.sp_config.imgOrVideo.isVideo;const l=t.isEnabledForThisPage(this.sp_config);if(t.debugLog(`sMedia: Smart profiler live status ==> ${r} in config ==> '${this.sp_config.name}'`),t.debugLog(`sMedia: Smart profiler enable status for this page ('${i}')  ==> '${l}' in config ==> '${this.sp_config.name}'`),t.debugLog(`sMedia: Smart profiler Video ==> ${this.video} in config ==> '${this.sp_config.name}'`),!l){this.showSmartProfiler=!1,t.debugLog(`sMedia: Smart profiler is not enabled for this page in config ==> '${this.sp_config.name}'. Hence smart profiler stopped for this config (even if in debug mode).`);continue}this.sessPageVisits=t.setAndIncrementSessionDepth(this.sessionStorage,this.storagePrefix);t.metFacebookCampaignCap(this.sp_config,this.persistentStorage,"Smart Profiler",this.storagePrefix)&&(this.showSmartProfiler=!1,t.debugLog("sMedia: Smart profiler will not be shown due to facebook campaign cap met"));t.metGoogleCampaignCap(this.sp_config,this.persistentStorage,"Smart Profiler",this.storagePrefix)&&(this.showSmartProfiler=!1,t.debugLog("sMedia: Smart profiler will not be shown due to google campaign cap met"));t.dailyShownCapMet(this.sp_config,this.persistentStorage,this.storagePrefix)&&(this.showSmartProfiler=!1,t.debugLog("sMedia: Smart profiler is not shown due to daily shown cap has been met."));t.sessionShownCapMet(this.sp_config,this.sessionStorage,this.storagePrefix)&&(this.showSmartProfiler=!1,t.debugLog("sMedia: Smart profiler is not shown due to session shown cap has been met."));t.metFillUpCap(this.sp_config,this.persistentStorage,this.storagePrefix)&&(this.showSmartProfiler=!1,t.debugLog("sMedia: Smart profiler is not shown due to fill up cap is met."));t.showBasedOnDeviceType(this.sp_config)||(this.showSmartProfiler=!1,t.debugLog(`sMedia: Smart profiler is not enabled for device type ==> '${t.Context.Browser.getDeviceType()}'.`));t.sessionDepthCheck(this.sp_config,this.sessPageVisits)&&(this.showSmartProfiler=!1,t.debugLog(`sMedia: Smart profiler will not be shown due to current session depth being ${this.sessPageVisits} while ${this.sp_config.session_depth.value} is required.`));t.priceRangeMet(this.sp_config)||(this.showSmartProfiler=!1,t.debugLog("sMedia: Smart profiler is not being shown due to price range requirement not matched."));this.bgFileUrl.length>t.apiHost.length+4||!t.isEmptyString(this.sp_config.imgOrVideo.video.url)||(this.showSmartProfiler=!1,t.debugLog("sMedia: Smart profiler is not being shown due URL for 'smart_profiler_image' or 'smart_profiler_video' is missing."));const d=t.getTimeLimit(this.sp_config);console.log({smartProfilerTimeLimit:d}),this.getHtml(o,a,n),this.bindNextUiEvent(),this.getCss();const m=t=>{window.setTimeout((()=>{this.readyToShow=t}),5e3)};document.addEventListener("aiform.load",(()=>{this.readyToShow=!1})),document.addEventListener("aiform.close",(()=>m(!0))),document.addEventListener("aiform.complete",(()=>m(!0)));const p=setInterval((()=>{if(this.smartProfilerReady&&(!this.video||this.soVideoReady)){clearInterval(p),this.readyToShow=!0;let e=null;if(this.video&&(this.readyToShow=!1,e=window.videojs("smart-profiler-video",{techOrder:["youtube"],sources:[{type:"video/youtube",src:this.sp_config.imgOrVideo.video.url}],youtube:{playsinline:1,modestbranding:1,autoplay:1}},(()=>{this.readyToShow=!0,e.play()})),e.on("firstplay",(()=>{e.muted(!0),e.pause()}))),this.sp_config.show_cases.timer.active&&window.setTimeout(this.fireSmartProfiler,d,l,e,!0),this.sp_config.show_cases.onclick.active){const t=this,n=this.sp_config.show_cases.onclick.selectors;n&&n.length&&n.forEach((n=>{document.querySelectorAll(n).forEach((n=>{n.addEventListener("click",(function(n){n.preventDefault(),n.stopPropagation(),t.fireSmartProfiler(l,e)}))}))}))}if(this.sp_config.exit_intent_popup){const n=(n,i)=>{t.debugLog(`sMedia: Exit intent discovered and SO fired for event ==> '${i}'`),n.preventDefault(),n.stopPropagation(),this.fireSmartProfiler(l,e)};document.addEventListener("mousemove",(t=>{!this.smartProfilerShown&&t.clientY<=0&&n(t,"mousemove")}),!1)}}}),500);if(l){t.Context.AppStates.smart_profiler_enabled=!0,t.debugLog(`sMedia: Smart profiler is enabled for this page in config ==> '${this.sp_config.name}' and hence other configs will be ignored in this page.`);break}}}getHtml(e,n,i){const o=n?`${n.year} ${n.make} ${n.model}`.replaceAll("undefined","").trim().ucwords():"",s=t.Cookie.get("__utmzz"),a=this.sp_config.basicForm.first,r=this.sp_config.basicForm.second,c=this.sp_config.basicForm.third,l=this.sp_config.extraForm.fourth,d=l.show?`<div class="${this.video?"sp-col sp-col-extra-form":"sp-row"}">\n\t\t\t\t${this.video?"":`<label for="sp-fourth" class="sp-label">${l.text}</label>`}\n\t\t\t\t<input type="text" id="sp-fourth" class="${this.video?"ibm-font":""} sp-fourth sp-text sp-inputs" name="fourth"\n\t\t\t\tvalue="${l.value.current_vdp?o:""}"\n\t\t\t\tplaceholder="${l.value.placeholder}"\n\t\t\t\t${l.required?"required":""}>\n\t\t\t</div>`:"",m=this.sp_config.extraForm.fifth,p=m.show?"dropdown"==m.type&&m.option.length?this.getDropDown(m):`<div class="${this.video?"sp-col sp-col-extra-form":"sp-row"}">\n\t\t\t\t${this.video?"":`<label for="sp-fifth" class="sp-label">${m.text}</label>`}\n\t\t\t\t<input type="${m.type}" id="sp-fifth" class="${this.video?"ibm-font":""} sp-${m.type} sp-inputs" name="fifth"\n\t\t\t\tvalue="" placeholder="${m.placeholder}" ${m.required?"required":""}>\n\t\t\t</div>`:"",h=this.sp_config.disclaimer&&this.sp_config.disclaimer.length?`<div class="sp-disclaimer-div" id="sp-disclaimer-div">\n\t\t\t\t<div class="sp-disclaimer-text" id="sp-disclaimer-text"><i>*${this.sp_config.disclaimer}</i></div>\n\t\t\t</div>`:"",g=`<div class="smart-profiler-lead-form sp-hidden" id="smart-profiler-lead-form">\n\t\t\t\t<div class="smart-profiler-lead-image-div" id="smart-profiler-lead-image-div">\n\t\t\t\t\t<img class="smart-profiler-lead-image" id="smart-profiler-lead-image" src="${this.sp_config.imgOrVideo.image}" alt="offer image">\n\t\t\t\t</div>\n\t\t\t\t<div class="smart-profiler-lead-input-container" id="smart-profiler-lead-input-container">\n\t\t\t\t\t<div class="smart-profiler-lead-inputs" id="smart-profiler-lead-inputs">\n\t\t\t\t\t\t<div class="sp-row">\n\t\t\t\t\t\t\t<label for="sp-first">${a.label}</label>\n\t\t\t\t\t\t\t<input type="${a.type}" id="sp-first" class="sp-inputs sp-${a.type}" name="first" placeholder="${a.placeholder}" value="" ${a.required?"required":""}>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="sp-row">\n\t\t\t\t\t\t\t<label for="sp-second">${r.label}</label>\n\t\t\t\t\t\t\t<input type="${r.type}" id="sp-second" class="sp-inputs sp-${r.type}" name="second" placeholder="${r.placeholder}" value="" ${r.required?"required":""}>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="sp-row">\n\t\t\t\t\t\t\t<label for="sp-third">${c.label}</label>\n\t\t\t\t\t\t\t<input type="${c.type}" id="sp-third" class="sp-inputs sp-${c.type}" name="third" placeholder="${c.placeholder}" value="" ${c.required?"required":""}>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${d}\n\t\t\t\t\t\t${p}\n\t\t\t\t\t\t<div class="sp-row sp-submit-btn-div">\n\t\t\t\t\t\t\t<button type="submit" class="sp-submit-btn">${this.sp_config.buttonText.toUpperCase()}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${h}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div id="sp-loading-spinner" class="sp-loading-spinner sp-hidden">\n\t\t\t\t\t<img id="sp-loading-spinner-img" class="sp-loading-spinner-img" src="${t.apiHost}/adwords3/templates/balls.svg"/>\n\t\t\t\t</div>\n\t\t\t</div>`,u=`<div class="smart-profiler-hidden-inputs sp-hidden" id="smart-profiler-hidden-inputs">\n\t\t\t\t<input type="hidden" name="dealership" id="dealership" value="${e.cron||""}">\n\t\t\t\t<input type="hidden" name="stock_type" id="stock_type" value="${n.stock_type||""}">\n\t\t\t\t<input type="hidden" name="year" id="year" value="${n.year||""}">\n\t\t\t\t<input type="hidden" name="make" id="make" value="${n.make||""}">\n\t\t\t\t<input type="hidden" name="model" id="model" value="${n.model||""}">\n\t\t\t\t<input type="hidden" name="trim" id="trim" value="${n.trim||""}">\n\t\t\t\t<input type="hidden" name="title" id="title" value="${n.title||o}">\n\t\t\t\t<input type="hidden" name="url" id="url" value="${n.url||window.location.href.split("#")[0]}">\n\t\t\t\t<input type="hidden" name="stock_number" id="stock_number" value="${n.stock_number||""}">\n\t\t\t\t<input type="hidden" name="vin" id="vin" value="${n.vin||""}">\n\t\t\t\t<input type="hidden" name="svin" id="svin" value="${n.svin||""}">\n\t\t\t\t<input type="hidden" name="odometer" id="odometer" value="${n.kilometers||""}">\n\t\t\t\t<input type="hidden" name="kilometres" id="kilometres" value="${n.kilometers||""}">\n\t\t\t\t<input type="hidden" name="engine" id="engine" value="${n.engine||""}">\n\t\t\t\t<input type="hidden" name="transmission" id="transmission" value="${n.transmission||""}">\n\t\t\t\t<input type="hidden" name="body_style" id="body_style" value="${n.body_style||""}">\n\t\t\t\t<input type="hidden" name="doors" id="doors" value="${n.doors||""}">\n\t\t\t\t<input type="hidden" name="smedia_smart_lead_uuid" id="smedia_smart_lead_uuid" value="${i.uniqueUserId||""}">\n\t\t\t\t<input type="hidden" name="session_id" id="session_id" value="${i.sessionId||""}">\n\t\t\t\t<input type="hidden" name="referrer" id="referrer" value="${document.referrer||window.location.href.split("#")[0]}">\n\t\t\t\t<input type="hidden" name="mongo_dealer_id" id="mongo_dealer_id" value="${e.mongo_dealer_info.id||""}">\n\t\t\t\t<input type="hidden" name="template" id="template" value="${this.sp_config.template||""}">\n\t\t\t\t<input type="hidden" name="config_id" id="config_id" value="${this.sp_config.id||""}">\n\t\t\t\t<input type="hidden" name="config_name" id="config_name" value="${this.sp_config.name||""}">\n\t\t\t\t<input type="hidden" name="debug" id="debug" value="${this.debug||""}">\n\t\t\t\t<input type="hidden" name="smart-offer-traffic-source" id="smart-offer-traffic-source" value="${s||""}">\n\t\t\t</div>`;let f="";this.sp_config.questions.forEach((t=>{f+=this.generateQABlock(t)}));const _=`<div id="smedia-overlay" class="smart-profiler-overlay" style="display:none"></div>\n\t\t\t<div class="smart-profiler-container sp-hidden" id="smart-profiler-container">\n\t\t\t\t<button class="smart-profiler-close" id="smart-profiler-close"></button>\n\t\t\t\t<form class="smart-profiler-form" id="smart-profiler-form" name="smart-profiler-form" method="post">\n\t\t\t\t\t${u}\n\t\t\t\t\t${`<div class="smart-profiler-body" id="smart-profiler-body">\n\t\t\t\t<div class="smart-profiler-rectangle-169">\n\t\t\t\t\t<div class="smart-profiler-rectangle-151">\n\t\t\t\t\t\t<div class="smart-profiler-rectangle-152">\n\t\t\t\t\t\t\t<div id="smart-profiler-shown-frame" class="smart-profiler-rectangle-170">\n\t\t\t\t\t\t\t\t${f}\n\t\t\t\t\t\t\t\t${g}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>`}\n\t\t\t\t</form>\n\t\t\t</div>`;if(this.video){const e=document.getElementsByTagName("head")[0],n="https://vjs.zencdn.net/7.8.4/video-js.css",i="https://vjs.zencdn.net/7.8.4/video.js",o="https://cdn.jsdelivr.net/gh/videojs/videojs-youtube/dist/Youtube.min.js";t.DomInstaller.InstallStyle(n,e,(()=>{t.DomInstaller.InstallScript(i,e,(()=>{t.DomInstaller.InstallScript(o,e,(()=>{t.dom.find("body").append(""),this.soVideoReady=!0}),!1)}),!1)}))}else t.dom.find("body").append(_)}getCss(){const e=this.sp_config.extraForm.fourth.show||this.sp_config.extraForm.fifth.show,n=this.sp_config.extraForm.fourth.show&&this.sp_config.extraForm.fifth.show;let i="";const o=this.sp_config.profiler_design.button_color[0],s=this.sp_config.profiler_design.button_color[1];this.sp_config.profiler_design.button_color.length>1&&(i=`background-image: -webkit-linear-gradient(top, ${o}, ${s});\n\t\t\t\tbackground-image: -moz-linear-gradient(top, ${o}, ${s});\n\t\t\t\tbackground-image: -ms-linear-gradient(top, ${o}, ${s});\n\t\t\t\tbackground-image: -o-linear-gradient(top, ${o}, ${s});\n\t\t\t\tbackground-image: linear-gradient(to bottom, ${o}, ${s});`);let a="";const r=this.sp_config.profiler_design.button_color_hover[0],c=this.sp_config.profiler_design.button_color_hover[1];this.sp_config.profiler_design.button_color_hover.length>1&&(a=`background-image: -webkit-linear-gradient(top, ${r}, ${c});\n\t\t\t\tbackground-image: -moz-linear-gradient(top, ${r}, ${c});\n\t\t\t\tbackground-image: -ms-linear-gradient(top, ${r}, ${c});\n\t\t\t\tbackground-image: -o-linear-gradient(top, ${r}, ${c});\n\t\t\t\tbackground-image: linear-gradient(to bottom, ${r}, ${c});`);let l="";const d=this.sp_config.profiler_design.button_color_active[0],m=this.sp_config.profiler_design.button_color_active[1];this.sp_config.profiler_design.button_color_active.length>1&&(l=`background-image: -webkit-linear-gradient(top, ${d}, ${m});\n\t\t\t\tbackground-image: -moz-linear-gradient(top, ${d}, ${m});\n\t\t\t\tbackground-image: -ms-linear-gradient(top, ${d}, ${m});\n\t\t\t\tbackground-image: -o-linear-gradient(top, ${d}, ${m});\n\t\t\t\tbackground-image: linear-gradient(to bottom, ${d}, ${m});`);let p="";const h=this.sp_config.color.button_color[0],g=this.sp_config.color.button_color[1];this.sp_config.color.button_color.length>1&&(p=`background-image: -webkit-linear-gradient(top, ${h}, ${g});\n\t\t\t\tbackground-image: -moz-linear-gradient(top, ${h}, ${g});\n\t\t\t\tbackground-image: -ms-linear-gradient(top, ${h}, ${g});\n\t\t\t\tbackground-image: -o-linear-gradient(top, ${h}, ${g});\n\t\t\t\tbackground-image: linear-gradient(to bottom, ${h}, ${g});`);let u="";const f=this.sp_config.color.button_color_hover[0],_=this.sp_config.color.button_color_hover[1];this.sp_config.color.button_color_hover.length>1&&(u=`background-image: -webkit-linear-gradient(top, ${f}, ${_});\n\t\t\t\tbackground-image: -moz-linear-gradient(top, ${f}, ${_});\n\t\t\t\tbackground-image: -ms-linear-gradient(top, ${f}, ${_});\n\t\t\t\tbackground-image: -o-linear-gradient(top, ${f}, ${_});\n\t\t\t\tbackground-image: linear-gradient(to bottom, ${f}, ${_});`);let b="";const v=this.sp_config.color.button_color_active[0],y=this.sp_config.color.button_color_active[1];this.sp_config.color.button_color_active.length>1&&(b=`background-image: -webkit-linear-gradient(top, ${v}, ${y});\n\t\t\t\tbackground-image: -moz-linear-gradient(top, ${v}, ${y});\n\t\t\t\tbackground-image: -ms-linear-gradient(top, ${v}, ${y});\n\t\t\t\tbackground-image: -o-linear-gradient(top, ${v}, ${y});\n\t\t\t\tbackground-image: linear-gradient(to bottom, ${v}, ${y});`);let w=`#smedia-overlay {\n\t\t\t\tposition: fixed;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tdisplay: none;\n\t\t\t\tz-index: 4999;\n\t\t\t\tbackground: #000000;\n\t\t\t\topacity: 0.5;\n\t\t\t}\n\t\t\t.smart-profiler-container {\n\t\t\t\tposition: fixed;\n\t\t\t\tfont-family: Helvetica !important;\n\t\t\t\tfont-style: normal;\n\t\t\t\tfont-size: 18px;\n\t\t\t\ttop: 50%;\n\t\t\t\tleft: 50%;\n\t\t\t\tz-index: 5000;\n\t\t\t\tmax-height: 100%;\n\t\t\t\ttransform-origin: 50% 50%;\n\t\t\t\ttransform: translate(-50%, -50%);\n\t\t\t\tletter-spacing: normal !important;\n\t\t\t\t/* outline: 8px solid gray; */\n\t\t\t\twidth: 900px;\n\t\t\t\theight: 450px;\n\t\t\t\t/* border-radius: 16px; */\n\t\t\t}\n\t\t\t.smart-profiler-close {\n\t\t\t\twidth: 32px;\n\t\t\t\theight: 32px;\n\t\t\t\tline-height: 20px;\n\t\t\t\tcursor: pointer;\n\t\t\t\tposition: absolute !important;\n\t\t\t\tbackground-color: #333333;\n\t\t\t\ttext-align: center;\n\t\t\t\tdisplay: inline-block;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tfont-weight: 400;\n\t\t\t\tfont-style: normal;\n\t\t\t\tcolor: #F0F0F0;\n\t\t\t\tfont-family: Helvetica;\n\t\t\t\ttop: -16px;\n\t\t\t\tright: -16px;\n\t\t\t\tmargin: 0;\n\t\t\t\tborder-radius: 100%;\n\t\t\t\tborder: 1px solid #F0F0F0;\n\t\t\t\tpadding: 0;\n\t\t\t\tz-index: 9999;\n\t\t\t}\n\t\t\t.smart-profiler-close::after {\n\t\t\t\tcontent: "X";\n\t\t\t\ttext-transform: uppercase;\n\t\t\t}\n\t\t\t.smart-profiler-close:hover {\n\t\t\t\ttext-decoration: none;\n\t\t\t}\n\t\t\t.smart-profiler-form {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\t/* border-radius: 16px; */\n\t\t\t}\n\t\t\t.smart-profiler-hidden-inputs {\n\t\t\t}\n\t\t\t.smart-profiler-body {\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 100%;\n\t\t\t\t/* border-radius: 16px; */\n\t\t\t}\n\t\t\t.smart-profiler-rectangle-169 {\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 100%;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tbackground: ${this.sp_config.profiler_design.bg_color};\n\t\t\t\t/* border-radius: 16px; */\n\t\t\t}\n\t\t\t.smart-profiler-rectangle-151 {\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 100%;\n\t\t\t\tbackground: ${this.sp_config.profiler_design.bg_color};\n\t\t\t\t/* border: 1px solid ${this.sp_config.profiler_design.border_color}; */\n\t\t\t\t/* border-radius: 16px; */\n\t\t\t}\n\t\t\t.smart-profiler-rectangle-152 {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tbackground-image: url('${this.sp_config.imgOrVideo.background}');\n\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\tbackground-size: cover;\n\t\t\t\t/* border-radius: 16px; */\n\t\t\t}\n\t\t\t.smart-profiler-rectangle-170 {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tbackground: ${this.sp_config.profiler_design.bg_color}${this.sp_config.profiler_design.bg_opacity};\n\t\t\t\t/* border-radius: 16px; */\n\t\t\t}\n\t\t\t.smart-profiler-qa-ui {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tpadding: 20px;\n\t\t\t\t/* border-radius: 16px; */\n\t\t\t}\n\t\t\t.smart-profiler-qa {\n\t\t\t\tposition: relative;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\tgap: 18px;\n\t\t\t}\n\t\t\t.smart-profiler-question-back {\n\t\t\t}\n\t\t\t.smart-profiler-question-div {\n\t\t\t}\n\t\t\t.smart-profiler-question {\n\t\t\t\tcolor: ${this.sp_config.profiler_design.text_color};\n\t\t\t\tmargin: 0 0 16px;\n\t\t\t\tfont-family: Helvetica !important;\n\t\t\t\tfont-weight: 600;\n    \t\t\tfont-size: 36px;\n    \t\t\tline-height: 40px;\n    \t\t\ttext-align: center;\n\t\t\t}\n\t\t\t.smart-profiler-answer-div {\n\t\t\t\tposition: relative;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\talign-content: center;\n\t\t\t\tflex-wrap: wrap;\n\t\t\t\tfont-size: 16px;\n\t\t\t\tline-height: 24px;\n\t\t\t\tgap: 18px;\n\t\t\t}\n\t\t\t.smart-profiler-answer {\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tmin-width: 320px;\n\t\t\t\tmax-width: 420px;\n\t\t\t\tmin-height: 48px;\n\t\t\t\tpadding: 8px;\n\t\t\t\tfont-size: 16px;\n\t\t\t\tline-height: 24px;\n\t\t\t\tborder: 2px solid ${this.sp_config.profiler_design.border_color};\n\t\t\t\tborder-radius: 8px;\n\t\t\t\tcolor: ${this.sp_config.profiler_design.button_text_color};\n\t\t\t\tbackground: ${this.sp_config.profiler_design.button_color[0]};\n\t\t\t\t${i}\n\t\t\t}\n\t\t\t.smart-profiler-answer:hover {\n\t\t\t\tbackground: ${this.sp_config.profiler_design.button_color_hover[0]};\n\t\t\t\t${a}\n\t\t\t}\n\t\t\t.smart-profiler-answer:active {\n\t\t\t\tbackground: ${this.sp_config.profiler_design.button_color_active[0]};\n\t\t\t\t${l}\n\t\t\t}\n\t\t\t.smart-profiler-answer:disabled {\n\t\t\t\tbackground: ${this.sp_config.profiler_design.button_color_hover[0]};\n\t\t\t\t${a}\n\t\t\t}\n\t\t\t.skip-div {\n\t\t\t\tposition: absolute;\n\t\t\t\tbottom: 12px;\n\t\t\t\tright: 18px;\n\t\t\t\twidth: 48px;\n\t\t\t\theight: 28px;\n\t\t\t}\n\t\t\t.skip-btn {\n\t\t\t\tposition: relative;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tfont-weight: 500;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tline-height: 24px;\n\t\t\t\tcolor: #404450;\n\t\t\t\tbackground: #F0F0F0;\n\t\t\t\tborder-radius: 8px;\n\t\t\t\tmargin: 0;\n\t\t\t\tpadding: 0;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t\t.sp-hidden {\n\t\t\t\tdisplay: none !important;\n\t\t\t}\n\t\t\t.smart-profiler-lead-form {\n\t\t\t\tdisplay: flex;\n    \t\t\tflex-direction: row;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\t/* border-radius: 16px; */\n\t\t\t}\n\t\t\t.smart-profiler-lead-image-div {\n\t\t\t\twidth: 500px;\n\t\t\t\theight: 450px;\n\t\t\t\t/* border-radius: 16px 0 0 16px; */\n\t\t\t}\n\t\t\t.smart-profiler-lead-image {\n\t\t\t\twidth: 500px;\n\t\t\t\theight: 450px;\n\t\t\t\t/* border-radius: 16px 0 0 16px; */\n\t\t\t}\n\t\t\t.smart-profiler-lead-input-container {\n\t\t\t\twidth: 400px;\n\t\t\t\theight: 450px;\n\t\t\t\tbackground: ${this.sp_config.color.bg_color};\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\t/* border-radius: 0 16px 16px 0; */\n\t\t\t}\n\t\t\t.smart-profiler-lead-inputs {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\tgap: ${e?n?"8px":"12px":"16px"};\n\t\t\t\tposition: relative;\n    \t\t\ttop: ${e?n?"16px":"20px":"36px"};\n\t\t\t\theight: calc(100% - ${e?n?"16px":"20px":"36px"});\n\t\t\t\t/* border-radius: 0 0 16px 0; */\n\t\t\t}\n\t\t\t.sp-label {\n\t\t\t\tmargin-bottom: ${e?n?"2px":"4px":"6px"};\n\t\t\t\tpadding: 0;\n\t\t\t\tfont-size: 16px;\n\t\t\t}\n\t\t\t.sp-row {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\tpadding: 0 8px;\n\t\t\t\tfont-weight: 400;\n\t\t\t\tmargin-left: 10px;\n\t\t\t\tmargin-right: 10px;\n\t\t\t}\n\t\t\t.sp-col {\n\t\t\t}\n\t\t\t.sp-col-extra-form {\n\t\t\t}\n\t\t\t.sp-inputs {\n\t\t\t\tborder: 2px solid;\n\t\t\t\tborder-radius: 8px;\n\t\t\t\theight: ${e&&n?"36px":"40px"};\n\t\t\t\tpadding-left: 8px;\n\t\t\t}\n\t\t\t.sp-first {\n\t\t\t}\n\t\t\t.sp-second {\n\t\t\t}\n\t\t\t.sp-third {\n\t\t\t}\n\t\t\t.sp-fourth {\n\t\t\t}\n\t\t\t.sp-fifth {\n\t\t\t}\n\t\t\t.sp-fifth-dropdown {\n\t\t\t}\n\t\t\t.sp-dropdown-option {\n\t\t\t\tpadding: 0;\n\t\t\t\tmargin: 0;\n\t\t\t}\n\t\t\t.sp-submit-btn-div {\n\t\t\t\tmargin-top: ${e?n?"6px":"8px":"16px"};\n\t\t\t}\n\t\t\t.sp-submit-btn {\n\t\t\t\tbackground: ${this.sp_config.color.button_color[0]};\n\t\t\t\t${p}\n\t\t\t\tcolor: ${this.sp_config.color.button_text_color};\n\t\t\t\tborder: solid ${this.sp_config.color.border_color} 2px;\n\t\t\t\tborder-radius: 8px;\n\t\t\t\theight: ${e?"40px":"44px"};\n\t\t\t\t/* ${e?"font-size: 14px;":""} */\n\t\t\t}\n\t\t\t.sp-submit-btn:hover {\n\t\t\t\tbackground: ${this.sp_config.color.button_color_hover[0]};\n\t\t\t\t${u}\n\t\t\t}\n\t\t\t.sp-submit-btn:active {\n\t\t\t\tbackground: ${this.sp_config.color.button_color_active[0]};\n\t\t\t\t${b}\n\t\t\t}\n\t\t\t.sp-submit-btn:disabled {\n\t\t\t\tbackground: ${this.sp_config.color.button_color_hover[0]};\n\t\t\t\t${u}\n\t\t\t}\n\t\t\t.sp-disclaimer-div {\n\t\t\t\tfont-size: 8px;\n\t\t\t\tfont-weight: normal;\n\t\t\t\tline-height: 80%;\n\t\t\t\tmargin: 0 10px;\n    \t\t\tpadding: 0 8px;\n\t\t\t\tposition: absolute;\n\t\t\t\tbottom: 16px;\n\t\t\t}\n\t\t\t.sp-disclaimer-text {\n\t\t\t\tcolor: ${this.sp_config.color.disclaimer_color};\n\t\t\t}\n\t\t\t.sp-loading-spinner {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tbackground: ${this.sp_config.color.bg_color};\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\tflex-wrap: wrap;\n\t\t\t\talign-content: space-around;\n\t\t\t\t/* border-radius: 0 16px 16px 0; */\n\t\t\t}\n\t\t\t.sp-loading-spinner-img {\n\t\t\t\twidth: 50%;\n\t\t\t\theight: 50%;\n\t\t\t}\n\n\n\n\n\t\t\t/* PLACE HOLDER & PLACE HOLDER ALIKE */\n\t\t\t.placeholder {\n\t\t\t\tcolor: #8c8c8c !important;\n\t\t\t\tfont-style: normal;\n\t\t\t\tfont-weight: normal !important;\n\t\t\t\tfont-size: 16px;\n\t\t\t}\n\t\t\tinput::-webkit-input-placeholder {\n\t\t\t\tcolor: #8c8c8c;\n\t\t\t\tfont-style: normal;\n\t\t\t\tfont-weight: normal;\n\t\t\t\tfont-size: 16px;\n\t\t\t}\n\t\t\tinput::-ms-input-placeholder {\n\t\t\t\tcolor: #8c8c8c;\n\t\t\t\tfont-style: normal;\n\t\t\t\tfont-weight: normal;\n\t\t\t\tfont-size: 16px;\n\t\t\t}\n\t\t\tinput::placeholder {\n\t\t\t\tcolor: #8c8c8c;\n\t\t\t\tfont-style: normal;\n\t\t\t\tfont-weight: normal;\n\t\t\t\tfont-size: 16px;\n\t\t\t}\n\t\t\t::placeholder {\n\t\t\t\tcolor: #8c8c8c;\n\t\t\t\tfont-style: normal;\n\t\t\t\tfont-weight: normal;\n\t\t\t\tfont-size: 16px;\n\t\t\t}`;w+=`@media screen and (max-width: 400px) {\n\t\t\t\t.smart-profiler-container {\n\t\t\t\t\twidth: 320px;\n\t\t\t\t\theight: auto;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-container-lead-page {\n\t\t\t\t\theight: ${n?"750px":"700px"} !important;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-close {\n\t\t\t\t\twidth: 20px;\n\t\t\t\t\theight: 20px;\n\t\t\t\t\tline-height: 20px;\n\t\t\t\t\ttop: 4px;\n\t\t\t\t\tright: 4px;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-rectangle-152 {\n\t\t\t\t\tbackground-image: none;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-qa-ui {\n\t\t\t\t\tpadding: 0;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-qa {\n\t\t\t\t\tgap: 0;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-question-back {\n\t\t\t\t\tbackground-image: url('${this.sp_config.imgOrVideo.background}');\n\t\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\t\tbackground-size: cover;\n\t\t\t\t\twidth: 320px;\n    \t\t\t\taspect-ratio: 2 / 1;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-question-div {\n\t\t\t\t\twidth: 320px;\n\t\t\t\t\taspect-ratio: 2 / 1;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tbackground: ${this.sp_config.profiler_design.bg_color}${this.sp_config.profiler_design.bg_opacity};\n\t\t\t\t}\n\t\t\t\t.smart-profiler-question {\n\t\t\t\t\tfont-size: 24px;\n\t\t\t\t\tline-height: 28px;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tpadding: 0;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-answer-div {\n\t\t\t\t\tpadding: 20px 20px 60px 20px;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-answer {\n\t\t\t\t\tmin-width: 240px;\n\t\t\t\t\tmax-width: 296px;\n\t\t\t\t\tmin-height: 48px;\n\t\t\t\t\twhite-space: normal;\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-lead-form {\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-lead-image-div {\n\t\t\t\t\twidth: 320px;\n\t\t\t\t\theight: 300px;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-lead-image {\n\t\t\t\t\twidth: 320px;\n\t\t\t\t\theight: 300px;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-lead-input-container {\n\t\t\t\t\twidth: 320px;\n\t\t\t\t\theight: ${n?"450px":"400px"} !important;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-lead-inputs {\n\t\t\t\t\tgap: ${e?n?"8px":"12px":"16px"};\n\t\t\t\t\ttop: ${e?n?"16px":"20px":"36px"};\n\t\t\t\t\theight: calc(${n?"450px":"400px"} - ${e?n?"16px":"20px":"36px"});\n\t\t\t\t}\n\t\t\t}\n\n\n\n\t\t\t@media screen and (min-width: 400px) and (max-width: 600px) {\n\t\t\t\t.smart-profiler-container {\n\t\t\t\t\twidth: 375px;\n\t\t\t\t\theight: auto;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-container-lead-page {\n\t\t\t\t\theight: 750px !important;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-close {\n\t\t\t\t\twidth: 20px;\n\t\t\t\t\theight: 20px;\n\t\t\t\t\tline-height: 20px;\n\t\t\t\t\ttop: 4px;\n\t\t\t\t\tright: 8px;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-rectangle-152 {\n\t\t\t\t\tbackground-image: none;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-qa-ui {\n\t\t\t\t\tpadding: 0;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-qa {\n\t\t\t\t\tgap: 0;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-question-back {\n\t\t\t\t\tbackground-image: url('${this.sp_config.imgOrVideo.background}');\n\t\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\t\tbackground-size: cover;\n\t\t\t\t\twidth: 375px;\n    \t\t\t\taspect-ratio: 2 / 1;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-question-div {\n\t\t\t\t\twidth: 375px;\n\t\t\t\t\taspect-ratio: 2 / 1;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tbackground: ${this.sp_config.profiler_design.bg_color}${this.sp_config.profiler_design.bg_opacity};\n\t\t\t\t}\n\t\t\t\t.smart-profiler-question {\n\t\t\t\t\tfont-size: 28px;\n\t\t\t\t\tline-height: 32px;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tpadding: 0;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-answer-div {\n\t\t\t\t\tpadding: 20px 20px 60px 20px;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-answer {\n\t\t\t\t\tmin-width: 240px;\n\t\t\t\t\tmax-width: 296px;\n\t\t\t\t\tmin-height: 48px;\n\t\t\t\t\twhite-space: normal;\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-lead-form {\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-lead-image-div {\n\t\t\t\t\twidth: 375px;\n\t\t\t\t\theight: 350px;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-lead-image {\n\t\t\t\t\twidth: 375px;\n\t\t\t\t\theight: 350px;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-lead-input-container {\n\t\t\t\t\twidth: 375px;\n\t\t\t\t\theight: 400px !important;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-lead-inputs {\n\t\t\t\t\tgap: ${e?n?"8px":"12px":"16px"};\n\t\t\t\t\ttop: ${e?n?"16px":"20px":"36px"};\n\t\t\t\t\theight: calc(400px - ${e?n?"16px":"20px":"36px"});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t@media only screen and (min-width: 600px) and (max-width: 900px) {\n\t\t\t\t.smart-profiler-container {\n\t\t\t\t\twidth: 500px;\n\t\t\t\t\theight: auto;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-container-lead-page {\n\t\t\t\t\theight: ${n?"950px":"900px"} !important;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-close {\n\t\t\t\t\twidth: 20px;\n\t\t\t\t\theight: 20px;\n\t\t\t\t\tline-height: 20px;\n\t\t\t\t\ttop: 4px;\n\t\t\t\t\tright: 4px;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-rectangle-152 {\n\t\t\t\t\tbackground-image: none;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-qa-ui {\n\t\t\t\t\tpadding: 0;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-qa {\n\t\t\t\t\tgap: 0;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-question-back {\n\t\t\t\t\tbackground-image: url('${this.sp_config.imgOrVideo.background}');\n\t\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\t\tbackground-size: cover;\n\t\t\t\t\twidth: 500px;\n    \t\t\t\taspect-ratio: 2 / 1;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-question-div {\n\t\t\t\t\twidth: 500px;\n\t\t\t\t\taspect-ratio: 2 / 1;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tbackground: ${this.sp_config.profiler_design.bg_color}${this.sp_config.profiler_design.bg_opacity};\n\t\t\t\t}\n\t\t\t\t.smart-profiler-question {\n\t\t\t\t\tfont-size: 36px;\n\t\t\t\t\tline-height: 40px;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tpadding: 0;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-answer-div {\n\t\t\t\t\tpadding: 20px 20px 60px 20px;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-answer {\n\t\t\t\t\tmin-width: 240px;\n\t\t\t\t\tmax-width: 296px;\n\t\t\t\t\tmin-height: 48px;\n\t\t\t\t\twhite-space: normal;\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-lead-form {\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-lead-image-div {\n\t\t\t\t\twidth: 500px;\n\t\t\t\t\theight: 450px;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-lead-image {\n\t\t\t\t\twidth: 500px;\n\t\t\t\t\theight: 450px;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-lead-input-container {\n\t\t\t\t\twidth: 500px;\n\t\t\t\t\theight: ${n?"500px":"450px"} !important;\n\t\t\t\t}\n\t\t\t\t.smart-profiler-lead-inputs {\n\t\t\t\t\tgap: ${e?"12px":"16px"};\n\t\t\t\t\ttop: ${e?n?"16px":"20px":"36px"};\n\t\t\t\t\theight: calc(${n?"500px":"450px"} - ${e?n?"16px":"20px":"36px"});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t@media only screen and (min-width: 900px) {\n\t\t\t}\n\t\t\t`;const x=`<style id="smedia-smart-profiler-style">${w}</style>`;t.dom.find("body").append(x)}getDropDown(t){t.option.sort();let e=`<option value="" class="sp-dropdown-option" disabled selected>${t.placeholder}</option>`;t.option.forEach((t=>{e+=`<option value="${t}" class="sp-dropdown-option">${t}</option>`}));return`<div class="${this.video?"sp-col sp-col-extra-form":"sp-row"}">\n\t\t\t\t${this.video?"":`<label for="sp-fifth" class="sp-label">${t.text}</label>`}\n\t\t\t\t<select class="sp-fifth-dropdown placeholder sp-inputs"\n\t\t\t\t${this.video?'style="padding-top: 2px !important; padding-bottom: 2px !important;"':""}\n\t\t\t\tname="fifth" id="sp-fifth"\n\t\t\t\t${t.required?"required":""}>\n\t\t\t\t\t${e}\n\t\t\t\t</select>\n\t\t\t</div>`}generateQABlock(t){let e="";for(const[n,i]of Object.entries(t.answers))e+=`<input type="button" class="smart-profiler-answer show-next" data-current="${t.id}" data-next="${i}" data-default="${t.nextId}" data-qa="${t.question}" data-qa-category="${t.category}" data-qa-type="${t.answerType}" value="${n}">`;return`<div class="smart-profiler-qa-ui sp-hidden" id="sp-qa-ui-${t.id}">\n\t\t\t\t<div class="smart-profiler-qa">\n\t\t\t\t\t<div class="smart-profiler-question-back">\n\t\t\t\t\t\t<div class="smart-profiler-question-div">\n\t\t\t\t\t\t\t<h1 class="smart-profiler-question">${t.question}</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="smart-profiler-answer-div">\n\t\t\t\t\t\t${e}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="skip-div">\n\t\t\t\t\t<button type="button" class="skip-btn show-next" data-current="${t.id}" data-next="${t.nextId}" data-default="${t.nextId}" data-qa="${t.question}" data-qa-category="${t.category}" data-qa-type="${t.answerType}" value="skip">skip</button>\n\t\t\t\t</div>\n\t\t\t</div>`}bindNextUiEvent(){document.querySelectorAll(".show-next").forEach((e=>{e.addEventListener("click",(()=>{const n=e.getAttribute("data-current"),i=document.getElementById(`sp-qa-ui-${n}`),o=e.getAttribute("data-default"),s=e.getAttribute("data-next"),a={question:e.getAttribute("data-qa"),category:e.getAttribute("data-qa-category"),answerType:e.getAttribute("data-qa-type"),answer:e.value,fuzzyAnswer:"",questionId:n,nextId:s,defaultId:o,sessionId:t.Context.Browser.sessionId,url:window.location.href,timestamp:Date.now(),shownAt:Number(i.getAttribute("data-shown-at"))||Date.now()};t.showProfilerNextView(n,s,o),t.storeSmartProfilerAnswers(this.sp_config.id,a)}))}))}exitIntentClose(){this.sp_config.exit_intent.active&&document.addEventListener("visibilitychange",(()=>{window.setTimeout((()=>{this.smartProfilerLead.close(!0)}),this.sp_config.exit_intent.value)}),{once:!0})}setInactivity(){this.sp_config.inactivity.active&&window.setTimeout((()=>{this.smartProfilerLead.close(!0)}),this.sp_config.inactivity.value)}}}(t.Modules||(t.Modules={}))}(sMedia||(sMedia={})),function(t){!function(e){e.SmartProfilerLead=class{constructor(e,n,i,o,s){this.form=null,this.initialized=!1,this.closeTimeoutID=null,this.initialForm=null,this.uniqueUserId=t.Context.Browser.uniqueUserId,this.cron=t.Context.DomainConfig.cron,this.sessionId=t.Context.Browser.sessionId,this.carDataParam=t.Context.PageData.car_data,this.defaultPayload={mongo_dealer_id:t.Context.DomainConfig.mongo_dealer_info.id||"",service:"smart-offer",uuid:this.uniqueUserId,session:this.sessionId,url:window.location.href,dealership:this.cron,browser:t.Context.BrowserName,template:"",smId:"",config_name:"",svin:this.carDataParam?this.carDataParam.svin:"",carInfo:{stock_type:this.carDataParam?this.carDataParam.stock_type:"",year:this.carDataParam?this.carDataParam.year:"",make:this.carDataParam?this.carDataParam.make:"",model:this.carDataParam?this.carDataParam.model:"",stock_no:this.carDataParam?this.carDataParam.stock_number:"",trim:this.carDataParam?this.carDataParam.trim:"",body_style:this.carDataParam?this.carDataParam.body_style:"",transmission:this.carDataParam?this.carDataParam.transmission:"",odo_status:this.carDataParam&&"new"==this.carDataParam.stock_type?"original":"unknown",odometer:this.carDataParam?this.carDataParam.kilometres:""}},this.sessionStorage=e,this.persistentStorage=n,this.leadFromUrl=i,this.sp_config=o,this.storagePrefix=s,this.defaultPayload.template=this.sp_config.template,this.defaultPayload.smId=this.sp_config.id,this.defaultPayload.config_name=this.sp_config.name}init(){const e=this;t.dom.find("#smedia-overlay").click((()=>{e.close(!0)})),t.dom.find("#smart-profiler-close").click((()=>{e.close(!0)})),t.dom.find("#smart-profiler-form").submit((function(n){n.preventDefault();const i=this;let o=!0;const s=t.getValueById("debug"),a=t.getValueById("referrer"),r=t.getValueById("smart-offer-traffic-source"),c=t.getValueById("sm-first"),l=t.getValueById("sm-second"),d=t.getValueById("sm-third"),m=e.sp_config.basicForm,p={[m.first.type]:c,[m.second.type]:l,[m.third.type]:d},h=p.text,g=p.email,u=p.tel,f=t.getValueById("sp-fourth"),_=t.getValueById("sp-fifth");if(t.isEmptyString(h)&&(o=!1,document.getElementById("sp-first").value="",alert("Name can not be empty")),t.isEmptyString(_)){const t=e.sp_config&&e.sp_config.extraForm?e.sp_config.extraForm.fifth:null;t&&t.show&&t.required&&"dropdown"==t.type&&(o=!1,alert(`'${t.text}' is required.`))}const b={action:"submit",debug:s,referrer:a,name:h,email:g,phone:u,trafficSource:r,fourth:f,fifth:_,questionAnswer:t.fetchProfilerAnswers(e.sp_config.id)},v={...e.defaultPayload,...b};console.log({submitPayload:v}),o&&(e.disable(i),(new t.Ajax).Post(e.leadFromUrl,v,(n=>{if(t.storeSmartOfferSubmit(e.sp_config,e.persistentStorage,e.storagePrefix),t.sendSoSubmitGA(),n.success){const n=`<h2 style="margin: 100px 25px; text-align: center;">${e.sp_config.thank_you}</h2>`;t.dom.find("#smart-profiler-lead-input-container").html(n),t.clearProfilerAnswers(e.sp_config.id)}else console.error("sMedia: Lead submit failed",n);e.enable(i),setTimeout((()=>{e.close(!1)}),3e3)}),null,"application/json"))})),this.initialized=!0}delayClose(){t.dom.find("#smart-profiler-form").serialize()===this.initialForm?this.close(!0):this.closeTimeoutID&&clearTimeout(this.closeTimeoutID)}show(){this.initialized||this.init(),t.sendSoShownGA(),t.dom.find("#smedia-overlay").css("display","block"),t.dom.find("#smart-profiler-container").removeClass("sp-hidden");const e=t.fetchProfilerAnswers(this.sp_config.id);if(e.length>0){const n=e.at(-1);t.showProfilerNextView(n.questionId,n.nextId,n.defaultId)}else if(this.sp_config&&this.sp_config.questions&&this.sp_config.questions[0]){const t=this.sp_config.questions[0].id,e=document.getElementById(`sp-qa-ui-${t}`);e.classList.remove("sp-hidden"),e.dataset.shownAt=Date.now().toString()}else t.Context.LogService.Debug("sMedia: Could not get initial questions id in smart profiler");this.initialForm="";const n={action:"view",debug:t.getValueById("debug"),referrer:t.getValueById("referrer")},i={...this.defaultPayload,...n};(new t.Ajax).Post(this.leadFromUrl,i,(e=>{e&&t.storeOfferShown(this.persistentStorage,this.storagePrefix)}),null,"application/json"),t.increaseShowCount(this.sessionStorage,this.persistentStorage,this.storagePrefix),this.bindSmartProfilerEvents()}close(e){if(1==e){const e=t.fetchProfilerAnswers(this.sp_config.id),n={action:"close",debug:t.getValueById("debug"),referrer:t.getValueById("referrer"),questionAnswer:e},i={...this.defaultPayload,...n};console.log({closePayload:i}),(new t.Ajax).Post(this.leadFromUrl,i,(e=>{e&&e.response&&t.Context.LogService.Debug("sMedia: Smart profiler closed")}),null,"application/json")}t.dom.find("#smedia-overlay").css("display","none"),document.getElementById("smart-profiler-container").classList.add("sp-hidden")}disable(e){t.dom.find(e).find("input").attr("disabled","disabled"),t.dom.find(e).find("button").attr("disabled","disabled"),document.getElementById("smart-profiler-lead-input-container").classList.add("sp-hidden"),document.getElementById("sp-loading-spinner").classList.remove("sp-hidden")}enable(e){t.dom.find(e).find("input").removeAttr("disabled"),t.dom.find(e).find("button").removeAttr("disabled"),document.getElementById("sp-loading-spinner").classList.add("sp-hidden"),document.getElementById("smart-profiler-lead-input-container").classList.remove("sp-hidden")}bindSmartProfilerEvents(){const e=this;window.addEventListener("beforeunload",(function(t){t.preventDefault(),document.getElementById("smart-profiler-container").className.includes("sp-hidden")||e.close(!0)})),t.Context.BrowserName&&window.addEventListener("onbeforeunload",(function(t){t.preventDefault(),document.getElementById("smart-profiler-container").className.includes("sp-hidden")||e.close(!0)}))}}}(t.Modules||(t.Modules={}))}(sMedia||(sMedia={})),function(t){!function(e){const n=(e,n,i,o="track")=>{t.Context.GlobalCallbacks.epm.push(((t,s)=>{if(1===s){const t=e||{},s={stock_number:(t.stock_number||"").trim(),year:t.year||"",make:t.make||"",model:t.year||"",url:t.url||window.location.href.split("#")[0],event_owner:"sMedia"};n.fbq_sm(i,o,n.fb_pixel_id,s)}}))},i=(e,n,i,o,s,a)=>{const r=((t,e)=>(t?[""]:["","-desktop","-mobile","-instagram"]).map((t=>`${e}${t}`)))(i,(e[a]||"").trim());return{content_ids:r,content_type:n,stock_number:(e.stock_number||"").trim(),year:e.year,make:e.make,model:e.model,price:e.price?t.priceToNumber(e.price):null,currency:o.currency,state_of_vehicle:e.stock_type,exterior_color:e.color,transmission:e.transmission,body_style:e.body_style,fuel_type:e.fuel_type,drivetrain:e.drivetrain,country:o.country_name,postal_code:o.post_code,page_type:s,url:e.url||window.location.href.split("#")[0],vin:e.vin,event_owner:"sMedia"}},o=t=>!!t.combined_feed_mode&&t.combined_feed_mode,s=(e,n)=>{const i=(e.fbq_selectors||{})[n]?t.escapeString(e.fbq_selectors[n]):"nothing";return t.dom.find(i)},a=(t,e,n,s,a,r,c,l,d)=>{e.forEach((e=>{const m=i(t,e,o(n),a,r,d);s.fbq_sm(c,l,s.fb_pixel_id,m)}))},r=(t,e,n,i,o,a,r,c,l)=>{s(t,n).each((t=>{t.addEventListener(l,(t=>{r.forEach((t=>{const n={content_ids:[e],content_type:t,page_type:a,country:o.country_name,postal_code:o.post_code,currency:o.currency,event_owner:"sMedia"};i.fbq_sm(e,c,i.fb_pixel_id,n)}))}))}))},c=(e,n,a,r,c,l,d,m,p,h,g,u)=>{s(n,a).each((function(n){n.addEventListener(g,(function(n){"vdp"===m?p.forEach((t=>{const n=i(e,t,o(c),d,m,u);l.fbq_sm(r,h,l.fb_pixel_id,n)})):p.forEach((t=>{const e={content_type:t,country:d.country_name,postal_code:d.post_code,page_type:m,event_name:r,url:window.location.href.split("#")[0],event_owner:"sMedia"};l.fbq_sm(r,h,l.fb_pixel_id,e)}));const s=this;window.setTimeout((()=>{t.dom.el(s).unbind("click")}),1e3)}))}))},l=(e,n,s,a,r,c,l,d,m)=>{t.dom.find("form").each((function(t){t.addEventListener(d,(function(t){const d="Lead";"vdp"===r?c.forEach((t=>{const c=i(e,t,o(n),a,r,m);s.fbq_sm(d,l,s.fb_pixel_id,c)})):c.forEach((t=>{const e={content_type:t,country:a.country_name,postal_code:a.post_code,page_type:r,event_name:d,url:window.location.href,event_owner:"sMedia"};s.fbq_sm(d,l,s.fb_pixel_id,e)}))}))}))},d=(e,n,s,a,r,c,l,d,m,p)=>{t.dom.find(l).each((function(t){t.addEventListener(m,(function(t){const l="Lead";"vdp"===r?c.forEach((t=>{const c=i(e,t,o(n),a,r,p);s.fbq_sm(l,d,s.fb_pixel_id,c)})):c.forEach((t=>{const e={content_type:t,country:a.country_name,postal_code:a.post_code,page_type:r,event_name:l,url:window.location.href.split("#")[0],event_owner:"sMedia"};s.fbq_sm(l,d,s.fb_pixel_id,e)}))}))}))},m=(t,e,n,s,a,r,c,l,d,m,p)=>{document.addEventListener(t,(()=>{"vdp"===c?l.forEach((t=>{const l={...i(n,t,o(s),r,c,p),...d};a.fbq_sm(e,m,a.fb_pixel_id,l)})):l.forEach((t=>{const n={...{content_type:t,country:r.country_name,postal_code:r.post_code,page_type:c,event_name:e,url:window.location.href.split("#")[0],event_owner:"sMedia"},...d};a.fbq_sm(e,m,a.fb_pixel_id,n)}))}))};e.tracking=new class{constructor(){this.viewContentFound=!1}Register(){const e=this,i=t.Context.DomainConfig.cron_config,o=t.Context.DomainConfig.scrapper_config,s=t.Context.PageData.page_type,p=t.Context.PageData.car_data,h=t.Context.DomainConfig.dealer_info,g=t.Context.DomainConfig.single_tag_config,u=g.analytics&&g.analytics[0]?g.analytics[0].account_id:"",f=g.facebook&&g.facebook[0]?g.facebook[0].account_id:"",_=new t.Trackers(u,f),b=()=>{g.analytics.forEach((n=>{if(n.account_id){_.analytics_tracking_id=n.account_id.trim();const i=(t=>{const e="function"==typeof ga&&ga.getAll&&"function"==typeof ga.getAll?ga.getAll():[];for(let n=0,i=e.length;n<i;n++)if(e[n].get("trackingId")==t)return!0;return!1})(_.analytics_tracking_id);_.ga_init();const o=n.config[s];o&&o.ga.forEach((e=>{if("pageview"===e)i||_.sendGa(!0,e,t.ANALYTICS_EVENTS[e])})),"vdp"===s&&o.profitable_engagement&&t.Context.GlobalCallbacks.epm.push(((t,n)=>{e.smediaProfitableEngagement(_,n,o.install_analytics)})),t.dom.find("form").submit((function(e){_.sendGa(!0,"event",t.ANALYTICS_EVENTS.lead_from_submit)}))}}))},v=()=>{g.facebook.forEach((t=>{if(t.account_id){_.fb_pixel_id=t.account_id.trim();const e=y(_.fb_pixel_id);_.fb_init();const o=t.config.vdp&&t.config.vdp.viewcontent&&t.config.vdp.viewcontent.length?t.config.vdp.viewcontent:["vehicle"],g=h.pixel_content_id_field?h.pixel_content_id_field:"stock_number";let u;switch(s){case"vdp":u=t.config.vdp;break;case"srp":u=t.config.srp;break;case"ty":u=t.config.ty;break;case"other":u=t.config.other}if(u&&u.install_fbq){const t={addtowishlist:"AddToWishlist",scheduletestdrive:"Schedule",contactus:"Contact",findlocation:"FindLocation",addtocart:"AddToCart",smedialead:"SmediaLead",customizevehicle:"CustomizeProduct",completeregistration:"CompleteRegistration",initiatecheckout:"InitiateCheckout",addedpaymentinfo:"AddPaymentInfo",purchase:"Purchase"};((u||{}).fbq||[]).forEach((f=>{const b="vdp"===s&&p&&p.stock_number?p:null;switch(f){case"pageview":e||_.fbq_sm("PageView","trackSingle",_.fb_pixel_id);break;case"viewcontent":"vdp"==s&&(a(b||{},o,i,_,h,s,"ViewContent","trackSingle",g),this.viewContentFound=!0);break;case"epm":"vdp"==s&&n(b,_,"ProfitableEngagement","trackSingleCustom");break;case"smedialead":[["aiform.complete",{page_type:s,form:"aibutton"}],["smart_offer.submit",{page_type:s,form:"smart_offer"}]].forEach((t=>{m(t[0],"SmediaLead",b,i,_,h,s,o,t[1],"trackSingleCustom",g)}));break;case"lead":(()=>{const t=(u.fbq_selectors||{}).lead||"";t.length?d(b,i,_,h,s,o,t,"trackSingle","click",g):l(b,i,_,h,s,o,"trackSingle","submit",g)})();break;case"addtowishlist":case"scheduletestdrive":case"contactus":case"findlocation":case"addtocart":case"customizevehicle":case"completeregistration":case"initiatecheckout":case"addedpaymentinfo":case"purchase":c(b,u,f,t[f],i,_,h,s,o,"trackSingle","click",g);break;case"search":"srp"===s&&r(u,"Search",f,_,h,s,o,"trackSingle","click")}}))}}}))},y=t=>{const e="function"==typeof window.fbq&&window.fbq.getState&&"function"==typeof window.fbq.getState?window.fbq.getState().pixels:[];for(let n=0,i=e.length;n<i;n++)if(e[n].id==t)return!0;return!1},w=t=>{g.analytics&&b(),g.facebook&&v()};"complete"===document.readyState?w():window.addEventListener("load",w),this.updateTagState(),"ty"===s&&o.inpage_cont_match&&g.facebook&&g.facebook[0].config.ty.fbq&&document.querySelector(o.inpage_cont_match)&&this.smediaInpageLead(_,g.facebook[0].config.ty.fbq)}smediaInpageLead(t,e){e.forEach((e=>{switch(e){case"pageview":t.fbq_sm("PageView","trackSingle",t.fb_pixel_id);break;case"lead":t.fbq_sm("Lead","trackSingle",t.fb_pixel_id)}}))}smediaProfitableEngagement(e,n,i=!1){const o=t.ANALYTICS_EVENTS[`profitable_engagement_${n}`];if(e.sendGa(i,"event",o),1==n){const t=new CustomEvent("engaged_prospect",{detail:null});document.dispatchEvent(t)}}updateTagState(){const e={cron_name:t.Context.Dealership,page_type:t.Context.PageData.page_type,view_content:this.viewContentFound,mongo_dealer_id:t.Context.DomainConfig.mongo_dealer_info.id||""},n=`${t.apiHost}/api/tag_state_store.php`;(new t.Ajax).Post(n,e,(()=>{}),null,"application/x-www-form-urlencoded")}Unregister(){}},t.Context.OnReady((()=>{e.tracking.Register()})),t.Context.OnClose((()=>{e.tracking.Unregister()}))}(t.Modules||(t.Modules={}))}(sMedia||(sMedia={})),function(t){!function(e){e.tradeSmart=new class{Register(){const e=t.Context.DomainConfig;e.dealer_info.tradesmart?this.installTradeSmart(e.dealer_info.tradesmart_dealer_id,e.smedia_domains.tradesmart):this.uninstallTradeSmart()}installTradeSmart(e,n){const i=document.getElementById("smatp_trade_tool"),o=`${n}/stylesheets/modal.css`,s=`${n}/javascripts/tool.js`;function a(t,e){const n=new XMLHttpRequest;n.open("GET",t),n.onreadystatechange=function(){4==this.readyState&&200==this.status&&e.apply(this.responseText,[200])},n.send()}i&&(i.setAttribute("data-dealerid",e),t.DomInstaller.InstallStyle(o),t.DomInstaller.InstallScript(s)),a(o,(function(t){200===t?console.log("sMedia : Trade Smart css load"):(console.log("sMedia : Trade Smart css is not load hide Powered by"),document.querySelector("smedia_powered_by").style.visibility="hidden",document.getElementById("trade-loading")&&(document.getElementById("trade-loading").style.display="none"))})),a(s,(function(t){200===t?console.log("sMedia : Trade Smart javascripts load"):(console.log("sMedia : Trade Smart javascript is not loaded. Hiding powered by"),document.querySelector("smedia_powered_by").style.visibility="hidden",document.getElementById("trade-loading")&&(document.getElementById("trade-loading").style.display="none"))})),this.HardCodeCSS()}ModifyTradeSmart(){console.log("sMedia : Removing tradesmart");const e=document.querySelector(".smedia_powered_by");e.parentNode.removeChild(e);const n=document.createElement("span");n.classList.add("smedia_powered_by","smedia_powered_by_span"),n.innerHTML=`Powered by: <a href="https://www.vroomance.com/" target="_blank" class="smedia_powered_by_anchor">\n\t\t\t\t<img src="${t.apiHost}/vroomance.png" alt="Vroomance" class="smedia_powered_by_anchor_img">\n\t\t\t</a>`;const i=document.querySelector("#smatp_trade_tool");i.parentNode.insertBefore(n,i.nextSibling),console.log("sMedia : Readding tradesmart")}CallModifyTradeSmart(){if(document.querySelector(".smedia_powered_by"))this.ModifyTradeSmart();else{const t=this;setTimeout((function(){t.CallModifyTradeSmart()}),3e3)}}HardCodeCSS(){if(document.querySelector(".smedia_powered_by a")){const t=document.querySelector(".smedia_powered_by a"),e=document.querySelector(".smedia_powered_by a img");t.style.textDecoration="none",e.style.display="inline",e.style.height="30px",e.style.marginBottom="-5px"}else{setTimeout(this.HardCodeCSS,2e3)}}uninstallTradeSmart(){t.dom.find("#trade-loading").css("display","none"),t.dom.find(".smedia_powered_by").css("visibility","hidden")}Unregister(){this.uninstallTradeSmart()}},t.Context.OnReady((()=>{})),t.Context.OnClose((()=>{}))}(t.Modules||(t.Modules={}))}(sMedia||(sMedia={})),function(t){!function(e){e.vinnAuto=new class{Register(){const e=t.Context.PageType,n=t.Context.DomainConfig.cron_config.vinnauto,i=t.Context.PageData.car_data;if("vdp"==e&&n.button_status&&this.vinnautoEligible(i)&&this.vinnautoLive(n)){const e="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js";t.DomInstaller.InstallScript(e,"head",(()=>{this.installVinnAuto(n,this.getVinnautoCarData(i))}))}}vinnautoEligible(e){return t.isEmptyString(e.vin)?(t.Context.LogService.Debug("sMedia VINNAUTO : VIN is either missing or invalid."),!1):(t.isEmptyString(e.stock_number)&&t.Context.LogService.Debug("sMedia VINNAUTO : Stock Number is missing."),t.isEmptyString(e.stock_type)?(t.Context.LogService.Debug("sMedia VINNAUTO : Stock Type is missing"),!1):t.isEmptyString(e.year)?(t.Context.LogService.Debug("sMedia VINNAUTO : Year is missing"),!1):t.isEmptyString(e.make)?(t.Context.LogService.Debug("sMedia VINNAUTO : Make is missing"),!1):t.isEmptyString(e.model)?(t.Context.LogService.Debug("sMedia VINNAUTO : Model is missing"),!1):(t.isEmptyString(e.trim)&&t.Context.LogService.Debug("sMedia VINNAUTO : Trim is missing."),t.isEmptyString(e.price)||!t.isProperPrice(e.price)?(t.Context.LogService.Debug("sMedia VINNAUTO : Improper price"),!1):!t.isEmptyString(e.main_photo)||!t.isEmptyString(e.all_images)||(t.Context.LogService.Debug("sMedia VINNAUTO : Main photo missing."),!1)))}vinnautoLive(e){return t.isEmptyString(e.dealership_id)?(t.Context.LogService.Debug("sMedia VINNAUTO : dealership id is missing"),!1):t.isEmptyString(e.VINN_SIGNING_SECRET)?(t.Context.LogService.Debug("sMedia VINNAUTO : VINN SIGNING SECRET missing"),!1):!e.button_debug||(t.Context.LogService.Debug("sMedia VINNAUTO : VINNAUTO debug is true and smedia_debug is false and hence vinnauto button is not shown. To show button turn off vinnauto button debug or to test it in debug mode turn on smedia_debug"),!1)}getVinnautoCarData(e){let n="Used";"new"==e.stock_type&&(n="New");let i=e.main_photo;if(!t.isEmptyString(e.main_photo)){i=e.all_images.split("|")[0]}return{vehicle:{price:t.priceToNumber(e.price),vin:e.vin,stock_number:e.stock_number,status:n,year:e.year,make:e.make,model:e.model,trim:e.trim,main_photo:i,kilometers:t.priceToNumber(e.kilometers),exterior_color:e.color,interior_color:e.interior_color,fuel_type:e.fuel_type,drive:e.drivetrain,engine_size:e.engine,transmission:e.transmission,body:e.body_style}}}installVinnAuto(e,n){const i=n.vehicle.vin,o=e.dealership_id,s=e.VINN_SIGNING_SECRET,a=JSON.stringify(n).replace("/","/"),r=`${o}: ${a}`,c={vinn:{signature:CryptoJS.HmacSHA256(r,s),body:a}};window.vinnCheckoutConfig={dealership:o,getVehicle:function(t){return c[t]}},console.log({vehicles:c}),window.smediaCarData=JSON.parse(a);const l=document.querySelector(e.button_container),d=document.createElement("div");d.innerHTML=`<button ${e.button_code} data-vinn-widget=${i}> ${e.button_text} </button>`,l.insertAdjacentElement(e.button_position,d);t.DomInstaller.InstallScript("https://vinnauto.com/checkout.v1.js")}Unregister(){}},t.Context.OnReady((()=>{})),t.Context.OnClose((()=>{}))}(t.Modules||(t.Modules={}))}(sMedia||(sMedia={})),function(t){!function(e){e.visualScraper=new class{Register(){"VS"==t.Context.DomainConfig.dealer_info.scrapper_type&&this.installVisualScraper(t.apiHost)}installVisualScraper(e){const n=`${e}/visual-scraper/client_vs.js?ref=${window.location.href.split("#")[0]}`;t.DomInstaller.InstallScript(n)}uninstallVisualScraper(){const t=document.getElementById("visual_scraper_ui");t.parentNode.removeChild(t)}Unregister(){document.getElementById("visual_scraper_ui")&&this.uninstallVisualScraper()}},t.Context.OnReady((()=>{})),t.Context.OnClose((()=>{}))}(t.Modules||(t.Modules={}))}(sMedia||(sMedia={})),String.prototype.padChar=function(t,e="0",n=!0){let i=String(this);for(;i.length<t;)i=n?`${e}${i}`:`${i}${e}`;return i},String.prototype.ucfirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.ucwords=function(){return this.toLowerCase().replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,(function(t){return t.toUpperCase()}))},String.prototype.removeLineBreaks=function(){return this.replace(/(?:\r\n|\r|\n)/g," ")},String.prototype.removeMultipleSpace=function(){return this.replace(/  +/g," ")},String.prototype.removeLineBreaksAndMultiSpaces=function(){return this.replace(/\s\s+/g," ").trim()},String.prototype.replaceArray=function(t,e){let n=this;for(let i=0,o=t.length;i<o;i++)n=n.replace(t[i],e[i]);return n},String.prototype.splitAt=function(t){return[this.substring(0,t),this.substring(t+1)]});
